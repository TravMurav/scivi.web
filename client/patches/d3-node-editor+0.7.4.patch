diff --git a/node_modules/d3-node-editor/build/d3-node-editor.js b/node_modules/d3-node-editor/build/d3-node-editor.js
index 5b84455..0a3434c 100755
--- a/node_modules/d3-node-editor/build/d3-node-editor.js
+++ b/node_modules/d3-node-editor/build/d3-node-editor.js
@@ -1787,12 +1787,12 @@ var pug_debug_filename, pug_debug_line;try {
     pug_html = pug_html + "<div al-repeat=\"output in node.outputs\" style=\"text-align: right\">";
     pug_html = pug_html + "<div class=\"output-title\">";
     pug_html = pug_html + "{{output.title}}</div>";
-    pug_html = pug_html + "<div class=\"socket output {{output.socket.id.toLowerCase().replace(' ','-')}}\" al-pick-output title=\"{{output.socket.name}}\n{{output.socket.hint}}\"></div></div>";
+    pug_html = pug_html + "<div class=\"socket output {{output.socket.id.toLowerCase().replaceAll(' ','-')}}\" al-pick-output title=\"{{output.socket.name}}\n{{output.socket.hint}}\"></div></div>";
     pug_html = pug_html + "<!-- Controls-->";
     pug_html = pug_html + "<div class=\"control\" al-repeat=\"control in node.controls\" style=\"text-align: center\" :width=\"control.parent.width - 2 * control.margin\" :height=\"control.height\" al-control=\"control\"></div>";
     pug_html = pug_html + "<!-- Inputs-->";
     pug_html = pug_html + "<div al-repeat=\"input in node.inputs\" style=\"text-align: left\">";
-    pug_html = pug_html + "<div class=\"socket input {{input.socket.id.toLowerCase().replace(' ','-')}} {{input.multipleConnections?'multiple':''}}\" al-pick-input title=\"{{input.socket.name}}\n{{input.socket.hint}}\"></div>";
+    pug_html = pug_html + "<div class=\"socket input {{input.socket.id.toLowerCase().replaceAll(' ','-')}} {{input.multipleConnections?'multiple':''}}\" al-pick-input title=\"{{input.socket.name}}\n{{input.socket.hint}}\"></div>";
     pug_html = pug_html + "<div class=\"input-title\" al-if=\"!input.showControl()\">";
     pug_html = pug_html + "{{input.title}}</div>";
     pug_html = pug_html + "<div class=\"input-control\" al-if=\"input.showControl()\" al-control=\"input.control\"></div></div>";
@@ -2035,8 +2035,8 @@ function setAttributes(el, input, output) {
     el.dataset.inputIndex = input.node.inputs.indexOf(input);
     el.dataset.outputNode = output.node.id;
     el.dataset.outputIndex = output.node.outputs.indexOf(output);
-    el.className.baseVal += ' output-' + output.socket.id.toLowerCase().replace(' ', '-');
-    el.className.baseVal += ' input-' + input.socket.id.toLowerCase().replace(' ', '-');
+    el.className.baseVal += ' output-' + output.socket.id.toLowerCase().replaceAll(' ', '-');
+    el.className.baseVal += ' input-' + input.socket.id.toLowerCase().replaceAll(' ', '-');
 }
 
 function Connection$1(scope, el, expression, env) {
@@ -3538,7 +3538,7 @@ var pug_debug_filename, pug_debug_line;try {
     pug_html = pug_html + "<svg class=\"connections\">";
     pug_html = pug_html + "<path class=\"connection\" al-repeat=\"path in editor.paths\" :d=\"path.d\" al-connection :class.selected=\"path.selected\"></path></svg>";
     pug_html = pug_html + "<!-- Nodes-->";
-    pug_html = pug_html + "<div class=\"node {{editor.selected.contains(node)?'selected':''}} {{node.title.toLowerCase().replace(' ','-')}}\" al-repeat=\"node in editor.nodes\" :style.transform=\"&quot;translate(&quot;+node.position[0]+&quot;px,&quot;+node.position[1]+&quot;px)&quot;\" al-node :data-id=\"node.id\">";
+    pug_html = pug_html + "<div class=\"node {{editor.selected.contains(node)?'selected':''}} {{node.title.toLowerCase().replaceAll(' ','-')}}\" al-repeat=\"node in editor.nodes\" :style.transform=\"&quot;translate(&quot;+node.position[0]+&quot;px,&quot;+node.position[1]+&quot;px)&quot;\" al-node :data-id=\"node.id\">";
     pug_html = pug_html + "<div al-html=\"editor.view.getTemplate(node)\"></div></div>";
   } catch (err) {
     pug.rethrow(err, pug_debug_filename, pug_debug_line, pug_debug_sources[pug_debug_filename]);
diff --git a/node_modules/d3-node-editor/build/d3-node-editor.js.map b/node_modules/d3-node-editor/build/d3-node-editor.js.map
index 7d4ead4..1ae2ee9 100755
--- a/node_modules/d3-node-editor/build/d3-node-editor.js.map
+++ b/node_modules/d3-node-editor/build/d3-node-editor.js.map
@@ -1 +1 @@
-{"version":3,"file":"d3-node-editor.js","sources":["../src/extras/module.js","../src/component-worker.js","../src/block.js","../src/control.js","../src/connection.js","../src/io.js","../src/socket.js","../src/input.js","../src/output.js","../src/node.js","../src/templates/node.pug","../src/component.js","../src/directives/group.js","../src/directives/io.js","../src/directives/connection.js","../src/directives/control.js","../src/directives/contextmenu.js","../src/utils/common.js","../src/group.js","../src/directives/node.js","../src/directives/index.js","../src/templates/menu.pug","../src/contextmenu.js","../src/extras/diff.js","../src/engine.js","../src/utils/view.js","../src/templates/view.pug","../src/editorview.js","../src/eventlistener.js","../src/history.js","../src/selected.js","../src/editor.js","../src/extras/task.js"],"sourcesContent":["export class Module {\n    \n    constructor(data, titlesInput, titlesOutput) {\n        var inputs = Module.extractNodes(data, titlesInput);\n        var outputs = Module.extractNodes(data, titlesOutput);\n    \n        this.inputs = [];\n        this.outputs = [];\n        this.keys = {\n            input: inputs.map(n => n.data.name),\n            output: outputs.map(n => n.data.name)\n        };\n    }\n    \n    static extractNodes(data, titles) {\n        return Object.keys(data.nodes)\n            .filter(k => titles.includes(data.nodes[k].title))\n            .map(k => data.nodes[k])\n            .sort((n1, n2) => n1.position[1] > n2.position[1]);\n    }\n    \n    read(inputs) {\n        this.keys.input.forEach((key, i) => {\n            this.inputs[key] = inputs[i];\n        });\n    }\n    \n    write(outputs) {\n        this.keys.output.forEach((k, i) => {\n            outputs[i] = this.outputs[k];\n        });\n    }\n}\n    \nexport class ModuleManager {\n    constructor(titlesInput, titlesOutput) {\n        this.engine = null;\n        this.titlesInput = titlesInput;\n        this.titlesOutput = titlesOutput;\n    }\n    \n    getInputs(data) {\n        return Module.extractNodes(data, this.titlesInput)\n            .map(n => ({ title: n.title, name: n.data.name }));\n    }\n    \n    getOutputs(data) {\n        return Module\n            .extractNodes(data, this.titlesOutput)\n            .map(n => {\n                return {title: n.title, name: n.data.name};\n            });\n    }\n    \n    async workerModule(node, inputs, outputs) {\n        var data = node.data.module.data;\n        var m = new Module(data, this.titlesInput, this.titlesOutput);\n        var engine = this.engine.clone();\n            \n        m.read(inputs);\n        await engine.process(data, null, m);\n        m.write(outputs);\n    }\n    \n    workerInputs(node, inputs, outputs, module) {\n        if (module) \n            outputs[0] = module.inputs[node.data.name][0];\n    }\n        \n    workerOutputs(node, inputs, outputs, module) {\n        if (module) \n            module.outputs[node.data.name] = inputs[0][0];\n    }\n        \n    setEngine(engine) {\n        this.engine = engine;\n    }\n}","export class ComponentWorker {\n    constructor(name, props) {\n        this.name = name;\n        this.worker = props.worker;\n    }\n}","export class Block {\n\n    constructor(Class) {\n        if (this.constructor === Block)\n            throw new TypeError('Cannot construct Block instances')\n        \n        this.id = Block.incrementId(Class);\n        this.position = [0.0, 0.0];\n        this.width = 0;\n        this.height = 0;\n        this.style = {};\n    }\n\n    static incrementId(Class) {\n        if (!Class.latestId)\n            Class.latestId = 1\n        else\n            Class.latestId++\n        return Class.latestId\n    }\n}","import { Node } from './node';\n\nexport class Control {\n\n    constructor(html: string, handler = () => { }) {\n        this.html = html;\n        this.parent = null;\n        this.handler = handler;\n    }\n\n    getNode() {\n        if (this.parent === null)\n            throw new Error(\"Control isn't added to Node/Input\");   \n        \n        return this.parent instanceof Node ? this.parent : this.parent.node;\n    }\n\n    getData(key) {\n        return this.getNode().data[key];\n    }\n\n    putData(key, data) {\n        this.getNode().data[key] = data;\n    }  \n}","export class Connection {\n\n    constructor(output, input) {\n        this.output = output;\n        this.input = input;\n        this.style = {};\n\n        this.input.addConnection(this);\n    }\n\n    remove() {\n        this.input.removeConnection(this);\n        this.output.removeConnection(this);\n    }\n}","import { Connection } from './connection';\n\nexport class IO {\n\n    constructor(title, socket, multiConns) {\n        this.el = null;\n\t    this.node = null;\n        this.multipleConnections = multiConns;\n        this.connections = [];\n\t   \n        this.title = title;\n        this.socket = socket;\n    }\n    \n    removeConnection(connection: Connection) {\n        this.connections.splice(this.connections.indexOf(connection), 1);\n    }\n}","export class Socket {\n\n    constructor(id: string, name: string, hint: string) {\n        this.id = id;\n        this.name = name;\n        this.hint = hint;\n        this.compatible = [];\n    }\n\n    combineWith(socket: Socket) {\n        this.compatible.push(socket);\n    }\n\n    compatibleWith(socket: Socket) {\n        return this === socket || this.compatible.includes(socket);\n    }\n}","import { Connection } from './connection';\nimport { Control } from './control';\nimport { IO } from './io';\nimport { Socket } from './socket';\n\nexport class Input extends IO {\n   \n    constructor(title: string, socket: Socket, multiConns: boolean = false) {\n        super(title, socket, multiConns);\n        this.control = null;\n    }\n\n    hasConnection() {\n        return this.connections.length > 0;\n    }\n\n    addConnection(connection: Connection) {\n        if (!this.multipleConnections && this.hasConnection())\n            throw new Error('Multiple connections not allowed');\n        this.connections.push(connection);\n    }\n\n    addControl(control: Control) {\n        this.control = control;\n        control.parent = this;\n    }\n\n    showControl() {\n        return !this.hasConnection() && this.control !== null;\n    }\n\n    toJSON() {\n        return {\n            'connections': this.connections.map(c => {\n                return {\n                    node: c.output.node.id,\n                    output: c.output.node.outputs.indexOf(c.output)\n                };\n            })\n        };\n    }\n}","import { Connection } from './connection';\nimport { IO } from './io';\nimport { Input } from './input';\nimport { Socket } from './socket';\n\nexport class Output extends IO {\n  \n    constructor(title: string, socket: Socket, multiConns: boolean = true) {\n        super(title, socket, multiConns);\n    }\n    \n    hasConnection() {\n        return this.connections.length > 0;\n    }\n\n    connectTo(input: Input) {\n        if (!this.socket.compatibleWith(input.socket))\n            throw new Error('Sockets not compatible');\n        if (!input.multipleConnections && input.hasConnection())\n            throw new Error('Input already has one connection');\n        if (!this.multipleConnections && this.hasConnection())\n            throw new Error('Output already has one connection');\n\n        var connection = new Connection(this, input);\n\n        this.connections.push(connection);\n        return connection;\n    }\n\n    connectedTo(input: Input) {\n        return this.connections.some((item) => {\n            return item.input === input;\n        });\n    }\n\n    toJSON() {\n        return {\n            'connections': this.connections.map(c => {\n                return {\n                    node: c.input.node.id,\n                    input: c.input.node.inputs.indexOf(c.input)\n                }\n            })\n        };\n    }\n}","import { Block } from './block';\nimport { Component } from './component';\nimport { Control } from './control';\nimport { Input } from './input';\nimport { Output } from './output';\n\nexport class Node extends Block {\n   \n    constructor(title: string) {\n        super(Node);\n        this.el = null;\n        this.group = null;\n        this.inputs = [];\n        this.outputs = [];\n        this.controls = [];\n        this.data = {};\n        this.readOnly = false;\n\n        this.title = title;\n        [this.width, this.height] = [180, 100];\n    }\n\n    addControl(control: Control, index: ?uint8 = null) {\n        control.parent = this;\n\n        if (index !== null)\n            this.controls.splice(index, 0, control);\n        else\n            this.controls.push(control);        \n        \n        return this;\n    }\n\n    addInput(input: Input, index: ?uint8 = null) {\n        if (input.node !== null)\n            throw new Error('Input has already been added to the node');\n\n        input.node = this;\n\n        if (index !== null)\n            this.inputs.splice(index, 0, input);\n        else\n            this.inputs.push(input);\n        \n        return this;\n    }\n\n    addOutput(output: Output, index: ?uint8 = null) {\n        if (output.node !== null)\n            throw new Error('Output has already been added to the node');\n        \n        output.node = this;\n\n        if (index !== null)\n            this.outputs.splice(index, 0, output);\n        else\n            this.outputs.push(output);\n\n        return this;\n    }\n\n    getConnections(type) {\n        var conns = [];\n\n        if (type==='input' || !type)\n            this.inputs.map(input => {\n                input.connections.forEach(c => {\n                    conns.push(c);\n                });\n            });\n        \n        if (type==='output' || !type)\n            this.outputs.forEach(output => {\n                output.connections.forEach(c => {\n                    conns.push(c);\n                });\n            });\n        return conns;\n    }\n\n    inputsWithVisibleControl() {\n        return this.inputs.filter((input)=> {\n            return input.showControl();\n        });\n    }\n\n    toJSON() {\n        return {\n            'id': this.id,\n            'data': this.data,\n            'group': this.group ? this.group.id : null,\n            'inputs': this.inputs.map(input => input.toJSON()),\n            'outputs': this.outputs.map(output => output.toJSON()),\n            'position': this.position,\n            'title': this.title\n        }\n    }\n\n    static async fromJSON(component: Component, json: Object) {\n        var node = component.newNode();\n\n        node.id = json.id;\n        node.data = json.data;\n        Node.latestId = Math.max(node.id, Node.latestId);\n        node.position = json.position;\n        node.title = json.title;\n\n        await component.builder(node);\n\n        return node;\n    }\n}\n","div.title\n  | {{node.title}}\n\n// Outputs\ndiv(al-repeat='output in node.outputs',style=\"text-align: right\")\n  .output-title\n    | {{output.title}}\n  .socket.output(\n    al-pick-output, \n    class=\"{{output.socket.id.toLowerCase().replace(' ','-')}}\",\n    title='{{output.socket.name}}\\n{{output.socket.hint}}'\n  )\n\n// Controls\ndiv.control(\n  al-repeat='control in node.controls', \n  style=\"text-align: center\",\n  :width='control.parent.width - 2 * control.margin', \n  :height='control.height', \n  al-control='control'\n)\n\n// Inputs\ndiv(al-repeat='input in node.inputs',style=\"text-align: left\")\n  .socket.input(\n    al-pick-input,\n    class=\"{{input.socket.id.toLowerCase().replace(' ','-')}} {{input.multipleConnections?'multiple':''}}\"\n    title='{{input.socket.name}}\\n{{input.socket.hint}}'\n  )\n  .input-title(\n    al-if='!input.showControl()'\n  )\n    | {{input.title}}\n  .input-control(\n    al-if='input.showControl()'\n    al-control='input.control'\n  )","import { ComponentWorker } from './component-worker';\nimport { Node } from './node';\nimport template from './templates/node.pug';\n\nvar defaultTemplate = template();\n\nexport class Component extends ComponentWorker {\n    constructor(name, props) {\n        super(name, props);\n        this.template = props.template || defaultTemplate;\n        this.builder = props.builder;\n        this.created = props.created || function () { }\n        this.destroyed = props.destroyed || function () { }\n    }\n\n    newNode() {\n        return new Node(this.name);\n    }\n}","import * as d3 from 'd3';\n\nexport function Group(scope, el, expression, env) {\n    var group = env.changeDetector.locals.group;\n    \n    function setPosition(item, dx, dy) {\n        const extent = this.editor.view.translateExtent;\n        const minx = extent[0][0];\n        const miny = extent[0][1];\n        const maxx = extent[1][0];\n        const maxy = extent[1][1];\n\n        item.position[0] = Math.min(maxx, Math.max(minx, item.position[0] + dx));\n        item.position[1] = Math.min(maxy, Math.max(miny, item.position[1] + dy));\n    }\n\n    group.el = el;\n    env.watch('group.style', () => {\n        Object.assign(el.style, group.style);\n    }, { deep: true });\n\n    d3.select(el).call(\n        d3.drag().on('start', () => {\n            if (!d3.event.sourceEvent.shiftKey)\n                this.editor.selectGroup(group, d3.event.sourceEvent.ctrlKey);\n        }).on('drag', () => {\n            if (this.editor.readOnly) return;\n\n            var k = this.transform.k;\n            var dx = d3.event.dx / k;\n            var dy = d3.event.dy / k;\n\n            this.editor.selected.each(item => {\n                setPosition.call(this, item, dx, dy);\n            });\n\n            this.editor.selected.eachGroup(item => {\n                for (var i in item.nodes) {\n                    let node = item.nodes[i];\n\n                    if (this.editor.selected.contains(node))\n                        continue;    \n\n                    setPosition.call(this, node, dx, dy);\n                }\n            });\n\n            this.update();\n        }).on('end', () => {\n            this.editor.eventListener.trigger('change');\n        })\n    );\n\n    var items = {\n        'Remove group': () => {\n            this.editor.removeGroup(group);\n        }\n    };\n\n    var onClick = (subitem) => {\n        subitem.call(this);\n        this.contextMenu.hide();\n    }\n\n    d3.select(el).on('contextmenu', () => {\n        if (this.editor.readOnly) return;\n        \n        var x = d3.event.clientX;\n        var y = d3.event.clientY;\n\n        this.editor.selectGroup(group);\n        this.contextMenu.show(x, y, items, false, onClick);\n        d3.event.preventDefault();\n    });\n}\n\nexport function GroupHandler(scope, el, arg, env) {\n    var group = env.changeDetector.locals.group;\n    var mousePrev = null;\n\n    function updateGroup(mouse, deltaw, deltah, deltax, deltay) {\n        if (deltaw !== 0)\n            mousePrev[0] = mouse[0];\n        if (deltah !== 0)\n            mousePrev[1] = mouse[1];\n        \n        if (arg.match('l')) {\n            group.position[0] += Math.min(deltaw, deltax);\n            group.setWidth(group.width - deltax);\n        }\n        else if (arg.match('r'))\n            group.setWidth(group.width + deltax);\n\n        if (arg.match('t')) {\n            group.position[1] += Math.min(deltah, deltay);\n            group.setHeight(group.height - deltay);\n        }\n        else if (arg.match('b'))\n            group.setHeight(group.height + deltay);\n    }\n\n    d3.select(el).call(d3.drag().on('start', () => {\n        mousePrev = d3.mouse(this.container.node());\n        this.editor.selectGroup(group);\n    }).on('drag', () => {\n        if (this.editor.readOnly) return;\n\n        var zoom = d3.zoomTransform(this.container);\n        var mouse = d3.mouse(this.container.node());\n        var deltax = (mouse[0] - mousePrev[0]) / zoom.k;\n        var deltay = (mouse[1] - mousePrev[1]) / zoom.k;\n        var deltaw = Math.max(0, group.width - group.minWidth);\n        var deltah = Math.max(0, group.height - group.minHeight);\n\n        updateGroup(mouse, deltaw, deltah, deltax, deltay);\n\n        this.update();\n    }).on('end', () => {\n        this.editor.nodes.forEach(node => {\n            if (group.isCoverNode(node))\n                group.addNode(node);\n            else\n                group.removeNode(node);\n        });\n\n        this.editor.eventListener.trigger('change');\n        this.update();\n    }))\n}\n\nexport function GroupTitle(scope, el, expression, env) {\n    var group = env.changeDetector.locals.group;\n\n    d3.select(el).on('click', () => {\n        var title = prompt('Please enter title of the group', group.title);\n\n        if (title !== null && title.length > 0)\n            group.title = title;\n        env.scan();\n    });\n}","import * as d3 from 'd3';\n\nexport function PickInput(scope, el, expression, env) {\n    var input = env.changeDetector.locals.input;\n\n    function interceptInput() {\n        if (this.pickedOutput === null) {\n            if (input.hasConnection()) {\n                this.pickedOutput = input.connections[0].output;\n                this.editor.removeConnection(input.connections[0]);\n            }\n            this.update();\n            return true;\n        }\n    }\n\n    function prepareConnection() {\n        if (!input.multipleConnections && input.hasConnection())\n            this.editor.removeConnection(input.connections[0]);\n        \n        if (!this.pickedOutput.multipleConnections && this.pickedOutput.hasConnection())\n            this.editor.removeConnection(this.pickedOutput.connections[0]);\n        \n        if (this.pickedOutput.connectedTo(input)) {\n            var connection = input.connections.find(c => c.output === this.pickedOutput);\n\n            this.editor.removeConnection(connection);\n        }\n\n        this.editor.connect(this.pickedOutput, input);\n    }\n\n    input.el = el;\n\n    let prevent = false;\n\n    d3.select(el).on('mouseleave', () => prevent = false);\n    d3.select(el).on('mousedown mouseup', () => {\n        if (this.editor.readOnly || prevent) return;\n        d3.event.preventDefault();\n        d3.event.stopPropagation();\n        \n        if (interceptInput.call(this)) return;\n        prepareConnection.call(this);\n\n        this.pickedOutput = null;\n    \n        this.update();\n    });\n    d3.select(el).on('mousedown.prevent', () => prevent = true);\n}\n\nexport function PickOutput(scope, el, expression, env) {\n    var output = env.changeDetector.locals.output;\n\n    output.el = el;\n\n    d3.select(el).on('mousedown', () => {\n        if (this.editor.readOnly) return;\n        d3.event.stopPropagation();\n\n        this.pickedOutput = output;\n    });\n}","function setAttributes(el, input, output) {\n    el.dataset.inputNode = input.node.id;\n    el.dataset.inputIndex = input.node.inputs.indexOf(input);\n    el.dataset.outputNode = output.node.id;\n    el.dataset.outputIndex = output.node.outputs.indexOf(output);\n    el.className.baseVal += ' output-'+output.socket.id.toLowerCase().replace(' ', '-');\n    el.className.baseVal += ' input-'+input.socket.id.toLowerCase().replace(' ', '-');\n}\n\nexport function Connection(scope, el, expression, env) {\n    var path = env.changeDetector.locals.path;\n    var connection = path.connection;\n\n    if (!connection) return;\n    \n    connection.el = el;\n    env.watch('path.connection.style', () => {\n        Object.assign(el.style, connection.style);\n    }, { deep: true });\n    \n    var input = path.connection.input;\n    var output = path.connection.output;\n\n    setAttributes(el, input, output);\n}","export function Control(scope, el, expression, env) {\n    var locals = env.changeDetector.locals;\n    var control = locals.input ? locals.input.control:locals.control;\n\n    el.innerHTML = control.html;\n    control.handler(el.children[0], control);\n}","import * as d3 from 'd3';\n\nexport function Item(scope, el, expression, env) {\n    var l = env.changeDetector.locals;\n    var item = l.subitem || l.item;\n    var haveSubitems = item.constructor === Object;\n\n    d3.select(el)\n        .on('click', () => {\n            if (!haveSubitems)\n                this.onClick(item);\n            d3.event.stopPropagation();\n        })\n        .classed('have-subitems', haveSubitems);\n}","export class Utils {\n\n    static nodesBBox(nodes) {\n        var min = (arr) => Math.min(...arr);\n        var max = (arr) => Math.max(...arr);\n\n        var left = min(nodes.map(node => node.position[0]));\n        var top = min(nodes.map(node => node.position[1]));\n        var right = max(nodes.map(node => node.position[0] + node.width));\n        var bottom = max(nodes.map(node => node.position[1] + node.height));\n        \n        return {\n            left,\n            right,\n            top,\n            bottom,\n            width: Math.abs(left - right),\n            height:  Math.abs(top - bottom),\n            getCenter: () => {\n                return [\n                    (left + right) / 2,\n                    (top + bottom) / 2\n                ];\n            }\n        };\n    }\n\n    static isValidData(data) {\n        return typeof data.id === 'string' &&\n            this.isValidId(data.id) &&\n            data.nodes instanceof Object && !(data.nodes instanceof Array) && \n            (!data.groups || data.groups instanceof Object)\n    }\n\n    static isValidId(id) {\n        return /^[\\w-]{3,}@[0-9]+\\.[0-9]+\\.[0-9]+$/.test(id);\n    }\n\n    static validate(id, data) {\n        var msg = '';\n        var id1 = id.split('@');\n        var id2 = data.id.split('@');\n\n        if (!this.isValidData(data))\n            msg += 'Data is not suitable. '; \n        if (id !== data.id)\n            msg += 'IDs not equal. ';\n        if (id1[0] !== id2[0])\n            msg += 'Names don\\'t match. ';\n        if (id1[1] !== id2[1])\n            msg += 'Versions don\\'t match';\n\n        return { success: msg ==='', msg };\n    }\n}","import { Block } from './block';\nimport { Node } from './node';\nimport { Utils } from './utils/common';\n\nexport class Group extends Block {\n\n    constructor(title: string, params: Object) {\n        super(Group);\n        this.title = title;\n\n        this.nodes = [];\n        this.setMinSizes(300, 250);\n\n        if (params.nodes)\n            this.coverNodes(params.nodes);\n        else {\n            this.position = params.position;\n            this.width = params.width;\n            this.height = params.height;\n        }\n    }\n\n    setMinSizes(width, height) {\n        this.minWidth = width;\n        this.minHeight = height;\n    }\n\n    setWidth(w: number) {\n        return this.width = Math.max(this.minWidth, w);\n    }\n\n    setHeight(h: number) {\n        return this.height = Math.max(this.minHeight, h);\n    }\n\n    isCoverNode(node: Node) {\n        var gp = this.position;\n        var np = node.position;\n\n        return np[0] > gp[0] && np[1] > gp[1]\n            && np[0] + node.width < gp[0] + this.width\n            && np[1] + node.height < gp[1] + this.height;\n    }\n\n    coverNodes(nodes: Node[]) {\n        var self = this;\n        var margin = 30;\n        var bbox = Utils.nodesBBox(nodes);\n\n        nodes.forEach(node => {\n            if (!node.readOnly) {\n                if (node.group !== null) node.group.removeNode(node.group);\n                self.addNode(node);\n            }\n        });\n        this.position = [bbox.left - margin, bbox.top - 2 * margin];\n        this.setWidth(bbox.right - bbox.left + 2 * margin);\n        this.setHeight(bbox.bottom - bbox.top + 3 * margin);\n    }\n\n    containNode(node: Node) {\n        return this.nodes.indexOf(node) !== -1;\n    }\n\n    addNode(node: Node) {\n        if (this.containNode(node)) return false;\n        if (node.group !== null) node.group.removeNode(node);\n        node.group = this;\n        this.nodes.push(node);\n        return true;\n    }\n\n    removeNode(node: Node) {\n        if (!this.containNode(node)) return;\n        this.nodes.splice(this.nodes.indexOf(node), 1);\n        node.group = null;\n    }\n\n    remove() {\n        this.nodes.forEach(node => {\n            node.group = null;\n        })\n    }\n\n    toJSON() {\n        return {\n            'id': this.id,\n            'title': this.title,\n            'nodes': this.nodes.map(a => a.id),\n            'minWidth': this.minWidth,\n            'minHeight': this.minHeight,\n            'position': this.position,\n            'width': this.width,\n            'height': this.height\n        }\n    }\n\n    static fromJSON(json: Object) {\n        var group = new Group(json.title, {\n            position: json.position,\n            width: json.width,\n            height: json.height\n        });\n\n        group.id = json.id;\n        Group.latestId = Math.max(group.id, Group.latestId);\n        group.minWidth = json.minWidth;\n        group.minHeight = json.minHeight;\n        return group;\n    }\n}\n","import * as d3 from 'd3';\nimport { Group } from '../group';\n\nexport function Node(scope, el, expression, env) {\n    var node = env.changeDetector.locals.node;\n\n    function setPosition(item, dx, dy) {\n        const extent = this.editor.view.translateExtent;\n        const minx = extent[0][0];\n        const miny = extent[0][1];\n        const maxx = extent[1][0];\n        const maxy = extent[1][1];\n\n        item.position[0] = Math.min(maxx, Math.max(minx, item.position[0] + dx));\n        item.position[1] = Math.min(maxy, Math.max(miny, item.position[1] + dy));\n    }\n        \n    node.el = el;\n    env.watch('node.style', () => {\n        Object.assign(el.style, node.style);\n    }, { deep: true });\n\n    d3.select(el).call(\n        d3.drag().on('start', () => {\n            d3.select(el).raise();\n            if (!d3.event.sourceEvent.shiftKey)\n                this.editor.selectNode(node, d3.event.sourceEvent.ctrlKey);\n        }).on('drag', () => {\n            if (this.editor.readOnly || node.readOnly) return;\n\n            var k = this.transform.k;\n            var dx = d3.event.dx / k;\n            var dy = d3.event.dy / k;\n\n            this.editor.selected.each(item => {\n                setPosition.call(this, item, dx, dy);\n            });\n\n            this.editor.selected.eachGroup(item => {\n                for (var i in item.nodes) {\n                    let _node = item.nodes[i];\n\n                    if (this.editor.selected.contains(_node))\n                        continue;    \n\n                    setPosition.call(this, _node, dx, dy);\n                }\n            });\n            \n            this.update();\n        }).on('end', () => {\n            this.editor.groups.forEach(group => {\n                this.editor.selected.eachNode(_node => {\n                    var contain = group.containNode(_node);\n                    var cover = group.isCoverNode(_node);\n\n                    if (contain && !cover)\n                        group.removeNode(_node);\n                    else if (!contain && cover)\n                        group.addNode(_node);\n                });\n            });\n\n            this.editor.eventListener.trigger('change');\n            this.update();\n        })\n    );\n\n    window.addEventListener('load', () => {\n        node.width = el.offsetWidth;\n        node.height = el.offsetHeight;\n    });\n\n    var items = {\n        'Remove node': () => {\n            this.editor.removeNode(node);\n        },\n        'Add to group': () => {\n            var group = new Group('Group', {nodes:[node]});\n\n            this.editor.addGroup(group);\n        }\n    };\n\n    var onClick = (subitem) => {\n        subitem.call(this);\n        this.contextMenu.hide();\n    }\n\n    d3.select(el).on('contextmenu', () => {\n        if (this.editor.readOnly || node.readOnly) return;\n\n        var x = d3.event.clientX;\n        var y = d3.event.clientY;\n\n        this.editor.selectNode(node);\n        this.contextMenu.show(x, y, items, false, onClick);\n        d3.event.preventDefault();\n    });\n}\n","import { Group, GroupHandler, GroupTitle } from './group';\nimport { PickInput, PickOutput } from './io';\nimport { Connection } from './connection';\nimport { Control } from './control';\nimport { Item } from './contextmenu';\nimport { Node } from './node';\n\nexport function declareViewDirectives(view, alight) {\n    \n    alight.directives.al.node = Node.bind(view);\n    \n    alight.directives.al.group = Group.bind(view);\n    alight.directives.al.groupHandler = GroupHandler.bind(view);\n    alight.directives.al.groupTitle = GroupTitle.bind(view);\n    \n    alight.directives.al.pickInput = PickInput.bind(view);\n    alight.directives.al.pickOutput = PickOutput.bind(view);\n        \n    alight.directives.al.control = Control.bind(view);\n\n    alight.directives.al.connection = Connection.bind(view);\n}\n\nexport function declareMenuDirectives(menu, alight) {\n    \n    alight.directives.al.item = Item.bind(menu);\n}",".context-menu(\n    :style.left='contextMenu.x+\"px\"',\n    :style.top='contextMenu.y+\"px\"',\n    @mouseleave='contextMenu.hide()',\n    al-if='contextMenu.visible'\n)\n  .search.item(al-if='contextMenu.searchBar')\n    input(al-value='filter')\n  .item(al-repeat='(name,item) in contextMenu.searchItems(filter)',\n    al-item\n    )\n    | {{name}}\n    .subitems(al-if='contextMenu.haveSubitems(item)')\n      .item(\n        al-repeat='(name,subitem) in item',\n        al-item\n      )\n        | {{name}}","import * as alight from 'alight';\nimport * as d3 from 'd3';\nimport { declareMenuDirectives } from './directives/index';\nimport template from './templates/menu.pug';\n\nexport class ContextMenu {\n\n    constructor(items: Object, searchBar: boolean = true, disabled = false) {\n        this.visible = false;\n        this.disabled = disabled;\n        this.x = 0;\n        this.y = 0;\n        this.default = {\n            items,\n            searchBar,\n            onClick() { throw new TypeError('onClick should be overrided');}\n        };\n\n        this.bindTemplate(template());\n    }\n\n    bindTemplate(t) {\n        this.dom = d3.select('body').append('div');\n        this.dom.node().setAttribute('tabindex', 1);\n        this.dom.html(t);\n\n        const alightInstance = alight.makeInstance();\n        \n        declareMenuDirectives(this, alightInstance);\n        this.$cd = alightInstance(this.dom.node(), {contextMenu: this});\n    }\n\n    searchItems(filter: ?string) {\n        var regex = new RegExp(filter, 'i'); \n        var items = {};\n\n        Object.keys(this.items).forEach(key => {\n            var item = this.items[key];\n\n            if (item.constructor === Object) {\n                var subitems = Object.keys(item).filter(subitem => regex.test(subitem))\n\n                if (subitems.length > 0) {\n                    items[key] = {};\n                    subitems.forEach(sumitem => {\n                        items[key][sumitem] = item[sumitem];\n                    });\n                }\n            }\n            \n            if (regex.test(key))\n                items[key] = item;\n        });\n\n        return items;\n    }\n\n    haveSubitems(item) {\n        return item.constructor === Object;\n    }\n\n    isVisible() {\n        return this.visible;\n    }\n\n    show(x: number, y: number, items: ?Object = null, searchBar: ?boolean = null, onClick = null) {\n        if (this.disabled) return;\n        \n        this.visible = true;\n        this.items = items || this.default.items;\n        this.searchBar = searchBar || this.default.searchBar;\n        this.onClick = onClick || this.default.onClick;\n        this.x = x;\n        this.y = y;\n        this.$cd.scan();\n    }\n\n    hide() {\n        this.visible = false;\n        this.$cd.scan();\n    }\n}","var p = (v) => parseInt(v);\nvar eqArr = (ar1, ar2) => ar1.every((v, i) => v === ar2[i]);\nvar eqObj = (o1, o2) => JSON.stringify(o1) === JSON.stringify(o2);\nvar eqCon = (c1, c2, target) => {\n    return c1.node === c2.node && c1[target] === c2[target];\n}\nvar diffCons = (cons1, cons2) => {\n\n    var removed = cons1.filter(c1 => !cons2.some(c2 => eqCon(c1, c2, 'input')));\n    var added = cons2.filter(c2 => !cons1.some(c1 => eqCon(c1, c2, 'input')));\n    \n    return {removed, added}\n}\n\nexport class Diff {\n\n    constructor(data1, data2) {\n        this.a = data1;\n        this.b = data2;\n    }\n\n    basicDiffs() {\n        var k1 = Object.keys(this.a.nodes);\n        var k2 = Object.keys(this.b.nodes);\n\n        var removed = k1.filter(k => !k2.includes(k)).map(p);\n        var added = k2.filter(k => !k1.includes(k)).map(p);\n        var stayed = k1.filter(k => k2.includes(k)).map(p);\n        \n        return { removed, added, stayed };\n    }\n\n    compare() {\n        var { removed, added, stayed } = this.basicDiffs();\n\n        var moved = stayed.filter(id => {\n            var p1 = this.a.nodes[id].position;\n            var p2 = this.b.nodes[id].position;\n\n            return !eqArr(p1, p2)\n        });\n\n        var datachanged = stayed.filter(id => {\n            var d1 = this.a.nodes[id].data;\n            var d2 = this.b.nodes[id].data;\n\n            return !eqObj(d1, d2);\n        });\n\n        var connects = stayed.reduce((arr, id) => {\n            var o1 = this.a.nodes[id].outputs;\n            var o2 = this.b.nodes[id].outputs;\n\n            var output = o1.map((out, i) => {\n                return Object.assign({output: i}, diffCons(out.connections, o2[i].connections))\n            }).filter(diff => diff.added.length !== 0 || diff.removed.length !== 0);\n\n            return [...arr, ...output.map(o => (o.node=id, o))];\n        }, [])\n\n        return {removed, added, moved, datachanged, connects}\n    }\n}","import { ComponentWorker } from './component-worker';\nimport { Utils } from './utils/common';\n\nvar State = { AVALIABLE:0, PROCESSED: 1, ABORT: 2};\n\nexport { ComponentWorker };\n\nexport class Engine {\n\n    constructor(id: string, components: ComponentWorker[]) {\n\n        if (!Utils.isValidId(id))\n            throw new Error('ID should be valid to name@0.1.0 format');  \n        \n        this.id = id;\n        this.components = components;\n        this.args = [];\n        this.data = null;\n        this.state = State.AVALIABLE;\n        this.onAbort = () => { };\n        this.onError = (message, data) => { console.error(message, data); };\n    }\n\n    clone() {\n        return new Engine(this.id, this.components);\n    }\n\n    async throwError (message, data = null) {\n        await this.abort();\n        this.onError(message, data);\n        this.processDone();\n\n        return 'error';\n    }\n\n    extractInputNodes(node, nodes) {\n        return node.inputs.reduce((a, inp) => {\n            return [...a, ...(inp.connections || []).reduce((b, c) => [...b, nodes[c.node]], [])]\n        }, []);\n    }\n\n    detectRecursions(nodes) {\n        const nodesArr = Object.keys(nodes).map(id => nodes[id]);\n        const findSelf = (node, inputNodes) => {\n            if (inputNodes.some(n => n === node))\n                return node;\n            \n            for (var i = 0; i < inputNodes.length; i++) {\n                if (findSelf(node, this.extractInputNodes(inputNodes[i], nodes)))\n                    return node;\n            }\n\n            return null;\n        }\n\n        return nodesArr.map(node => {\n            return findSelf(node, this.extractInputNodes(node, nodes))\n        }).filter(r => r !== null);\n    }\n\n    processStart() {\n        if (this.state === State.AVALIABLE) {  \n            this.state = State.PROCESSED;\n            return true;\n        }\n\n        if (this.state === State.ABORT) {\n            return false;\n        }\n\n        console.warn(`The process is busy and has not been restarted.\n                Use abort() to force it to complete`);\n        return false;\n    }\n\n    processDone() {\n        var success = this.state !== State.ABORT;\n\n        this.state = State.AVALIABLE;\n        \n        if (!success) {\n            this.onAbort();\n            this.onAbort = () => { }\n        }    \n\n        return success;\n    }\n\n    async abort() {\n        return new Promise(ret => {\n            if (this.state === State.PROCESSED) {\n                this.state = State.ABORT;\n                this.onAbort = ret;\n            }\n            else if (this.state === State.ABORT) {\n                this.onAbort();\n                this.onAbort = ret;\n            }\n            else\n                ret();\n        });\n    }\n\n    async lock(node) {\n        return new Promise(res => {\n            node.unlockPool = node.unlockPool || [];\n            if (node.busy && !node.outputData)\n                node.unlockPool.push(res);\n            else \n                res();\n            \n            node.busy = true;\n        });    \n    }\n\n    unlock(node) {\n        node.unlockPool.forEach(a => a());\n        node.unlockPool = [];\n        node.busy = false;\n    }\n\n    async extractInputData(node) {\n        return await Promise.all(node.inputs.map(async (input) => {\n            var conns = input.connections;\n            let connData = await Promise.all(conns.map(async (c) => {\n                const prevNode = this.data.nodes[c.node];\n\n                let outputs = await this.processNode(prevNode);\n\n                if (!outputs) \n                    this.abort();\n                else\n                    return outputs[c.output];\n            }));\n\n            return connData;\n        }));\n    }\n\n    async processWorker(node) {\n        var inputData = await this.extractInputData(node);\n        var component = this.components.find(c => c.name === node.title);\n        var outputData = node.outputs.map(() => null);\n\n        try {\n            await component.worker(node, inputData, outputData, ...this.args);\n        } catch (e) {\n            this.abort();\n            console.warn(e);\n        }\n\n        return outputData;\n    }\n\n    async processNode(node) {\n        if (this.state === State.ABORT || !node)\n            return null;\n        \n        await this.lock(node);\n\n        if (!node.outputData) {\n            node.outputData = this.processWorker(node)\n        }\n\n        this.unlock(node);\n        return node.outputData;\n    }\n\n    async forwardProcess(node) {\n        if (this.state === State.ABORT)\n            return null;\n\n        return await Promise.all(node.outputs.map(async (output) => {\n            return await Promise.all(output.connections.map(async (c) => {\n                const nextNode = this.data.nodes[c.node];\n\n                await this.processNode(nextNode);\n                await this.forwardProcess(nextNode);\n            }));\n        }));\n    }\n\n    copy(data) {\n        data = Object.assign({}, data);\n        data.nodes = Object.assign({}, data.nodes);\n        \n        Object.keys(data.nodes).forEach(key => {\n            data.nodes[key] = Object.assign({}, data.nodes[key])\n        });\n        return data;\n    }\n\n    async validate(data) {\n        var checking = Utils.validate(this.id, data);\n\n        if (!checking.success)\n            return await this.throwError(checking.msg);  \n        \n        var recurentNodes = this.detectRecursions(data.nodes);\n\n        if (recurentNodes.length > 0)\n            return await this.throwError('Recursion detected', recurentNodes);      \n         \n        return true;\n    }\n\n    async processStartNode(id) {\n        if (id) {\n            let startNode = this.data.nodes[id];\n\n            if (!startNode)\n                return await this.throwError('Node with such id not found');   \n            \n            await this.processNode(startNode);\n            await this.forwardProcess(startNode);\n        }\n    }\n\n    async processUnreachable() {\n        for (var i in this.data.nodes) // process nodes that have not been reached\n            if (typeof this.data.nodes[i].outputData === 'undefined') {\n                var node = this.data.nodes[i];\n\n                await this.processNode(node);\n                await this.forwardProcess(node);\n            }\n    }\n\n    async process(data: Object, startId: ?number = null, ...args) {\n        if (!this.processStart()) return;\n        if (!this.validate(data)) return;    \n        \n        this.data = this.copy(data);\n        this.args = args;\n\n        await this.processStartNode(startId);\n        await this.processUnreachable();\n        \n        return this.processDone()?'success':'aborted';\n    }\n}","import * as d3 from 'd3';\n\nexport class ViewUtils {\n\n    static getInputPosition(input) {\n        var node = input.node;\n        var el = input.el;\n\n        return [\n            node.position[0] + el.offsetLeft + el.offsetWidth / 2,\n            node.position[1] + el.offsetTop + el.offsetHeight / 2\n        ]\n    }\n\n    static getOutputPosition(output) {\n        var node = output.node;\n        var el = output.el;\n\n        return [\n            node.position[0] + el.offsetLeft + el.offsetWidth / 2,\n            node.position[1] + el.offsetTop + el.offsetHeight / 2\n        ]\n    }\n\n    static getConnectionPath(a, b, produce, pathInfo) {\n        var { points, curve } = produce(...a, ...b, pathInfo);\n\n        switch (curve) {\n        case 'linear': curve = d3.curveLinear; break;\n        case 'step': curve = d3.curveStep; break;\n        case 'basis': curve = d3.curveBasis; break;\n        default: curve = d3.curveBasis; break;\n        }\n        return this.pointsToPath(points, curve);\n    }\n\n    static pointsToPath(points, d3curve) {\n        var curve = d3curve(d3.path());\n        \n        curve.lineStart();\n        for (var i = 0; i < points.length;i++)\n            curve.point(...points[i]);\n        curve.lineEnd();\n\n        return curve._context.toString();\n    }\n}\n","// Groups\ndiv.group(al-repeat='group in editor.groups',\n  :style.transform='\"translate(\"+group.position[0]+\"px,\"+group.position[1]+\"px)\"',\n  :style.width='group.width+\"px\"',\n  :style.height='group.height+\"px\"',\n  al-group,\n  :class.selected='editor.selected.contains(group)'\n  )\n  div.group-title(al-group-title)\n    | {{group.title}}\n  div.group-handler.right.bottom(al-group-handler='rb')\n  div.group-handler.left.top(al-group-handler='lt')\n  div.group-handler.left.bottom(al-group-handler='lb')\n  div.group-handler.right.top(al-group-handler='rt')\n\n// Connections\nsvg.connections\n  path.connection(\n    al-repeat='path in editor.paths',\n    :d='path.d'\n    al-connection\n    :class.selected='path.selected'\n  )\n\n// Nodes\ndiv.node(al-repeat='node in editor.nodes',\n  :style.transform='\"translate(\"+node.position[0]+\"px,\"+node.position[1]+\"px)\"',\n  al-node,\n  :data-id=\"node.id\",\n  class=\"{{editor.selected.contains(node)?'selected':''}} {{node.title.toLowerCase().replace(' ','-')}}\"\n  )\n  div(al-html=\"editor.view.getTemplate(node)\")\n","import * as alight from 'alight';\nimport * as d3 from 'd3';\nimport { Utils, ViewUtils } from './utils/index';\nimport { Component } from './component';\nimport { ContextMenu } from './contextmenu';\nimport { Node } from './node';\nimport { NodeEditor } from './editor';\nimport { declareViewDirectives } from './directives/index';\nimport template from './templates/view.pug';\n\nconst zoomMargin = 0.9;\n\nexport class PathInfo {\n    constructor(output, input) {\n        this.connection = null;\n        this.input = input;\n        this.output = output;\n    }\n}\n\nexport class EditorView {\n\n    constructor(editor: NodeEditor, container: HTMLElement, menu: ?ContextMenu) {\n        this.editor = editor;\n        this.pickedOutput = null;\n        this.container = d3.select(container).attr('tabindex', 1);\n        this.mouse = [0, 0];\n        this.transform = d3.zoomIdentity;\n\n        this.contextMenu = menu || new ContextMenu({}, true, true);\n\n        this.initView();\n        this.initial();\n    }\n\n    initial() {\n        this.setScaleExtent(0.1, 1);\n        var size = Math.pow(2, 12);\n\n        this.setTranslateExtent(-size, -size, size, size);\n    }\n\n    initView() {\n        this.container\n            .on('click', () => {\n                if (this.container.node() === d3.event.target)\n                    this.areaClick()\n            });\n\n        this.view = this.container.append('div')\n            .style('transform-origin', '0 0')\n            .style('width', 1)\n            .style('height', 1);\n\n        this.zoom = d3.zoom()\n            .on('zoom', () => {\n                this.transform = d3.event.transform;\n                this.update();\n                this.editor.eventListener.trigger('transform', this.transform);\n            });\n\n        this.container.call(this.zoom);\n\n        d3.select(window)\n            .on('mousemove.d3ne' + this.editor._id, () => {\n                \n                var k = this.transform.k;\n                var position = d3.mouse(this.view.node());\n\n                this.mouse = [position[0]/k, position[1]/k];\n                this.update();\n            })\n            .on('keydown.d3ne' + this.editor._id, (e) => {\n                if (this.container.node() === document.activeElement)\n                    this.editor.keyDown(e);\n            })\n            .on('resize.d3ne' + this.editor._id, this.resize.bind(this));\n\n        this.view.html(template());\n        this.initAlight();\n    }\n\n    initAlight() {\n        var al = alight.makeInstance();\n\n        declareViewDirectives(this, al);\n        this.$cd = al(this.view.node(), { editor: this.editor });\n    }\n\n    getTemplate(node) {\n        var component = this.editor.components.find(c => {\n            return c.name === node.title\n        });\n\n        if (!component)\n            throw new Error(`Component not found. Make sure you have defined \n                            the component with the \"${node.title}\" name`);\n\n        return component.template;\n    }\n\n    resize() {\n        var width = this.container.node().parentElement.clientWidth;\n        var height = this.container.node().parentElement.clientHeight;\n\n        this.container\n            .style('width', width + 'px')\n            .style('height', height + 'px');\n\n        this.update();\n    }\n\n    connectionProducer(x1, y1, x2, y2) {\n        var offsetX = 0.3 * Math.abs(x1 - x2);\n        var offsetY = 0.1 * (y2 - y1);\n\n        var p1 = [x1, y1];\n        var p2 = [x1 + offsetX, y1 + offsetY];\n        var p3 = [x2 - offsetX, y2 - offsetY];\n        var p4 = [x2, y2];\n\n        return {\n            points: [p1, p2, p3, p4],\n            curve: 'basis'\n        };\n    }\n\n    updateConnections() {\n        var pathData = [];\n\n        this.editor.nodes.forEach(node => {\n            node.getConnections('output').forEach(con => {\n                let output = con.output;\n                let input = con.input;\n\n                if (input.el) {\n                    let pathInfo = new PathInfo(output, input);\n\n                    pathInfo.connection = con;\n\n                    pathData.push({\n                        connection: con,\n                        d: ViewUtils.getConnectionPath(\n                            ViewUtils.getOutputPosition(output),\n                            ViewUtils.getInputPosition(input),\n                            this.connectionProducer,\n                            pathInfo\n                        )\n                    });\n                }\n            });\n        });\n\n        if (this.pickedOutput !== null && this.pickedOutput.el) {\n            let output = this.pickedOutput;\n            let input = this.mouse;\n            let pathInfo = new PathInfo(output, input);\n\n            pathData.push({\n                selected: true,\n                d: ViewUtils.getConnectionPath(\n                    ViewUtils.getOutputPosition(output),\n                    input,\n                    this.connectionProducer,\n                    pathInfo\n                )\n            });\n        }\n\n        this.editor.paths = pathData;\n    }\n\n    update() {\n        var t = this.transform;\n        \n        this.view.style('transform', `translate(${t.x}px, ${t.y}px) scale(${t.k})`);\n        this.updateConnections();\n        this.$cd.scan();\n    }\n\n    assignContextMenuHandler() {\n        this.contextMenu.default.onClick = async (item) => {\n        \n            if (item instanceof Component) {\n                let node = item.newNode();\n\n                await item.builder(node);\n                this.editor.addNode(node, true);\n                this.editor.selectNode(node);\n            }\n            else\n                item();\n\n            this.contextMenu.hide();\n        };\n    }    \n\n    areaClick() {\n        if (this.editor.readOnly) return;\n        \n        if (this.pickedOutput !== null && !d3.event.ctrlKey)\n            this.pickedOutput = null;\n        else if (this.contextMenu.visible)\n            this.contextMenu.hide();\n        else {\n            this.assignContextMenuHandler();\n            this.contextMenu.show(d3.event.pageX, d3.event.pageY);\n        }\n        this.update();\n    }\n\n    zoomAt(nodes: Node[]) {\n        if (nodes.length === 0) return;\n\n        var [w, h] = [this.container.node().clientWidth, this.container.node().clientHeight];\n        var bbox = Utils.nodesBBox(nodes);\n        var [kw, kh] = [w / bbox.width, h / bbox.height]\n        var k = Math.min(kh, kw, 1) * zoomMargin;\n\n        var center = bbox.getCenter();\n\n        this.translate(w / 2 - center[0] * k, h / 2 - center[1] * k);\n        this.scale(k);\n    }\n\n    translate(x, y) {\n        this.transform.x = x;\n        this.transform.y = y;\n        this.update();\n    }\n\n    scale(scale) {\n        this.transform.k = scale;\n        this.update();\n    }\n\n    setScaleExtent(scaleMin: number, scaleMax: number) {\n        this.scaleExtent = [scaleMin, scaleMax];\n        this.zoom.scaleExtent(this.scaleExtent);\n    }\n\n    setTranslateExtent(left: number, top: number, right: number, bottom: number) {\n        this.translateExtent = [[left, top], [right, bottom]];\n        this.zoom.translateExtent(this.translateExtent);\n    }\n\n    destroy() {\n        d3.select(window)\n            .on('mousemove.d3ne' + this.editor._id, null)\n            .on('keydown.d3ne' + this.editor._id, null)\n            .on('resize.d3ne' + this.editor._id, null);\n    }\n}\n","export class EventListener {\n\n    constructor() {\n        this.events = {\n            nodecreate:[],\n            groupcreate: [],\n            connectioncreate: [],\n            noderemove:[],\n            groupremove:[],\n            connectionremove:[],\n            nodeselect:[],\n            groupselect: [],\n            error: [console.warn],\n            change: [],\n            transform: []\n        };\n        this.persistent = true;\n    }\n\n    on(names: string, handler: () => {}) { \n\n        names.split(' ').forEach(name => {\n            if (!this.events[name])\n                throw new Error(`The event ${name} does not exist`); \n            this.events[name].push(handler);\n        });\n        \n        return this;\n    }\n\n    trigger(name: string, param) {\n\n        if (!(name in this.events))\n            throw new Error(`The event ${name} cannot be triggered`);\n        \n        return this.events[name].reduce((r, e) => {\n            return (e(param, this.persistent) !== false) && r\n        }, true); // return false if at least one event is false        \n    }\n}","class Command {\n    constructor(exec, undo, args) {\n        this.exec = () => { exec(...args) };\n        this.undo = () => { undo(...args) };\n        this.a = args[0];\n    }\n}\n\nexport class History {\n\n    constructor(editor) {\n        this.editor = editor;\n        this.list = [];\n        this._locked = false;\n        this.position = -1;\n    }\n\n    add(exec, undo, args) {\n        if (this._locked) return;\n        \n        this.position++;\n        this.list.splice(this.position);\n        this.list.push(new Command(exec, undo, args));\n    }\n\n    undo() {\n        if (this.position < 0) return;\n\n        this._locked = true;\n        this.list[this.position--].undo();\n        this._locked = false;\n    }\n\n    redo() {\n        if (this.position + 1 >= this.list.length) return;\n        \n        this._locked = true;\n        this.list[++this.position].exec();\n        this._locked = false;\n    }\n}","import { Group } from './group';\nimport { Node } from './node';\n\nexport class Selected {\n\n    constructor() {\n        this.list = [];\n    }\n\n    add(item: Node | Group, accumulate = false) {\n        if (accumulate) {\n            if (this.contains(item))\n                this.remove(item);\n            else\n                this.list.push(item);\n        }\n        else\n            this.list = [item];    \n    }\n\n    clear() {\n        this.each(item => {\n            this.remove(item);\n        });\n    }\n\n    remove(item) {\n        this.list.splice(this.list.indexOf(item), 1);\n    }\n\n    contains(item) {\n        return this.list.indexOf(item) !== -1;\n    }\n\n    each(callback) {\n        this.list.forEach(callback);\n    }\n\n    eachNode(callback) {\n        this.list.filter(item => item instanceof Node).forEach(callback);\n    }\n\n    eachGroup(callback) {\n        this.list.filter(item => item instanceof Group).forEach(callback);\n    }\n\n    getNodes() {\n        return this.list.filter(item => item instanceof Node);\n    }\n\n    getGroups() {\n        return this.list.filter(item => item instanceof Group);\n    }\n}","import * as d3 from 'd3';\nimport { Component } from './component';\nimport { Connection } from './connection';\nimport { ContextMenu } from './contextmenu';\nimport { EditorView } from './editorview';\nimport { EventListener } from './eventlistener';\nimport { Group } from './group';\nimport { History } from './history';\nimport { Input } from './input';\nimport { Node } from './node';\nimport { Output } from './output';\nimport { Selected } from './selected';\nimport { Utils } from './utils/common';\n\nexport class NodeEditor {\n\n    constructor(id: string, container: HTMLElement, components: Component[], menu: ?ContextMenu) {\n\n        if (!Utils.isValidId(id))\n            throw new Error('ID should be valid to name@0.1.0 format');  \n        \n        this.id = id;\n        this.components = components;\n\n        this.init();\n\n        this.view = new EditorView(this, container, menu);\n        this.view.resize();\n    }\n\n    init() {\n        this._id = Math.random().toString(36).substr(2, 9);\n        this.eventListener = new EventListener();\n        this.selected = new Selected();\n        this.history = new History(this);\n        \n        this.nodes = [];\n        this.groups = [];\n        this.readOnly = false;\n    }\n\n    addNode(node: Node, mousePlaced = false) {\n        if (this.eventListener.trigger('nodecreate', node)) {\n            if (mousePlaced)\n                node.position = this.view.mouse;\n            this.nodes.push(node);\n            this.findComponent(node).created(node);\n            this.eventListener.trigger('change');\n            \n            this.history.add(this.addNode.bind(this),\n                this.removeNode.bind(this),\n                [node]);\n        }\n    }\n\n    addGroup(group: Group) {\n        if (this.eventListener.trigger('groupcreate', group)) {\n            this.groups.push(group);\n            this.eventListener.trigger('change');\n        }\n        \n        this.view.update();\n    }\n\n    removeNode(node: Node) {\n        if (node.readOnly) return;\n        var index = this.nodes.indexOf(node);\n\n        if (this.eventListener.trigger('noderemove', node)) {\n            node.getConnections().forEach(c => this.removeConnection(c));\n\n            this.nodes.splice(index, 1);\n            this.findComponent(node).destroyed(node);\n            this.eventListener.trigger('change');\n\n            this.history.add(this.removeNode.bind(this),\n                this.addNode.bind(this),\n                [node]);\n        }\n\n        this.view.update();\n    }\n\n    removeGroup(group: Group) {\n        if (this.eventListener.trigger('groupremove', group)) {\n            group.remove();\n            this.groups.splice(this.groups.indexOf(group), 1);\n            this.eventListener.trigger('change');\n        }    \n\n        this.view.update(); \n    }\n\n    connect(output: Output | Connection, input: ?Input) {\n        if (output instanceof Connection) {\n            input = output.input;\n            output = output.output;\n        }\n\n        if (this.eventListener.trigger('connectioncreate', { output, input })) {\n            try {\n                var connection = output.connectTo(input);\n\n                this.eventListener.trigger('change');\n                this.history.add(this.connect.bind(this),\n                    this.removeConnection.bind(this),\n                    [connection]);\n            } catch (e) {\n                this.eventListener.trigger('error', e);\n            }\n        }\n        this.view.update(); \n    }\n\n    removeConnection(connection: Connection) {\n        if (this.eventListener.trigger('connectionremove', connection)) {\n            connection.remove();\n            this.eventListener.trigger('change');\n\n            this.history.add(this.removeConnection.bind(this),\n                this.connect.bind(this),\n                [connection]);\n        }\n        this.view.update(); \n    }\n\n    selectNode(node: Node, accumulate: boolean = false) {\n        if (this.nodes.indexOf(node) === -1)\n            throw new Error('Node not exist in list');\n        \n        if (this.eventListener.trigger('nodeselect', node))\n            this.selected.add(node, accumulate);\n        \n        this.view.update();\n    }\n\n    selectGroup(group: Group, accumulate: boolean = false) {\n        if (this.groups.indexOf(group) === -1)\n            throw new Error('Group not exist in list');\n        \n        if (this.eventListener.trigger('groupselect', group))\n            this.selected.add(group, accumulate);\n        \n        this.view.update();\n    }\n    \n    keyDown() {\n        if (this.readOnly) return;\n\n        switch (d3.event.keyCode) {\n        case 46:\n            this.selected.eachNode(this.removeNode.bind(this));\n            this.selected.eachGroup(this.removeGroup.bind(this));\n            this.view.update();\n            break;\n        case 71:\n            let nodes = this.selected.getNodes();\n                \n            if (nodes.length > 0)\n                this.addGroup(new Group('Group', { nodes }));\n            \n            break;\n        case 90:\n            if (d3.event.ctrlKey && d3.event.shiftKey)\n                this.history.redo();\n            else\n            if (d3.event.ctrlKey)\n                this.history.undo();\n                \n            break;\n        default: break;\n            \n        }\n    }\n\n    findComponent(node) {\n        const component = this.components.find(c => {\n            return c.name === node.title\n        });\n\n        if (!component) throw `Component ${node.title} was not found`;\n\n        return component;\n    }\n\n    clear() {\n        this.nodes.splice(0, this.nodes.length);\n        this.groups.splice(0, this.groups.length);\n    }\n\n    toJSON() {\n        var nodes = {};\n        var groups = {};\n\n        this.nodes.forEach(node => nodes[node.id] = node.toJSON());\n        this.groups.forEach(group => groups[group.id] = group.toJSON());\n\n        return {\n            'id': this.id,\n            'nodes': nodes,\n            'groups': groups\n        };\n    }\n\n    beforeImport(json: Object) {\n        var checking = Utils.validate(this.id, json);\n        \n        if (!checking.success) {\n            this.eventListener.trigger('error', checking.msg);\n            return false;\n        }\n        \n        this.eventListener.persistent = false;\n        this.clear();\n        return true;\n    }\n\n    afterImport() {\n        this.view.update();\n        this.eventListener.persistent = true;\n        return true;\n    }\n\n    async fromJSON(json: Object) {\n        if (!this.beforeImport(json)) return false;\n        var nodes = {};\n\n        try {\n            await Promise.all(Object.keys(json.nodes).map(async id => {\n                var node = json.nodes[id];\n                var component = this.findComponent(node);\n\n                nodes[id] = await Node.fromJSON(component, node);\n                this.addNode(nodes[id]);\n            }));\n        \n            Object.keys(json.nodes).forEach(id => {\n                var jsonNode = json.nodes[id];\n                var node = nodes[id];\n                \n                jsonNode.outputs.forEach((outputJson, i) => {\n                    outputJson.connections.forEach(jsonConnection => {\n                        var nodeId = jsonConnection.node;\n                        var inputIndex = jsonConnection.input;\n                        var targetInput = nodes[nodeId].inputs[inputIndex];\n\n                        this.connect(node.outputs[i], targetInput);\n                    });\n                });\n\n            });\n\n            if (typeof json.groups === 'object')\n                Object.keys(json.groups).forEach(id => {\n                    var group = Group.fromJSON(json.groups[id]);\n\n                    json.groups[id].nodes.forEach(nodeId => {\n                        var node = nodes[nodeId];\n\n                        group.addNode(node);\n                    })\n                    this.addGroup(group);\n                });\n        }\n        catch (e) {\n            this.eventListener.trigger('error', e);\n            return false;\n        }\n        return this.afterImport();\n    }\n}\n","export class Task {\n\n    constructor(inputs, action) {\n        this.inputs = inputs;\n        this.action = action;\n        this.next = [];\n        this.outputData = null;\n        this.closed = [];\n\n        this.getOptions().forEach(input => {\n            input.forEach(con => {\n                con.task.next.push({index: con.index, task: this});\n            })\n        });\n    }\n\n    getOptions() {\n        return this.inputs.filter(input => input[0] && input[0].task)\n    }\n\n    getOutputs() {\n        return this.inputs.filter(input => input[0] && input[0].get);\n    }\n\n    reset() {\n        this.outputData = null;\n    }\n\n    async run(data, needReset = true, garbage = []) {\n        garbage.push(this);\n\n        var inputs = await Promise.all(this.getOutputs().map(async input => {\n            return await Promise.all(input.map(async con => {\n                if (con) {\n                    await con.run(data, false, garbage);\n                    return con.get();\n                }\n            }));\n        }));\n\n        if (!this.outputData) {\n            this.outputData = await this.action(inputs, data);\n\n            await Promise.all(\n                this.next\n                    .filter(f => !this.closed.includes(f.index))\n                    .map(async f => \n                        await f.task.run(data, false, garbage)\n                    )\n            );\n        }\n        \n        if (needReset)\n            garbage.map(t => t.reset());\n    }\n\n    option(index) {\n        var task = this;\n\n        return {task, index}\n    }\n\n    output(index) {\n        var task = this;\n\n        return {\n            run: task.run.bind(task),\n            get() {\n                return task.outputData[index];\n            }\n        }\n    }\n}"],"names":["Module","data","titlesInput","titlesOutput","inputs","extractNodes","outputs","keys","map","n","name","input","forEach","key","i","output","k","titles","Object","nodes","filter","includes","title","sort","n1","n2","position","ModuleManager","engine","node","module","clone","read","process","m","write","ComponentWorker","props","worker","Block","Class","constructor","TypeError","id","incrementId","width","height","style","latestId","Control","html","handler","parent","Error","Node","getNode","Connection","addConnection","removeConnection","IO","socket","multiConns","el","multipleConnections","connections","connection","splice","indexOf","Socket","hint","compatible","push","Input","control","length","hasConnection","c","Output","compatibleWith","some","item","group","controls","readOnly","index","type","conns","showControl","toJSON","component","json","Component","newNode","Math","max","builder","defaultTemplate","template","created","destroyed","Group","scope","expression","env","changeDetector","locals","setPosition","dx","dy","extent","editor","view","translateExtent","minx","miny","maxx","maxy","min","watch","assign","deep","call","d3","on","sourceEvent","shiftKey","selectGroup","ctrlKey","transform","selected","each","eachGroup","contains","update","eventListener","trigger","items","removeGroup","onClick","subitem","contextMenu","hide","x","clientX","y","clientY","show","preventDefault","GroupHandler","arg","mousePrev","updateGroup","mouse","deltaw","deltah","deltax","deltay","match","setWidth","setHeight","container","zoom","minWidth","minHeight","isCoverNode","addNode","removeNode","GroupTitle","prompt","scan","PickInput","interceptInput","pickedOutput","prepareConnection","connectedTo","find","connect","prevent","stopPropagation","PickOutput","setAttributes","dataset","inputNode","inputIndex","outputNode","outputIndex","className","baseVal","toLowerCase","replace","path","innerHTML","children","Item","l","haveSubitems","classed","Utils","arr","left","top","right","bottom","abs","isValidId","Array","groups","test","msg","id1","split","id2","isValidData","success","params","setMinSizes","coverNodes","w","h","gp","np","self","margin","bbox","nodesBBox","containNode","a","raise","selectNode","_node","eachNode","contain","cover","addEventListener","offsetWidth","offsetHeight","addGroup","declareViewDirectives","alight","directives","al","bind","groupHandler","groupTitle","pickInput","pickOutput","declareMenuDirectives","menu","ContextMenu","searchBar","disabled","visible","default","bindTemplate","t","dom","append","setAttribute","alightInstance","$cd","regex","RegExp","subitems","sumitem","p","v","parseInt","eqArr","ar1","ar2","every","eqObj","o1","o2","JSON","stringify","eqCon","c1","c2","target","diffCons","cons1","cons2","removed","added","Diff","data1","data2","b","k1","k2","stayed","basicDiffs","moved","p1","p2","datachanged","d1","d2","connects","reduce","out","diff","o","State","AVALIABLE","PROCESSED","ABORT","Engine","components","args","state","onAbort","onError","message","error","abort","processDone","inp","nodesArr","findSelf","inputNodes","extractInputNodes","r","warn","Promise","ret","unlockPool","busy","outputData","res","all","processNode","prevNode","connData","extractInputData","inputData","lock","processWorker","unlock","nextNode","forwardProcess","validate","checking","throwError","detectRecursions","recurentNodes","startNode","startId","processStart","copy","processStartNode","processUnreachable","ViewUtils","offsetLeft","offsetTop","produce","pathInfo","points","curve","pointsToPath","d3curve","lineStart","point","lineEnd","_context","toString","zoomMargin","PathInfo","EditorView","NodeEditor","HTMLElement","attr","initView","initial","setScaleExtent","size","pow","setTranslateExtent","areaClick","window","_id","e","document","activeElement","keyDown","resize","initAlight","parentElement","clientWidth","clientHeight","x1","y1","x2","y2","offsetX","offsetY","p3","p4","pathData","getConnections","con","getConnectionPath","getOutputPosition","getInputPosition","connectionProducer","paths","updateConnections","assignContextMenuHandler","pageX","pageY","kw","kh","center","getCenter","translate","scale","scaleMin","scaleMax","scaleExtent","EventListener","events","console","persistent","names","param","Command","exec","undo","History","list","_locked","Selected","accumulate","remove","callback","init","random","substr","history","mousePlaced","findComponent","add","connectTo","keyCode","getNodes","redo","clear","beforeImport","fromJSON","jsonNode","outputJson","nodeId","jsonConnection","targetInput","babelHelpers.typeof","afterImport","Task","action","next","closed","getOptions","task","get","needReset","garbage","getOutputs","run","f","reset"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"d3-node-editor.js","sources":["../src/extras/module.js","../src/component-worker.js","../src/block.js","../src/control.js","../src/connection.js","../src/io.js","../src/socket.js","../src/input.js","../src/output.js","../src/node.js","../src/templates/node.pug","../src/component.js","../src/directives/group.js","../src/directives/io.js","../src/directives/connection.js","../src/directives/control.js","../src/directives/contextmenu.js","../src/utils/common.js","../src/group.js","../src/directives/node.js","../src/directives/index.js","../src/templates/menu.pug","../src/contextmenu.js","../src/extras/diff.js","../src/engine.js","../src/utils/view.js","../src/templates/view.pug","../src/editorview.js","../src/eventlistener.js","../src/history.js","../src/selected.js","../src/editor.js","../src/extras/task.js"],"sourcesContent":["export class Module {\n    \n    constructor(data, titlesInput, titlesOutput) {\n        var inputs = Module.extractNodes(data, titlesInput);\n        var outputs = Module.extractNodes(data, titlesOutput);\n    \n        this.inputs = [];\n        this.outputs = [];\n        this.keys = {\n            input: inputs.map(n => n.data.name),\n            output: outputs.map(n => n.data.name)\n        };\n    }\n    \n    static extractNodes(data, titles) {\n        return Object.keys(data.nodes)\n            .filter(k => titles.includes(data.nodes[k].title))\n            .map(k => data.nodes[k])\n            .sort((n1, n2) => n1.position[1] > n2.position[1]);\n    }\n    \n    read(inputs) {\n        this.keys.input.forEach((key, i) => {\n            this.inputs[key] = inputs[i];\n        });\n    }\n    \n    write(outputs) {\n        this.keys.output.forEach((k, i) => {\n            outputs[i] = this.outputs[k];\n        });\n    }\n}\n    \nexport class ModuleManager {\n    constructor(titlesInput, titlesOutput) {\n        this.engine = null;\n        this.titlesInput = titlesInput;\n        this.titlesOutput = titlesOutput;\n    }\n    \n    getInputs(data) {\n        return Module.extractNodes(data, this.titlesInput)\n            .map(n => ({ title: n.title, name: n.data.name }));\n    }\n    \n    getOutputs(data) {\n        return Module\n            .extractNodes(data, this.titlesOutput)\n            .map(n => {\n                return {title: n.title, name: n.data.name};\n            });\n    }\n    \n    async workerModule(node, inputs, outputs) {\n        var data = node.data.module.data;\n        var m = new Module(data, this.titlesInput, this.titlesOutput);\n        var engine = this.engine.clone();\n            \n        m.read(inputs);\n        await engine.process(data, null, m);\n        m.write(outputs);\n    }\n    \n    workerInputs(node, inputs, outputs, module) {\n        if (module) \n            outputs[0] = module.inputs[node.data.name][0];\n    }\n        \n    workerOutputs(node, inputs, outputs, module) {\n        if (module) \n            module.outputs[node.data.name] = inputs[0][0];\n    }\n        \n    setEngine(engine) {\n        this.engine = engine;\n    }\n}","export class ComponentWorker {\n    constructor(name, props) {\n        this.name = name;\n        this.worker = props.worker;\n    }\n}","export class Block {\n\n    constructor(Class) {\n        if (this.constructor === Block)\n            throw new TypeError('Cannot construct Block instances')\n        \n        this.id = Block.incrementId(Class);\n        this.position = [0.0, 0.0];\n        this.width = 0;\n        this.height = 0;\n        this.style = {};\n    }\n\n    static incrementId(Class) {\n        if (!Class.latestId)\n            Class.latestId = 1\n        else\n            Class.latestId++\n        return Class.latestId\n    }\n}","import { Node } from './node';\n\nexport class Control {\n\n    constructor(html: string, handler = () => { }) {\n        this.html = html;\n        this.parent = null;\n        this.handler = handler;\n    }\n\n    getNode() {\n        if (this.parent === null)\n            throw new Error(\"Control isn't added to Node/Input\");   \n        \n        return this.parent instanceof Node ? this.parent : this.parent.node;\n    }\n\n    getData(key) {\n        return this.getNode().data[key];\n    }\n\n    putData(key, data) {\n        this.getNode().data[key] = data;\n    }  \n}","export class Connection {\n\n    constructor(output, input) {\n        this.output = output;\n        this.input = input;\n        this.style = {};\n\n        this.input.addConnection(this);\n    }\n\n    remove() {\n        this.input.removeConnection(this);\n        this.output.removeConnection(this);\n    }\n}","import { Connection } from './connection';\n\nexport class IO {\n\n    constructor(title, socket, multiConns) {\n        this.el = null;\n\t    this.node = null;\n        this.multipleConnections = multiConns;\n        this.connections = [];\n\t   \n        this.title = title;\n        this.socket = socket;\n    }\n    \n    removeConnection(connection: Connection) {\n        this.connections.splice(this.connections.indexOf(connection), 1);\n    }\n}","export class Socket {\n\n    constructor(id: string, name: string, hint: string) {\n        this.id = id;\n        this.name = name;\n        this.hint = hint;\n        this.compatible = [];\n    }\n\n    combineWith(socket: Socket) {\n        this.compatible.push(socket);\n    }\n\n    compatibleWith(socket: Socket) {\n        return this === socket || this.compatible.includes(socket);\n    }\n}","import { Connection } from './connection';\nimport { Control } from './control';\nimport { IO } from './io';\nimport { Socket } from './socket';\n\nexport class Input extends IO {\n   \n    constructor(title: string, socket: Socket, multiConns: boolean = false) {\n        super(title, socket, multiConns);\n        this.control = null;\n    }\n\n    hasConnection() {\n        return this.connections.length > 0;\n    }\n\n    addConnection(connection: Connection) {\n        if (!this.multipleConnections && this.hasConnection())\n            throw new Error('Multiple connections not allowed');\n        this.connections.push(connection);\n    }\n\n    addControl(control: Control) {\n        this.control = control;\n        control.parent = this;\n    }\n\n    showControl() {\n        return !this.hasConnection() && this.control !== null;\n    }\n\n    toJSON() {\n        return {\n            'connections': this.connections.map(c => {\n                return {\n                    node: c.output.node.id,\n                    output: c.output.node.outputs.indexOf(c.output)\n                };\n            })\n        };\n    }\n}","import { Connection } from './connection';\nimport { IO } from './io';\nimport { Input } from './input';\nimport { Socket } from './socket';\n\nexport class Output extends IO {\n  \n    constructor(title: string, socket: Socket, multiConns: boolean = true) {\n        super(title, socket, multiConns);\n    }\n    \n    hasConnection() {\n        return this.connections.length > 0;\n    }\n\n    connectTo(input: Input) {\n        if (!this.socket.compatibleWith(input.socket))\n            throw new Error('Sockets not compatible');\n        if (!input.multipleConnections && input.hasConnection())\n            throw new Error('Input already has one connection');\n        if (!this.multipleConnections && this.hasConnection())\n            throw new Error('Output already has one connection');\n\n        var connection = new Connection(this, input);\n\n        this.connections.push(connection);\n        return connection;\n    }\n\n    connectedTo(input: Input) {\n        return this.connections.some((item) => {\n            return item.input === input;\n        });\n    }\n\n    toJSON() {\n        return {\n            'connections': this.connections.map(c => {\n                return {\n                    node: c.input.node.id,\n                    input: c.input.node.inputs.indexOf(c.input)\n                }\n            })\n        };\n    }\n}","import { Block } from './block';\nimport { Component } from './component';\nimport { Control } from './control';\nimport { Input } from './input';\nimport { Output } from './output';\n\nexport class Node extends Block {\n   \n    constructor(title: string) {\n        super(Node);\n        this.el = null;\n        this.group = null;\n        this.inputs = [];\n        this.outputs = [];\n        this.controls = [];\n        this.data = {};\n        this.readOnly = false;\n\n        this.title = title;\n        [this.width, this.height] = [180, 100];\n    }\n\n    addControl(control: Control, index: ?uint8 = null) {\n        control.parent = this;\n\n        if (index !== null)\n            this.controls.splice(index, 0, control);\n        else\n            this.controls.push(control);        \n        \n        return this;\n    }\n\n    addInput(input: Input, index: ?uint8 = null) {\n        if (input.node !== null)\n            throw new Error('Input has already been added to the node');\n\n        input.node = this;\n\n        if (index !== null)\n            this.inputs.splice(index, 0, input);\n        else\n            this.inputs.push(input);\n        \n        return this;\n    }\n\n    addOutput(output: Output, index: ?uint8 = null) {\n        if (output.node !== null)\n            throw new Error('Output has already been added to the node');\n        \n        output.node = this;\n\n        if (index !== null)\n            this.outputs.splice(index, 0, output);\n        else\n            this.outputs.push(output);\n\n        return this;\n    }\n\n    getConnections(type) {\n        var conns = [];\n\n        if (type==='input' || !type)\n            this.inputs.map(input => {\n                input.connections.forEach(c => {\n                    conns.push(c);\n                });\n            });\n        \n        if (type==='output' || !type)\n            this.outputs.forEach(output => {\n                output.connections.forEach(c => {\n                    conns.push(c);\n                });\n            });\n        return conns;\n    }\n\n    inputsWithVisibleControl() {\n        return this.inputs.filter((input)=> {\n            return input.showControl();\n        });\n    }\n\n    toJSON() {\n        return {\n            'id': this.id,\n            'data': this.data,\n            'group': this.group ? this.group.id : null,\n            'inputs': this.inputs.map(input => input.toJSON()),\n            'outputs': this.outputs.map(output => output.toJSON()),\n            'position': this.position,\n            'title': this.title\n        }\n    }\n\n    static async fromJSON(component: Component, json: Object) {\n        var node = component.newNode();\n\n        node.id = json.id;\n        node.data = json.data;\n        Node.latestId = Math.max(node.id, Node.latestId);\n        node.position = json.position;\n        node.title = json.title;\n\n        await component.builder(node);\n\n        return node;\n    }\n}\n","div.title\n  | {{node.title}}\n\n// Outputs\ndiv(al-repeat='output in node.outputs',style=\"text-align: right\")\n  .output-title\n    | {{output.title}}\n  .socket.output(\n    al-pick-output, \n    class=\"{{output.socket.id.toLowerCase().replaceAll(' ','-')}}\",\n    title='{{output.socket.name}}\\n{{output.socket.hint}}'\n  )\n\n// Controls\ndiv.control(\n  al-repeat='control in node.controls', \n  style=\"text-align: center\",\n  :width='control.parent.width - 2 * control.margin', \n  :height='control.height', \n  al-control='control'\n)\n\n// Inputs\ndiv(al-repeat='input in node.inputs',style=\"text-align: left\")\n  .socket.input(\n    al-pick-input,\n    class=\"{{input.socket.id.toLowerCase().replaceAll(' ','-')}} {{input.multipleConnections?'multiple':''}}\"\n    title='{{input.socket.name}}\\n{{input.socket.hint}}'\n  )\n  .input-title(\n    al-if='!input.showControl()'\n  )\n    | {{input.title}}\n  .input-control(\n    al-if='input.showControl()'\n    al-control='input.control'\n  )","import { ComponentWorker } from './component-worker';\nimport { Node } from './node';\nimport template from './templates/node.pug';\n\nvar defaultTemplate = template();\n\nexport class Component extends ComponentWorker {\n    constructor(name, props) {\n        super(name, props);\n        this.template = props.template || defaultTemplate;\n        this.builder = props.builder;\n        this.created = props.created || function () { }\n        this.destroyed = props.destroyed || function () { }\n    }\n\n    newNode() {\n        return new Node(this.name);\n    }\n}","import * as d3 from 'd3';\n\nexport function Group(scope, el, expression, env) {\n    var group = env.changeDetector.locals.group;\n    \n    function setPosition(item, dx, dy) {\n        const extent = this.editor.view.translateExtent;\n        const minx = extent[0][0];\n        const miny = extent[0][1];\n        const maxx = extent[1][0];\n        const maxy = extent[1][1];\n\n        item.position[0] = Math.min(maxx, Math.max(minx, item.position[0] + dx));\n        item.position[1] = Math.min(maxy, Math.max(miny, item.position[1] + dy));\n    }\n\n    group.el = el;\n    env.watch('group.style', () => {\n        Object.assign(el.style, group.style);\n    }, { deep: true });\n\n    d3.select(el).call(\n        d3.drag().on('start', () => {\n            if (!d3.event.sourceEvent.shiftKey)\n                this.editor.selectGroup(group, d3.event.sourceEvent.ctrlKey);\n        }).on('drag', () => {\n            if (this.editor.readOnly) return;\n\n            var k = this.transform.k;\n            var dx = d3.event.dx / k;\n            var dy = d3.event.dy / k;\n\n            this.editor.selected.each(item => {\n                setPosition.call(this, item, dx, dy);\n            });\n\n            this.editor.selected.eachGroup(item => {\n                for (var i in item.nodes) {\n                    let node = item.nodes[i];\n\n                    if (this.editor.selected.contains(node))\n                        continue;    \n\n                    setPosition.call(this, node, dx, dy);\n                }\n            });\n\n            this.update();\n        }).on('end', () => {\n            this.editor.eventListener.trigger('change');\n        })\n    );\n\n    var items = {\n        'Remove group': () => {\n            this.editor.removeGroup(group);\n        }\n    };\n\n    var onClick = (subitem) => {\n        subitem.call(this);\n        this.contextMenu.hide();\n    }\n\n    d3.select(el).on('contextmenu', () => {\n        if (this.editor.readOnly) return;\n        \n        var x = d3.event.clientX;\n        var y = d3.event.clientY;\n\n        this.editor.selectGroup(group);\n        this.contextMenu.show(x, y, items, false, onClick);\n        d3.event.preventDefault();\n    });\n}\n\nexport function GroupHandler(scope, el, arg, env) {\n    var group = env.changeDetector.locals.group;\n    var mousePrev = null;\n\n    function updateGroup(mouse, deltaw, deltah, deltax, deltay) {\n        if (deltaw !== 0)\n            mousePrev[0] = mouse[0];\n        if (deltah !== 0)\n            mousePrev[1] = mouse[1];\n        \n        if (arg.match('l')) {\n            group.position[0] += Math.min(deltaw, deltax);\n            group.setWidth(group.width - deltax);\n        }\n        else if (arg.match('r'))\n            group.setWidth(group.width + deltax);\n\n        if (arg.match('t')) {\n            group.position[1] += Math.min(deltah, deltay);\n            group.setHeight(group.height - deltay);\n        }\n        else if (arg.match('b'))\n            group.setHeight(group.height + deltay);\n    }\n\n    d3.select(el).call(d3.drag().on('start', () => {\n        mousePrev = d3.mouse(this.container.node());\n        this.editor.selectGroup(group);\n    }).on('drag', () => {\n        if (this.editor.readOnly) return;\n\n        var zoom = d3.zoomTransform(this.container);\n        var mouse = d3.mouse(this.container.node());\n        var deltax = (mouse[0] - mousePrev[0]) / zoom.k;\n        var deltay = (mouse[1] - mousePrev[1]) / zoom.k;\n        var deltaw = Math.max(0, group.width - group.minWidth);\n        var deltah = Math.max(0, group.height - group.minHeight);\n\n        updateGroup(mouse, deltaw, deltah, deltax, deltay);\n\n        this.update();\n    }).on('end', () => {\n        this.editor.nodes.forEach(node => {\n            if (group.isCoverNode(node))\n                group.addNode(node);\n            else\n                group.removeNode(node);\n        });\n\n        this.editor.eventListener.trigger('change');\n        this.update();\n    }))\n}\n\nexport function GroupTitle(scope, el, expression, env) {\n    var group = env.changeDetector.locals.group;\n\n    d3.select(el).on('click', () => {\n        var title = prompt('Please enter title of the group', group.title);\n\n        if (title !== null && title.length > 0)\n            group.title = title;\n        env.scan();\n    });\n}","import * as d3 from 'd3';\n\nexport function PickInput(scope, el, expression, env) {\n    var input = env.changeDetector.locals.input;\n\n    function interceptInput() {\n        if (this.pickedOutput === null) {\n            if (input.hasConnection()) {\n                this.pickedOutput = input.connections[0].output;\n                this.editor.removeConnection(input.connections[0]);\n            }\n            this.update();\n            return true;\n        }\n    }\n\n    function prepareConnection() {\n        if (!input.multipleConnections && input.hasConnection())\n            this.editor.removeConnection(input.connections[0]);\n        \n        if (!this.pickedOutput.multipleConnections && this.pickedOutput.hasConnection())\n            this.editor.removeConnection(this.pickedOutput.connections[0]);\n        \n        if (this.pickedOutput.connectedTo(input)) {\n            var connection = input.connections.find(c => c.output === this.pickedOutput);\n\n            this.editor.removeConnection(connection);\n        }\n\n        this.editor.connect(this.pickedOutput, input);\n    }\n\n    input.el = el;\n\n    let prevent = false;\n\n    d3.select(el).on('mouseleave', () => prevent = false);\n    d3.select(el).on('mousedown mouseup', () => {\n        if (this.editor.readOnly || prevent) return;\n        d3.event.preventDefault();\n        d3.event.stopPropagation();\n        \n        if (interceptInput.call(this)) return;\n        prepareConnection.call(this);\n\n        this.pickedOutput = null;\n    \n        this.update();\n    });\n    d3.select(el).on('mousedown.prevent', () => prevent = true);\n}\n\nexport function PickOutput(scope, el, expression, env) {\n    var output = env.changeDetector.locals.output;\n\n    output.el = el;\n\n    d3.select(el).on('mousedown', () => {\n        if (this.editor.readOnly) return;\n        d3.event.stopPropagation();\n\n        this.pickedOutput = output;\n    });\n}","function setAttributes(el, input, output) {\n    el.dataset.inputNode = input.node.id;\n    el.dataset.inputIndex = input.node.inputs.indexOf(input);\n    el.dataset.outputNode = output.node.id;\n    el.dataset.outputIndex = output.node.outputs.indexOf(output);\n    el.className.baseVal += ' output-'+output.socket.id.toLowerCase().replaceAll(' ', '-');\n    el.className.baseVal += ' input-'+input.socket.id.toLowerCase().replaceAll(' ', '-');\n}\n\nexport function Connection(scope, el, expression, env) {\n    var path = env.changeDetector.locals.path;\n    var connection = path.connection;\n\n    if (!connection) return;\n    \n    connection.el = el;\n    env.watch('path.connection.style', () => {\n        Object.assign(el.style, connection.style);\n    }, { deep: true });\n    \n    var input = path.connection.input;\n    var output = path.connection.output;\n\n    setAttributes(el, input, output);\n}","export function Control(scope, el, expression, env) {\n    var locals = env.changeDetector.locals;\n    var control = locals.input ? locals.input.control:locals.control;\n\n    el.innerHTML = control.html;\n    control.handler(el.children[0], control);\n}","import * as d3 from 'd3';\n\nexport function Item(scope, el, expression, env) {\n    var l = env.changeDetector.locals;\n    var item = l.subitem || l.item;\n    var haveSubitems = item.constructor === Object;\n\n    d3.select(el)\n        .on('click', () => {\n            if (!haveSubitems)\n                this.onClick(item);\n            d3.event.stopPropagation();\n        })\n        .classed('have-subitems', haveSubitems);\n}","export class Utils {\n\n    static nodesBBox(nodes) {\n        var min = (arr) => Math.min(...arr);\n        var max = (arr) => Math.max(...arr);\n\n        var left = min(nodes.map(node => node.position[0]));\n        var top = min(nodes.map(node => node.position[1]));\n        var right = max(nodes.map(node => node.position[0] + node.width));\n        var bottom = max(nodes.map(node => node.position[1] + node.height));\n        \n        return {\n            left,\n            right,\n            top,\n            bottom,\n            width: Math.abs(left - right),\n            height:  Math.abs(top - bottom),\n            getCenter: () => {\n                return [\n                    (left + right) / 2,\n                    (top + bottom) / 2\n                ];\n            }\n        };\n    }\n\n    static isValidData(data) {\n        return typeof data.id === 'string' &&\n            this.isValidId(data.id) &&\n            data.nodes instanceof Object && !(data.nodes instanceof Array) && \n            (!data.groups || data.groups instanceof Object)\n    }\n\n    static isValidId(id) {\n        return /^[\\w-]{3,}@[0-9]+\\.[0-9]+\\.[0-9]+$/.test(id);\n    }\n\n    static validate(id, data) {\n        var msg = '';\n        var id1 = id.split('@');\n        var id2 = data.id.split('@');\n\n        if (!this.isValidData(data))\n            msg += 'Data is not suitable. '; \n        if (id !== data.id)\n            msg += 'IDs not equal. ';\n        if (id1[0] !== id2[0])\n            msg += 'Names don\\'t match. ';\n        if (id1[1] !== id2[1])\n            msg += 'Versions don\\'t match';\n\n        return { success: msg ==='', msg };\n    }\n}","import { Block } from './block';\nimport { Node } from './node';\nimport { Utils } from './utils/common';\n\nexport class Group extends Block {\n\n    constructor(title: string, params: Object) {\n        super(Group);\n        this.title = title;\n\n        this.nodes = [];\n        this.setMinSizes(300, 250);\n\n        if (params.nodes)\n            this.coverNodes(params.nodes);\n        else {\n            this.position = params.position;\n            this.width = params.width;\n            this.height = params.height;\n        }\n    }\n\n    setMinSizes(width, height) {\n        this.minWidth = width;\n        this.minHeight = height;\n    }\n\n    setWidth(w: number) {\n        return this.width = Math.max(this.minWidth, w);\n    }\n\n    setHeight(h: number) {\n        return this.height = Math.max(this.minHeight, h);\n    }\n\n    isCoverNode(node: Node) {\n        var gp = this.position;\n        var np = node.position;\n\n        return np[0] > gp[0] && np[1] > gp[1]\n            && np[0] + node.width < gp[0] + this.width\n            && np[1] + node.height < gp[1] + this.height;\n    }\n\n    coverNodes(nodes: Node[]) {\n        var self = this;\n        var margin = 30;\n        var bbox = Utils.nodesBBox(nodes);\n\n        nodes.forEach(node => {\n            if (!node.readOnly) {\n                if (node.group !== null) node.group.removeNode(node.group);\n                self.addNode(node);\n            }\n        });\n        this.position = [bbox.left - margin, bbox.top - 2 * margin];\n        this.setWidth(bbox.right - bbox.left + 2 * margin);\n        this.setHeight(bbox.bottom - bbox.top + 3 * margin);\n    }\n\n    containNode(node: Node) {\n        return this.nodes.indexOf(node) !== -1;\n    }\n\n    addNode(node: Node) {\n        if (this.containNode(node)) return false;\n        if (node.group !== null) node.group.removeNode(node);\n        node.group = this;\n        this.nodes.push(node);\n        return true;\n    }\n\n    removeNode(node: Node) {\n        if (!this.containNode(node)) return;\n        this.nodes.splice(this.nodes.indexOf(node), 1);\n        node.group = null;\n    }\n\n    remove() {\n        this.nodes.forEach(node => {\n            node.group = null;\n        })\n    }\n\n    toJSON() {\n        return {\n            'id': this.id,\n            'title': this.title,\n            'nodes': this.nodes.map(a => a.id),\n            'minWidth': this.minWidth,\n            'minHeight': this.minHeight,\n            'position': this.position,\n            'width': this.width,\n            'height': this.height\n        }\n    }\n\n    static fromJSON(json: Object) {\n        var group = new Group(json.title, {\n            position: json.position,\n            width: json.width,\n            height: json.height\n        });\n\n        group.id = json.id;\n        Group.latestId = Math.max(group.id, Group.latestId);\n        group.minWidth = json.minWidth;\n        group.minHeight = json.minHeight;\n        return group;\n    }\n}\n","import * as d3 from 'd3';\nimport { Group } from '../group';\n\nexport function Node(scope, el, expression, env) {\n    var node = env.changeDetector.locals.node;\n\n    function setPosition(item, dx, dy) {\n        const extent = this.editor.view.translateExtent;\n        const minx = extent[0][0];\n        const miny = extent[0][1];\n        const maxx = extent[1][0];\n        const maxy = extent[1][1];\n\n        item.position[0] = Math.min(maxx, Math.max(minx, item.position[0] + dx));\n        item.position[1] = Math.min(maxy, Math.max(miny, item.position[1] + dy));\n    }\n        \n    node.el = el;\n    env.watch('node.style', () => {\n        Object.assign(el.style, node.style);\n    }, { deep: true });\n\n    d3.select(el).call(\n        d3.drag().on('start', () => {\n            d3.select(el).raise();\n            if (!d3.event.sourceEvent.shiftKey)\n                this.editor.selectNode(node, d3.event.sourceEvent.ctrlKey);\n        }).on('drag', () => {\n            if (this.editor.readOnly || node.readOnly) return;\n\n            var k = this.transform.k;\n            var dx = d3.event.dx / k;\n            var dy = d3.event.dy / k;\n\n            this.editor.selected.each(item => {\n                setPosition.call(this, item, dx, dy);\n            });\n\n            this.editor.selected.eachGroup(item => {\n                for (var i in item.nodes) {\n                    let _node = item.nodes[i];\n\n                    if (this.editor.selected.contains(_node))\n                        continue;    \n\n                    setPosition.call(this, _node, dx, dy);\n                }\n            });\n            \n            this.update();\n        }).on('end', () => {\n            this.editor.groups.forEach(group => {\n                this.editor.selected.eachNode(_node => {\n                    var contain = group.containNode(_node);\n                    var cover = group.isCoverNode(_node);\n\n                    if (contain && !cover)\n                        group.removeNode(_node);\n                    else if (!contain && cover)\n                        group.addNode(_node);\n                });\n            });\n\n            this.editor.eventListener.trigger('change');\n            this.update();\n        })\n    );\n\n    window.addEventListener('load', () => {\n        node.width = el.offsetWidth;\n        node.height = el.offsetHeight;\n    });\n\n    var items = {\n        'Remove node': () => {\n            this.editor.removeNode(node);\n        },\n        'Add to group': () => {\n            var group = new Group('Group', {nodes:[node]});\n\n            this.editor.addGroup(group);\n        }\n    };\n\n    var onClick = (subitem) => {\n        subitem.call(this);\n        this.contextMenu.hide();\n    }\n\n    d3.select(el).on('contextmenu', () => {\n        if (this.editor.readOnly || node.readOnly) return;\n\n        var x = d3.event.clientX;\n        var y = d3.event.clientY;\n\n        this.editor.selectNode(node);\n        this.contextMenu.show(x, y, items, false, onClick);\n        d3.event.preventDefault();\n    });\n}\n","import { Group, GroupHandler, GroupTitle } from './group';\nimport { PickInput, PickOutput } from './io';\nimport { Connection } from './connection';\nimport { Control } from './control';\nimport { Item } from './contextmenu';\nimport { Node } from './node';\n\nexport function declareViewDirectives(view, alight) {\n    \n    alight.directives.al.node = Node.bind(view);\n    \n    alight.directives.al.group = Group.bind(view);\n    alight.directives.al.groupHandler = GroupHandler.bind(view);\n    alight.directives.al.groupTitle = GroupTitle.bind(view);\n    \n    alight.directives.al.pickInput = PickInput.bind(view);\n    alight.directives.al.pickOutput = PickOutput.bind(view);\n        \n    alight.directives.al.control = Control.bind(view);\n\n    alight.directives.al.connection = Connection.bind(view);\n}\n\nexport function declareMenuDirectives(menu, alight) {\n    \n    alight.directives.al.item = Item.bind(menu);\n}",".context-menu(\n    :style.left='contextMenu.x+\"px\"',\n    :style.top='contextMenu.y+\"px\"',\n    @mouseleave='contextMenu.hide()',\n    al-if='contextMenu.visible'\n)\n  .search.item(al-if='contextMenu.searchBar')\n    input(al-value='filter')\n  .item(al-repeat='(name,item) in contextMenu.searchItems(filter)',\n    al-item\n    )\n    | {{name}}\n    .subitems(al-if='contextMenu.haveSubitems(item)')\n      .item(\n        al-repeat='(name,subitem) in item',\n        al-item\n      )\n        | {{name}}","import * as alight from 'alight';\nimport * as d3 from 'd3';\nimport { declareMenuDirectives } from './directives/index';\nimport template from './templates/menu.pug';\n\nexport class ContextMenu {\n\n    constructor(items: Object, searchBar: boolean = true, disabled = false) {\n        this.visible = false;\n        this.disabled = disabled;\n        this.x = 0;\n        this.y = 0;\n        this.default = {\n            items,\n            searchBar,\n            onClick() { throw new TypeError('onClick should be overrided');}\n        };\n\n        this.bindTemplate(template());\n    }\n\n    bindTemplate(t) {\n        this.dom = d3.select('body').append('div');\n        this.dom.node().setAttribute('tabindex', 1);\n        this.dom.html(t);\n\n        const alightInstance = alight.makeInstance();\n        \n        declareMenuDirectives(this, alightInstance);\n        this.$cd = alightInstance(this.dom.node(), {contextMenu: this});\n    }\n\n    searchItems(filter: ?string) {\n        var regex = new RegExp(filter, 'i'); \n        var items = {};\n\n        Object.keys(this.items).forEach(key => {\n            var item = this.items[key];\n\n            if (item.constructor === Object) {\n                var subitems = Object.keys(item).filter(subitem => regex.test(subitem))\n\n                if (subitems.length > 0) {\n                    items[key] = {};\n                    subitems.forEach(sumitem => {\n                        items[key][sumitem] = item[sumitem];\n                    });\n                }\n            }\n            \n            if (regex.test(key))\n                items[key] = item;\n        });\n\n        return items;\n    }\n\n    haveSubitems(item) {\n        return item.constructor === Object;\n    }\n\n    isVisible() {\n        return this.visible;\n    }\n\n    show(x: number, y: number, items: ?Object = null, searchBar: ?boolean = null, onClick = null) {\n        if (this.disabled) return;\n        \n        this.visible = true;\n        this.items = items || this.default.items;\n        this.searchBar = searchBar || this.default.searchBar;\n        this.onClick = onClick || this.default.onClick;\n        this.x = x;\n        this.y = y;\n        this.$cd.scan();\n    }\n\n    hide() {\n        this.visible = false;\n        this.$cd.scan();\n    }\n}","var p = (v) => parseInt(v);\nvar eqArr = (ar1, ar2) => ar1.every((v, i) => v === ar2[i]);\nvar eqObj = (o1, o2) => JSON.stringify(o1) === JSON.stringify(o2);\nvar eqCon = (c1, c2, target) => {\n    return c1.node === c2.node && c1[target] === c2[target];\n}\nvar diffCons = (cons1, cons2) => {\n\n    var removed = cons1.filter(c1 => !cons2.some(c2 => eqCon(c1, c2, 'input')));\n    var added = cons2.filter(c2 => !cons1.some(c1 => eqCon(c1, c2, 'input')));\n    \n    return {removed, added}\n}\n\nexport class Diff {\n\n    constructor(data1, data2) {\n        this.a = data1;\n        this.b = data2;\n    }\n\n    basicDiffs() {\n        var k1 = Object.keys(this.a.nodes);\n        var k2 = Object.keys(this.b.nodes);\n\n        var removed = k1.filter(k => !k2.includes(k)).map(p);\n        var added = k2.filter(k => !k1.includes(k)).map(p);\n        var stayed = k1.filter(k => k2.includes(k)).map(p);\n        \n        return { removed, added, stayed };\n    }\n\n    compare() {\n        var { removed, added, stayed } = this.basicDiffs();\n\n        var moved = stayed.filter(id => {\n            var p1 = this.a.nodes[id].position;\n            var p2 = this.b.nodes[id].position;\n\n            return !eqArr(p1, p2)\n        });\n\n        var datachanged = stayed.filter(id => {\n            var d1 = this.a.nodes[id].data;\n            var d2 = this.b.nodes[id].data;\n\n            return !eqObj(d1, d2);\n        });\n\n        var connects = stayed.reduce((arr, id) => {\n            var o1 = this.a.nodes[id].outputs;\n            var o2 = this.b.nodes[id].outputs;\n\n            var output = o1.map((out, i) => {\n                return Object.assign({output: i}, diffCons(out.connections, o2[i].connections))\n            }).filter(diff => diff.added.length !== 0 || diff.removed.length !== 0);\n\n            return [...arr, ...output.map(o => (o.node=id, o))];\n        }, [])\n\n        return {removed, added, moved, datachanged, connects}\n    }\n}","import { ComponentWorker } from './component-worker';\nimport { Utils } from './utils/common';\n\nvar State = { AVALIABLE:0, PROCESSED: 1, ABORT: 2};\n\nexport { ComponentWorker };\n\nexport class Engine {\n\n    constructor(id: string, components: ComponentWorker[]) {\n\n        if (!Utils.isValidId(id))\n            throw new Error('ID should be valid to name@0.1.0 format');  \n        \n        this.id = id;\n        this.components = components;\n        this.args = [];\n        this.data = null;\n        this.state = State.AVALIABLE;\n        this.onAbort = () => { };\n        this.onError = (message, data) => { console.error(message, data); };\n    }\n\n    clone() {\n        return new Engine(this.id, this.components);\n    }\n\n    async throwError (message, data = null) {\n        await this.abort();\n        this.onError(message, data);\n        this.processDone();\n\n        return 'error';\n    }\n\n    extractInputNodes(node, nodes) {\n        return node.inputs.reduce((a, inp) => {\n            return [...a, ...(inp.connections || []).reduce((b, c) => [...b, nodes[c.node]], [])]\n        }, []);\n    }\n\n    detectRecursions(nodes) {\n        const nodesArr = Object.keys(nodes).map(id => nodes[id]);\n        const findSelf = (node, inputNodes) => {\n            if (inputNodes.some(n => n === node))\n                return node;\n            \n            for (var i = 0; i < inputNodes.length; i++) {\n                if (findSelf(node, this.extractInputNodes(inputNodes[i], nodes)))\n                    return node;\n            }\n\n            return null;\n        }\n\n        return nodesArr.map(node => {\n            return findSelf(node, this.extractInputNodes(node, nodes))\n        }).filter(r => r !== null);\n    }\n\n    processStart() {\n        if (this.state === State.AVALIABLE) {  \n            this.state = State.PROCESSED;\n            return true;\n        }\n\n        if (this.state === State.ABORT) {\n            return false;\n        }\n\n        console.warn(`The process is busy and has not been restarted.\n                Use abort() to force it to complete`);\n        return false;\n    }\n\n    processDone() {\n        var success = this.state !== State.ABORT;\n\n        this.state = State.AVALIABLE;\n        \n        if (!success) {\n            this.onAbort();\n            this.onAbort = () => { }\n        }    \n\n        return success;\n    }\n\n    async abort() {\n        return new Promise(ret => {\n            if (this.state === State.PROCESSED) {\n                this.state = State.ABORT;\n                this.onAbort = ret;\n            }\n            else if (this.state === State.ABORT) {\n                this.onAbort();\n                this.onAbort = ret;\n            }\n            else\n                ret();\n        });\n    }\n\n    async lock(node) {\n        return new Promise(res => {\n            node.unlockPool = node.unlockPool || [];\n            if (node.busy && !node.outputData)\n                node.unlockPool.push(res);\n            else \n                res();\n            \n            node.busy = true;\n        });    \n    }\n\n    unlock(node) {\n        node.unlockPool.forEach(a => a());\n        node.unlockPool = [];\n        node.busy = false;\n    }\n\n    async extractInputData(node) {\n        return await Promise.all(node.inputs.map(async (input) => {\n            var conns = input.connections;\n            let connData = await Promise.all(conns.map(async (c) => {\n                const prevNode = this.data.nodes[c.node];\n\n                let outputs = await this.processNode(prevNode);\n\n                if (!outputs) \n                    this.abort();\n                else\n                    return outputs[c.output];\n            }));\n\n            return connData;\n        }));\n    }\n\n    async processWorker(node) {\n        var inputData = await this.extractInputData(node);\n        var component = this.components.find(c => c.name === node.title);\n        var outputData = node.outputs.map(() => null);\n\n        try {\n            await component.worker(node, inputData, outputData, ...this.args);\n        } catch (e) {\n            this.abort();\n            console.warn(e);\n        }\n\n        return outputData;\n    }\n\n    async processNode(node) {\n        if (this.state === State.ABORT || !node)\n            return null;\n        \n        await this.lock(node);\n\n        if (!node.outputData) {\n            node.outputData = this.processWorker(node)\n        }\n\n        this.unlock(node);\n        return node.outputData;\n    }\n\n    async forwardProcess(node) {\n        if (this.state === State.ABORT)\n            return null;\n\n        return await Promise.all(node.outputs.map(async (output) => {\n            return await Promise.all(output.connections.map(async (c) => {\n                const nextNode = this.data.nodes[c.node];\n\n                await this.processNode(nextNode);\n                await this.forwardProcess(nextNode);\n            }));\n        }));\n    }\n\n    copy(data) {\n        data = Object.assign({}, data);\n        data.nodes = Object.assign({}, data.nodes);\n        \n        Object.keys(data.nodes).forEach(key => {\n            data.nodes[key] = Object.assign({}, data.nodes[key])\n        });\n        return data;\n    }\n\n    async validate(data) {\n        var checking = Utils.validate(this.id, data);\n\n        if (!checking.success)\n            return await this.throwError(checking.msg);  \n        \n        var recurentNodes = this.detectRecursions(data.nodes);\n\n        if (recurentNodes.length > 0)\n            return await this.throwError('Recursion detected', recurentNodes);      \n         \n        return true;\n    }\n\n    async processStartNode(id) {\n        if (id) {\n            let startNode = this.data.nodes[id];\n\n            if (!startNode)\n                return await this.throwError('Node with such id not found');   \n            \n            await this.processNode(startNode);\n            await this.forwardProcess(startNode);\n        }\n    }\n\n    async processUnreachable() {\n        for (var i in this.data.nodes) // process nodes that have not been reached\n            if (typeof this.data.nodes[i].outputData === 'undefined') {\n                var node = this.data.nodes[i];\n\n                await this.processNode(node);\n                await this.forwardProcess(node);\n            }\n    }\n\n    async process(data: Object, startId: ?number = null, ...args) {\n        if (!this.processStart()) return;\n        if (!this.validate(data)) return;    \n        \n        this.data = this.copy(data);\n        this.args = args;\n\n        await this.processStartNode(startId);\n        await this.processUnreachable();\n        \n        return this.processDone()?'success':'aborted';\n    }\n}","import * as d3 from 'd3';\n\nexport class ViewUtils {\n\n    static getInputPosition(input) {\n        var node = input.node;\n        var el = input.el;\n\n        return [\n            node.position[0] + el.offsetLeft + el.offsetWidth / 2,\n            node.position[1] + el.offsetTop + el.offsetHeight / 2\n        ]\n    }\n\n    static getOutputPosition(output) {\n        var node = output.node;\n        var el = output.el;\n\n        return [\n            node.position[0] + el.offsetLeft + el.offsetWidth / 2,\n            node.position[1] + el.offsetTop + el.offsetHeight / 2\n        ]\n    }\n\n    static getConnectionPath(a, b, produce, pathInfo) {\n        var { points, curve } = produce(...a, ...b, pathInfo);\n\n        switch (curve) {\n        case 'linear': curve = d3.curveLinear; break;\n        case 'step': curve = d3.curveStep; break;\n        case 'basis': curve = d3.curveBasis; break;\n        default: curve = d3.curveBasis; break;\n        }\n        return this.pointsToPath(points, curve);\n    }\n\n    static pointsToPath(points, d3curve) {\n        var curve = d3curve(d3.path());\n        \n        curve.lineStart();\n        for (var i = 0; i < points.length;i++)\n            curve.point(...points[i]);\n        curve.lineEnd();\n\n        return curve._context.toString();\n    }\n}\n","// Groups\ndiv.group(al-repeat='group in editor.groups',\n  :style.transform='\"translate(\"+group.position[0]+\"px,\"+group.position[1]+\"px)\"',\n  :style.width='group.width+\"px\"',\n  :style.height='group.height+\"px\"',\n  al-group,\n  :class.selected='editor.selected.contains(group)'\n  )\n  div.group-title(al-group-title)\n    | {{group.title}}\n  div.group-handler.right.bottom(al-group-handler='rb')\n  div.group-handler.left.top(al-group-handler='lt')\n  div.group-handler.left.bottom(al-group-handler='lb')\n  div.group-handler.right.top(al-group-handler='rt')\n\n// Connections\nsvg.connections\n  path.connection(\n    al-repeat='path in editor.paths',\n    :d='path.d'\n    al-connection\n    :class.selected='path.selected'\n  )\n\n// Nodes\ndiv.node(al-repeat='node in editor.nodes',\n  :style.transform='\"translate(\"+node.position[0]+\"px,\"+node.position[1]+\"px)\"',\n  al-node,\n  :data-id=\"node.id\",\n  class=\"{{editor.selected.contains(node)?'selected':''}} {{node.title.toLowerCase().replaceAll(' ','-')}}\"\n  )\n  div(al-html=\"editor.view.getTemplate(node)\")\n","import * as alight from 'alight';\nimport * as d3 from 'd3';\nimport { Utils, ViewUtils } from './utils/index';\nimport { Component } from './component';\nimport { ContextMenu } from './contextmenu';\nimport { Node } from './node';\nimport { NodeEditor } from './editor';\nimport { declareViewDirectives } from './directives/index';\nimport template from './templates/view.pug';\n\nconst zoomMargin = 0.9;\n\nexport class PathInfo {\n    constructor(output, input) {\n        this.connection = null;\n        this.input = input;\n        this.output = output;\n    }\n}\n\nexport class EditorView {\n\n    constructor(editor: NodeEditor, container: HTMLElement, menu: ?ContextMenu) {\n        this.editor = editor;\n        this.pickedOutput = null;\n        this.container = d3.select(container).attr('tabindex', 1);\n        this.mouse = [0, 0];\n        this.transform = d3.zoomIdentity;\n\n        this.contextMenu = menu || new ContextMenu({}, true, true);\n\n        this.initView();\n        this.initial();\n    }\n\n    initial() {\n        this.setScaleExtent(0.1, 1);\n        var size = Math.pow(2, 12);\n\n        this.setTranslateExtent(-size, -size, size, size);\n    }\n\n    initView() {\n        this.container\n            .on('click', () => {\n                if (this.container.node() === d3.event.target)\n                    this.areaClick()\n            });\n\n        this.view = this.container.append('div')\n            .style('transform-origin', '0 0')\n            .style('width', 1)\n            .style('height', 1);\n\n        this.zoom = d3.zoom()\n            .on('zoom', () => {\n                this.transform = d3.event.transform;\n                this.update();\n                this.editor.eventListener.trigger('transform', this.transform);\n            });\n\n        this.container.call(this.zoom);\n\n        d3.select(window)\n            .on('mousemove.d3ne' + this.editor._id, () => {\n                \n                var k = this.transform.k;\n                var position = d3.mouse(this.view.node());\n\n                this.mouse = [position[0]/k, position[1]/k];\n                this.update();\n            })\n            .on('keydown.d3ne' + this.editor._id, (e) => {\n                if (this.container.node() === document.activeElement)\n                    this.editor.keyDown(e);\n            })\n            .on('resize.d3ne' + this.editor._id, this.resize.bind(this));\n\n        this.view.html(template());\n        this.initAlight();\n    }\n\n    initAlight() {\n        var al = alight.makeInstance();\n\n        declareViewDirectives(this, al);\n        this.$cd = al(this.view.node(), { editor: this.editor });\n    }\n\n    getTemplate(node) {\n        var component = this.editor.components.find(c => {\n            return c.name === node.title\n        });\n\n        if (!component)\n            throw new Error(`Component not found. Make sure you have defined \n                            the component with the \"${node.title}\" name`);\n\n        return component.template;\n    }\n\n    resize() {\n        var width = this.container.node().parentElement.clientWidth;\n        var height = this.container.node().parentElement.clientHeight;\n\n        this.container\n            .style('width', width + 'px')\n            .style('height', height + 'px');\n\n        this.update();\n    }\n\n    connectionProducer(x1, y1, x2, y2) {\n        var offsetX = 0.3 * Math.abs(x1 - x2);\n        var offsetY = 0.1 * (y2 - y1);\n\n        var p1 = [x1, y1];\n        var p2 = [x1 + offsetX, y1 + offsetY];\n        var p3 = [x2 - offsetX, y2 - offsetY];\n        var p4 = [x2, y2];\n\n        return {\n            points: [p1, p2, p3, p4],\n            curve: 'basis'\n        };\n    }\n\n    updateConnections() {\n        var pathData = [];\n\n        this.editor.nodes.forEach(node => {\n            node.getConnections('output').forEach(con => {\n                let output = con.output;\n                let input = con.input;\n\n                if (input.el) {\n                    let pathInfo = new PathInfo(output, input);\n\n                    pathInfo.connection = con;\n\n                    pathData.push({\n                        connection: con,\n                        d: ViewUtils.getConnectionPath(\n                            ViewUtils.getOutputPosition(output),\n                            ViewUtils.getInputPosition(input),\n                            this.connectionProducer,\n                            pathInfo\n                        )\n                    });\n                }\n            });\n        });\n\n        if (this.pickedOutput !== null && this.pickedOutput.el) {\n            let output = this.pickedOutput;\n            let input = this.mouse;\n            let pathInfo = new PathInfo(output, input);\n\n            pathData.push({\n                selected: true,\n                d: ViewUtils.getConnectionPath(\n                    ViewUtils.getOutputPosition(output),\n                    input,\n                    this.connectionProducer,\n                    pathInfo\n                )\n            });\n        }\n\n        this.editor.paths = pathData;\n    }\n\n    update() {\n        var t = this.transform;\n        \n        this.view.style('transform', `translate(${t.x}px, ${t.y}px) scale(${t.k})`);\n        this.updateConnections();\n        this.$cd.scan();\n    }\n\n    assignContextMenuHandler() {\n        this.contextMenu.default.onClick = async (item) => {\n        \n            if (item instanceof Component) {\n                let node = item.newNode();\n\n                await item.builder(node);\n                this.editor.addNode(node, true);\n                this.editor.selectNode(node);\n            }\n            else\n                item();\n\n            this.contextMenu.hide();\n        };\n    }    \n\n    areaClick() {\n        if (this.editor.readOnly) return;\n        \n        if (this.pickedOutput !== null && !d3.event.ctrlKey)\n            this.pickedOutput = null;\n        else if (this.contextMenu.visible)\n            this.contextMenu.hide();\n        else {\n            this.assignContextMenuHandler();\n            this.contextMenu.show(d3.event.pageX, d3.event.pageY);\n        }\n        this.update();\n    }\n\n    zoomAt(nodes: Node[]) {\n        if (nodes.length === 0) return;\n\n        var [w, h] = [this.container.node().clientWidth, this.container.node().clientHeight];\n        var bbox = Utils.nodesBBox(nodes);\n        var [kw, kh] = [w / bbox.width, h / bbox.height]\n        var k = Math.min(kh, kw, 1) * zoomMargin;\n\n        var center = bbox.getCenter();\n\n        this.translate(w / 2 - center[0] * k, h / 2 - center[1] * k);\n        this.scale(k);\n    }\n\n    translate(x, y) {\n        this.transform.x = x;\n        this.transform.y = y;\n        this.update();\n    }\n\n    scale(scale) {\n        this.transform.k = scale;\n        this.update();\n    }\n\n    setScaleExtent(scaleMin: number, scaleMax: number) {\n        this.scaleExtent = [scaleMin, scaleMax];\n        this.zoom.scaleExtent(this.scaleExtent);\n    }\n\n    setTranslateExtent(left: number, top: number, right: number, bottom: number) {\n        this.translateExtent = [[left, top], [right, bottom]];\n        this.zoom.translateExtent(this.translateExtent);\n    }\n\n    destroy() {\n        d3.select(window)\n            .on('mousemove.d3ne' + this.editor._id, null)\n            .on('keydown.d3ne' + this.editor._id, null)\n            .on('resize.d3ne' + this.editor._id, null);\n    }\n}\n","export class EventListener {\n\n    constructor() {\n        this.events = {\n            nodecreate:[],\n            groupcreate: [],\n            connectioncreate: [],\n            noderemove:[],\n            groupremove:[],\n            connectionremove:[],\n            nodeselect:[],\n            groupselect: [],\n            error: [console.warn],\n            change: [],\n            transform: []\n        };\n        this.persistent = true;\n    }\n\n    on(names: string, handler: () => {}) { \n\n        names.split(' ').forEach(name => {\n            if (!this.events[name])\n                throw new Error(`The event ${name} does not exist`); \n            this.events[name].push(handler);\n        });\n        \n        return this;\n    }\n\n    trigger(name: string, param) {\n\n        if (!(name in this.events))\n            throw new Error(`The event ${name} cannot be triggered`);\n        \n        return this.events[name].reduce((r, e) => {\n            return (e(param, this.persistent) !== false) && r\n        }, true); // return false if at least one event is false        \n    }\n}","class Command {\n    constructor(exec, undo, args) {\n        this.exec = () => { exec(...args) };\n        this.undo = () => { undo(...args) };\n        this.a = args[0];\n    }\n}\n\nexport class History {\n\n    constructor(editor) {\n        this.editor = editor;\n        this.list = [];\n        this._locked = false;\n        this.position = -1;\n    }\n\n    add(exec, undo, args) {\n        if (this._locked) return;\n        \n        this.position++;\n        this.list.splice(this.position);\n        this.list.push(new Command(exec, undo, args));\n    }\n\n    undo() {\n        if (this.position < 0) return;\n\n        this._locked = true;\n        this.list[this.position--].undo();\n        this._locked = false;\n    }\n\n    redo() {\n        if (this.position + 1 >= this.list.length) return;\n        \n        this._locked = true;\n        this.list[++this.position].exec();\n        this._locked = false;\n    }\n}","import { Group } from './group';\nimport { Node } from './node';\n\nexport class Selected {\n\n    constructor() {\n        this.list = [];\n    }\n\n    add(item: Node | Group, accumulate = false) {\n        if (accumulate) {\n            if (this.contains(item))\n                this.remove(item);\n            else\n                this.list.push(item);\n        }\n        else\n            this.list = [item];    \n    }\n\n    clear() {\n        this.each(item => {\n            this.remove(item);\n        });\n    }\n\n    remove(item) {\n        this.list.splice(this.list.indexOf(item), 1);\n    }\n\n    contains(item) {\n        return this.list.indexOf(item) !== -1;\n    }\n\n    each(callback) {\n        this.list.forEach(callback);\n    }\n\n    eachNode(callback) {\n        this.list.filter(item => item instanceof Node).forEach(callback);\n    }\n\n    eachGroup(callback) {\n        this.list.filter(item => item instanceof Group).forEach(callback);\n    }\n\n    getNodes() {\n        return this.list.filter(item => item instanceof Node);\n    }\n\n    getGroups() {\n        return this.list.filter(item => item instanceof Group);\n    }\n}","import * as d3 from 'd3';\nimport { Component } from './component';\nimport { Connection } from './connection';\nimport { ContextMenu } from './contextmenu';\nimport { EditorView } from './editorview';\nimport { EventListener } from './eventlistener';\nimport { Group } from './group';\nimport { History } from './history';\nimport { Input } from './input';\nimport { Node } from './node';\nimport { Output } from './output';\nimport { Selected } from './selected';\nimport { Utils } from './utils/common';\n\nexport class NodeEditor {\n\n    constructor(id: string, container: HTMLElement, components: Component[], menu: ?ContextMenu) {\n\n        if (!Utils.isValidId(id))\n            throw new Error('ID should be valid to name@0.1.0 format');  \n        \n        this.id = id;\n        this.components = components;\n\n        this.init();\n\n        this.view = new EditorView(this, container, menu);\n        this.view.resize();\n    }\n\n    init() {\n        this._id = Math.random().toString(36).substr(2, 9);\n        this.eventListener = new EventListener();\n        this.selected = new Selected();\n        this.history = new History(this);\n        \n        this.nodes = [];\n        this.groups = [];\n        this.readOnly = false;\n    }\n\n    addNode(node: Node, mousePlaced = false) {\n        if (this.eventListener.trigger('nodecreate', node)) {\n            if (mousePlaced)\n                node.position = this.view.mouse;\n            this.nodes.push(node);\n            this.findComponent(node).created(node);\n            this.eventListener.trigger('change');\n            \n            this.history.add(this.addNode.bind(this),\n                this.removeNode.bind(this),\n                [node]);\n        }\n    }\n\n    addGroup(group: Group) {\n        if (this.eventListener.trigger('groupcreate', group)) {\n            this.groups.push(group);\n            this.eventListener.trigger('change');\n        }\n        \n        this.view.update();\n    }\n\n    removeNode(node: Node) {\n        if (node.readOnly) return;\n        var index = this.nodes.indexOf(node);\n\n        if (this.eventListener.trigger('noderemove', node)) {\n            node.getConnections().forEach(c => this.removeConnection(c));\n\n            this.nodes.splice(index, 1);\n            this.findComponent(node).destroyed(node);\n            this.eventListener.trigger('change');\n\n            this.history.add(this.removeNode.bind(this),\n                this.addNode.bind(this),\n                [node]);\n        }\n\n        this.view.update();\n    }\n\n    removeGroup(group: Group) {\n        if (this.eventListener.trigger('groupremove', group)) {\n            group.remove();\n            this.groups.splice(this.groups.indexOf(group), 1);\n            this.eventListener.trigger('change');\n        }    \n\n        this.view.update(); \n    }\n\n    connect(output: Output | Connection, input: ?Input) {\n        if (output instanceof Connection) {\n            input = output.input;\n            output = output.output;\n        }\n\n        if (this.eventListener.trigger('connectioncreate', { output, input })) {\n            try {\n                var connection = output.connectTo(input);\n\n                this.eventListener.trigger('change');\n                this.history.add(this.connect.bind(this),\n                    this.removeConnection.bind(this),\n                    [connection]);\n            } catch (e) {\n                this.eventListener.trigger('error', e);\n            }\n        }\n        this.view.update(); \n    }\n\n    removeConnection(connection: Connection) {\n        if (this.eventListener.trigger('connectionremove', connection)) {\n            connection.remove();\n            this.eventListener.trigger('change');\n\n            this.history.add(this.removeConnection.bind(this),\n                this.connect.bind(this),\n                [connection]);\n        }\n        this.view.update(); \n    }\n\n    selectNode(node: Node, accumulate: boolean = false) {\n        if (this.nodes.indexOf(node) === -1)\n            throw new Error('Node not exist in list');\n        \n        if (this.eventListener.trigger('nodeselect', node))\n            this.selected.add(node, accumulate);\n        \n        this.view.update();\n    }\n\n    selectGroup(group: Group, accumulate: boolean = false) {\n        if (this.groups.indexOf(group) === -1)\n            throw new Error('Group not exist in list');\n        \n        if (this.eventListener.trigger('groupselect', group))\n            this.selected.add(group, accumulate);\n        \n        this.view.update();\n    }\n    \n    keyDown() {\n        if (this.readOnly) return;\n\n        switch (d3.event.keyCode) {\n        case 46:\n            this.selected.eachNode(this.removeNode.bind(this));\n            this.selected.eachGroup(this.removeGroup.bind(this));\n            this.view.update();\n            break;\n        case 71:\n            let nodes = this.selected.getNodes();\n                \n            if (nodes.length > 0)\n                this.addGroup(new Group('Group', { nodes }));\n            \n            break;\n        case 90:\n            if (d3.event.ctrlKey && d3.event.shiftKey)\n                this.history.redo();\n            else\n            if (d3.event.ctrlKey)\n                this.history.undo();\n                \n            break;\n        default: break;\n            \n        }\n    }\n\n    findComponent(node) {\n        const component = this.components.find(c => {\n            return c.name === node.title\n        });\n\n        if (!component) throw `Component ${node.title} was not found`;\n\n        return component;\n    }\n\n    clear() {\n        this.nodes.splice(0, this.nodes.length);\n        this.groups.splice(0, this.groups.length);\n    }\n\n    toJSON() {\n        var nodes = {};\n        var groups = {};\n\n        this.nodes.forEach(node => nodes[node.id] = node.toJSON());\n        this.groups.forEach(group => groups[group.id] = group.toJSON());\n\n        return {\n            'id': this.id,\n            'nodes': nodes,\n            'groups': groups\n        };\n    }\n\n    beforeImport(json: Object) {\n        var checking = Utils.validate(this.id, json);\n        \n        if (!checking.success) {\n            this.eventListener.trigger('error', checking.msg);\n            return false;\n        }\n        \n        this.eventListener.persistent = false;\n        this.clear();\n        return true;\n    }\n\n    afterImport() {\n        this.view.update();\n        this.eventListener.persistent = true;\n        return true;\n    }\n\n    async fromJSON(json: Object) {\n        if (!this.beforeImport(json)) return false;\n        var nodes = {};\n\n        try {\n            await Promise.all(Object.keys(json.nodes).map(async id => {\n                var node = json.nodes[id];\n                var component = this.findComponent(node);\n\n                nodes[id] = await Node.fromJSON(component, node);\n                this.addNode(nodes[id]);\n            }));\n        \n            Object.keys(json.nodes).forEach(id => {\n                var jsonNode = json.nodes[id];\n                var node = nodes[id];\n                \n                jsonNode.outputs.forEach((outputJson, i) => {\n                    outputJson.connections.forEach(jsonConnection => {\n                        var nodeId = jsonConnection.node;\n                        var inputIndex = jsonConnection.input;\n                        var targetInput = nodes[nodeId].inputs[inputIndex];\n\n                        this.connect(node.outputs[i], targetInput);\n                    });\n                });\n\n            });\n\n            if (typeof json.groups === 'object')\n                Object.keys(json.groups).forEach(id => {\n                    var group = Group.fromJSON(json.groups[id]);\n\n                    json.groups[id].nodes.forEach(nodeId => {\n                        var node = nodes[nodeId];\n\n                        group.addNode(node);\n                    })\n                    this.addGroup(group);\n                });\n        }\n        catch (e) {\n            this.eventListener.trigger('error', e);\n            return false;\n        }\n        return this.afterImport();\n    }\n}\n","export class Task {\n\n    constructor(inputs, action) {\n        this.inputs = inputs;\n        this.action = action;\n        this.next = [];\n        this.outputData = null;\n        this.closed = [];\n\n        this.getOptions().forEach(input => {\n            input.forEach(con => {\n                con.task.next.push({index: con.index, task: this});\n            })\n        });\n    }\n\n    getOptions() {\n        return this.inputs.filter(input => input[0] && input[0].task)\n    }\n\n    getOutputs() {\n        return this.inputs.filter(input => input[0] && input[0].get);\n    }\n\n    reset() {\n        this.outputData = null;\n    }\n\n    async run(data, needReset = true, garbage = []) {\n        garbage.push(this);\n\n        var inputs = await Promise.all(this.getOutputs().map(async input => {\n            return await Promise.all(input.map(async con => {\n                if (con) {\n                    await con.run(data, false, garbage);\n                    return con.get();\n                }\n            }));\n        }));\n\n        if (!this.outputData) {\n            this.outputData = await this.action(inputs, data);\n\n            await Promise.all(\n                this.next\n                    .filter(f => !this.closed.includes(f.index))\n                    .map(async f => \n                        await f.task.run(data, false, garbage)\n                    )\n            );\n        }\n        \n        if (needReset)\n            garbage.map(t => t.reset());\n    }\n\n    option(index) {\n        var task = this;\n\n        return {task, index}\n    }\n\n    output(index) {\n        var task = this;\n\n        return {\n            run: task.run.bind(task),\n            get() {\n                return task.outputData[index];\n            }\n        }\n    }\n}"],"names":["Module","data","titlesInput","titlesOutput","inputs","extractNodes","outputs","keys","map","n","name","input","forEach","key","i","output","k","titles","Object","nodes","filter","includes","title","sort","n1","n2","position","ModuleManager","engine","node","module","clone","read","process","m","write","ComponentWorker","props","worker","Block","Class","constructor","TypeError","id","incrementId","width","height","style","latestId","Control","html","handler","parent","Error","Node","getNode","Connection","addConnection","removeConnection","IO","socket","multiConns","el","multipleConnections","connections","connection","splice","indexOf","Socket","hint","compatible","push","Input","control","length","hasConnection","c","Output","compatibleWith","some","item","group","controls","readOnly","index","type","conns","showControl","toJSON","component","json","Component","newNode","Math","max","builder","defaultTemplate","template","created","destroyed","Group","scope","expression","env","changeDetector","locals","setPosition","dx","dy","extent","editor","view","translateExtent","minx","miny","maxx","maxy","min","watch","assign","deep","call","d3","on","sourceEvent","shiftKey","selectGroup","ctrlKey","transform","selected","each","eachGroup","contains","update","eventListener","trigger","items","removeGroup","onClick","subitem","contextMenu","hide","x","clientX","y","clientY","show","preventDefault","GroupHandler","arg","mousePrev","updateGroup","mouse","deltaw","deltah","deltax","deltay","match","setWidth","setHeight","container","zoom","minWidth","minHeight","isCoverNode","addNode","removeNode","GroupTitle","prompt","scan","PickInput","interceptInput","pickedOutput","prepareConnection","connectedTo","find","connect","prevent","stopPropagation","PickOutput","setAttributes","dataset","inputNode","inputIndex","outputNode","outputIndex","className","baseVal","toLowerCase","replaceAll","path","innerHTML","children","Item","l","haveSubitems","classed","Utils","arr","left","top","right","bottom","abs","isValidId","Array","groups","test","msg","id1","split","id2","isValidData","success","params","setMinSizes","coverNodes","w","h","gp","np","self","margin","bbox","nodesBBox","containNode","a","raise","selectNode","_node","eachNode","contain","cover","addEventListener","offsetWidth","offsetHeight","addGroup","declareViewDirectives","alight","directives","al","bind","groupHandler","groupTitle","pickInput","pickOutput","declareMenuDirectives","menu","ContextMenu","searchBar","disabled","visible","default","bindTemplate","t","dom","append","setAttribute","alightInstance","$cd","regex","RegExp","subitems","sumitem","p","v","parseInt","eqArr","ar1","ar2","every","eqObj","o1","o2","JSON","stringify","eqCon","c1","c2","target","diffCons","cons1","cons2","removed","added","Diff","data1","data2","b","k1","k2","stayed","basicDiffs","moved","p1","p2","datachanged","d1","d2","connects","reduce","out","diff","o","State","AVALIABLE","PROCESSED","ABORT","Engine","components","args","state","onAbort","onError","message","error","abort","processDone","inp","nodesArr","findSelf","inputNodes","extractInputNodes","r","warn","Promise","ret","unlockPool","busy","outputData","res","all","processNode","prevNode","connData","extractInputData","inputData","lock","processWorker","unlock","nextNode","forwardProcess","validate","checking","throwError","detectRecursions","recurentNodes","startNode","startId","processStart","copy","processStartNode","processUnreachable","ViewUtils","offsetLeft","offsetTop","produce","pathInfo","points","curve","pointsToPath","d3curve","lineStart","point","lineEnd","_context","toString","zoomMargin","PathInfo","EditorView","NodeEditor","HTMLElement","attr","initView","initial","setScaleExtent","size","pow","setTranslateExtent","areaClick","window","_id","e","document","activeElement","keyDown","resize","initAlight","parentElement","clientWidth","clientHeight","x1","y1","x2","y2","offsetX","offsetY","p3","p4","pathData","getConnections","con","getConnectionPath","getOutputPosition","getInputPosition","connectionProducer","paths","updateConnections","assignContextMenuHandler","pageX","pageY","kw","kh","center","getCenter","translate","scale","scaleMin","scaleMax","scaleExtent","EventListener","events","console","persistent","names","param","Command","exec","undo","History","list","_locked","Selected","accumulate","remove","callback","init","random","substr","history","mousePlaced","findComponent","add","connectTo","keyCode","getNodes","redo","clear","beforeImport","fromJSON","jsonNode","outputJson","nodeId","jsonConnection","targetInput","babelHelpers.typeof","afterImport","Task","action","next","closed","getOptions","task","get","needReset","garbage","getOutputs","run","f","reset"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/d3-node-editor/build/d3-node-editor.min.js b/node_modules/d3-node-editor/build/d3-node-editor.min.js
index f8f60b1..542c179 100755
--- a/node_modules/d3-node-editor/build/d3-node-editor.min.js
+++ b/node_modules/d3-node-editor/build/d3-node-editor.min.js
@@ -3,7 +3,7 @@
 * (c) 2018 Vitaliy Stoliarov
 * Released under the MIT License.
 */
-!function(t){"use strict";function e(t,e,n,o){var i=e&&e.prototype instanceof r?e:r,u=Object.create(i.prototype),a=new h(o||[]);return u._invoke=s(t,n,a),u}function n(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function r(){}function o(){}function i(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function a(t){function e(r,o,i,u){var a=n(t[r],t,o);if("throw"!==a.type){var s=a.arg,c=s.value;return c&&"object"==typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,i,u)},function(t){e("throw",t,i,u)}):Promise.resolve(c).then(function(t){s.value=t,i(s)},u)}u(a.arg)}function r(t,n){function r(){return new Promise(function(r,o){e(t,n,r,o)})}return o=o?o.then(r,r):r()}var o;this._invoke=r}function s(t,e,r){var o=O;return function(i,u){if(o===N)throw new Error("Generator is already running");if(o===T){if("throw"===i)throw u;return p()}for(r.method=i,r.arg=u;;){var a=r.delegate;if(a){var s=c(a,r);if(s){if(s===A)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===O)throw o=T,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=N;var l=n(t,e,r);if("normal"===l.type){if(o=r.done?T:j,l.arg===A)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=T,r.method="throw",r.arg=l.arg)}}}function c(t,e){var r=t.iterator[e.method];if(r===v){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=v,c(t,e),"throw"===e.method))return A;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var o=n(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,A;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=v),e.delegate=null,A):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,A)}function l(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}function d(t){if(t){var e=t[w];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(y.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=v,e.done=!0,e};return r.next=r}}return{next:p}}function p(){return{value:v,done:!0}}var v,m=Object.prototype,y=m.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},w=g.iterator||"@@iterator",b=g.asyncIterator||"@@asyncIterator",x=g.toStringTag||"@@toStringTag",k="object"==typeof module,E=t.regeneratorRuntime;if(E)return void(k&&(module.exports=E));E=t.regeneratorRuntime=k?module.exports:{},E.wrap=e;var O="suspendedStart",j="suspendedYield",N="executing",T="completed",A={},G={};G[w]=function(){return this};var C=Object.getPrototypeOf,V=C&&C(C(d([])));V&&V!==m&&y.call(V,w)&&(G=V);var _=i.prototype=r.prototype=Object.create(G);o.prototype=_.constructor=i,i.constructor=o,i[x]=o.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,i):(t.__proto__=i,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(_),t},E.awrap=function(t){return{__await:t}},u(a.prototype),a.prototype[b]=function(){return this},E.AsyncIterator=a,E.async=function(t,n,r,o){var i=new a(e(t,n,r,o));return E.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},u(_),_[x]="Generator",_[w]=function(){return this},_.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},E.values=d,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=v)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var u=y.call(o,"catchLoc"),a=y.call(o,"finallyLoc");if(u&&a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,A):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),A},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),A}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;f(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=v),A}}}(function(){return this}()||Function("return this")()),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3"),require("alight")):"function"==typeof define&&define.amd?define(["exports","d3","alight"],e):e(t.D3NE={},t.d3,t.alight)}(this,function(t,e,n){"use strict";function r(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=r(t[0],e);return t.every(function(t){return r(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return r(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+r(t[n],e)+";"}).join("\n  "+i);return o.length>=15&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}function o(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=o(t[0],e);return t.every(function(t){return o(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return o(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var i="  ".repeat(e-1),u=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+o(t[n],e)+";"}).join("\n  "+i);return r.length>=15&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}function i(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=i(t[0],e);return t.every(function(t){return i(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return i(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),u=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+i(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(u+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+u+"\n"+o+"}":"{\n  "+o+u+"\n"+o+"}"}function u(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=u(t[0],e);return t.every(function(t){return u(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return u(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+u(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function a(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=a(t[0],e);return t.every(function(t){return a(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return a(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function s(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=s(t[0],e);return t.every(function(t){return s(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return s(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+s(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function c(t,n,r,o){function i(t,e,n){var r=this.editor.view.translateExtent,o=r[0][0],i=r[0][1],u=r[1][0],a=r[1][1];t.position[0]=Math.min(u,Math.max(o,t.position[0]+e)),t.position[1]=Math.min(a,Math.max(i,t.position[1]+n))}var u=this,a=o.changeDetector.locals.group;a.el=n,o.watch("group.style",function(){Object.assign(n.style,a.style)},{deep:!0}),e.select(n).call(e.drag().on("start",function(){e.event.sourceEvent.shiftKey||u.editor.selectGroup(a,e.event.sourceEvent.ctrlKey)}).on("drag",function(){if(!u.editor.readOnly){var t=u.transform.k,n=e.event.dx/t,r=e.event.dy/t;u.editor.selected.each(function(t){i.call(u,t,n,r)}),u.editor.selected.eachGroup(function(t){for(var e in t.nodes){var o=t.nodes[e];u.editor.selected.contains(o)||i.call(u,o,n,r)}}),u.update()}}).on("end",function(){u.editor.eventListener.trigger("change")}));var s={"Remove group":function(){u.editor.removeGroup(a)}},c=function(t){t.call(u),u.contextMenu.hide()};e.select(n).on("contextmenu",function(){if(!u.editor.readOnly){var t=e.event.clientX,n=e.event.clientY;u.editor.selectGroup(a),u.contextMenu.show(t,n,s,!1,c),e.event.preventDefault()}})}function l(t,n,r,o){function i(t,e,n,o,i){0!==e&&(s[0]=t[0]),0!==n&&(s[1]=t[1]),r.match("l")?(a.position[0]+=Math.min(e,o),a.setWidth(a.width-o)):r.match("r")&&a.setWidth(a.width+o),r.match("t")?(a.position[1]+=Math.min(n,i),a.setHeight(a.height-i)):r.match("b")&&a.setHeight(a.height+i)}var u=this,a=o.changeDetector.locals.group,s=null;e.select(n).call(e.drag().on("start",function(){s=e.mouse(u.container.node()),u.editor.selectGroup(a)}).on("drag",function(){if(!u.editor.readOnly){var t=e.zoomTransform(u.container),n=e.mouse(u.container.node()),r=(n[0]-s[0])/t.k,o=(n[1]-s[1])/t.k;i(n,Math.max(0,a.width-a.minWidth),Math.max(0,a.height-a.minHeight),r,o),u.update()}}).on("end",function(){u.editor.nodes.forEach(function(t){a.isCoverNode(t)?a.addNode(t):a.removeNode(t)}),u.editor.eventListener.trigger("change"),u.update()}))}function f(t,n,r,o){var i=o.changeDetector.locals.group;e.select(n).on("click",function(){var t=prompt("Please enter title of the group",i.title);null!==t&&t.length>0&&(i.title=t),o.scan()})}function h(t,n,r,o){function i(){if(null===this.pickedOutput)return s.hasConnection()&&(this.pickedOutput=s.connections[0].output,this.editor.removeConnection(s.connections[0])),this.update(),!0}function u(){var t=this;if(!s.multipleConnections&&s.hasConnection()&&this.editor.removeConnection(s.connections[0]),!this.pickedOutput.multipleConnections&&this.pickedOutput.hasConnection()&&this.editor.removeConnection(this.pickedOutput.connections[0]),this.pickedOutput.connectedTo(s)){var e=s.connections.find(function(e){return e.output===t.pickedOutput});this.editor.removeConnection(e)}this.editor.connect(this.pickedOutput,s)}var a=this,s=o.changeDetector.locals.input;s.el=n;var c=!1;e.select(n).on("mouseleave",function(){return c=!1}),e.select(n).on("mousedown mouseup",function(){a.editor.readOnly||c||(e.event.preventDefault(),e.event.stopPropagation(),i.call(a)||(u.call(a),a.pickedOutput=null,a.update()))}),e.select(n).on("mousedown.prevent",function(){return c=!0})}function d(t,n,r,o){var i=this,u=o.changeDetector.locals.output;u.el=n,e.select(n).on("mousedown",function(){i.editor.readOnly||(e.event.stopPropagation(),i.pickedOutput=u)})}function p(t,e,n){t.dataset.inputNode=e.node.id,t.dataset.inputIndex=e.node.inputs.indexOf(e),t.dataset.outputNode=n.node.id,t.dataset.outputIndex=n.node.outputs.indexOf(n),t.className.baseVal+=" output-"+n.socket.id.toLowerCase().replace(" ","-"),t.className.baseVal+=" input-"+e.socket.id.toLowerCase().replace(" ","-")}function v(t,e,n,r){var o=r.changeDetector.locals.path,i=o.connection;if(i){i.el=e,r.watch("path.connection.style",function(){Object.assign(e.style,i.style)},{deep:!0});var u=o.connection.input,a=o.connection.output;p(e,u,a)}}function m(t,e,n,r){var o=r.changeDetector.locals,i=o.input?o.input.control:o.control;e.innerHTML=i.html,i.handler(e.children[0],i)}function y(t,n,r,o){var i=this,u=o.changeDetector.locals,a=u.subitem||u.item,s=a.constructor===Object;e.select(n).on("click",function(){s||i.onClick(a),e.event.stopPropagation()}).classed("have-subitems",s)}function g(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=g(t[0],e);return t.every(function(t){return g(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return g(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+g(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function w(t,n,r,o){function i(t,e,n){var r=this.editor.view.translateExtent,o=r[0][0],i=r[0][1],u=r[1][0],a=r[1][1];t.position[0]=Math.min(u,Math.max(o,t.position[0]+e)),t.position[1]=Math.min(a,Math.max(i,t.position[1]+n))}var u=this,a=o.changeDetector.locals.node;a.el=n,o.watch("node.style",function(){Object.assign(n.style,a.style)},{deep:!0}),e.select(n).call(e.drag().on("start",function(){e.select(n).raise(),e.event.sourceEvent.shiftKey||u.editor.selectNode(a,e.event.sourceEvent.ctrlKey)}).on("drag",function(){if(!u.editor.readOnly&&!a.readOnly){var t=u.transform.k,n=e.event.dx/t,r=e.event.dy/t;u.editor.selected.each(function(t){i.call(u,t,n,r)}),u.editor.selected.eachGroup(function(t){for(var e in t.nodes){var o=t.nodes[e];u.editor.selected.contains(o)||i.call(u,o,n,r)}}),u.update()}}).on("end",function(){u.editor.groups.forEach(function(t){u.editor.selected.eachNode(function(e){var n=t.containNode(e),r=t.isCoverNode(e);n&&!r?t.removeNode(e):!n&&r&&t.addNode(e)})}),u.editor.eventListener.trigger("change"),u.update()})),window.addEventListener("load",function(){a.width=n.offsetWidth,a.height=n.offsetHeight});var s={"Remove node":function(){u.editor.removeNode(a)},"Add to group":function(){var t=new Y("Group",{nodes:[a]});u.editor.addGroup(t)}},c=function(t){t.call(u),u.contextMenu.hide()};e.select(n).on("contextmenu",function(){if(!u.editor.readOnly&&!a.readOnly){var t=e.event.clientX,n=e.event.clientY;u.editor.selectNode(a),u.contextMenu.show(t,n,s,!1,c),e.event.preventDefault()}})}function b(t,e){e.directives.al.node=w.bind(t),e.directives.al.group=c.bind(t),e.directives.al.groupHandler=l.bind(t),e.directives.al.groupTitle=f.bind(t),e.directives.al.pickInput=h.bind(t),e.directives.al.pickOutput=d.bind(t),e.directives.al.control=m.bind(t),e.directives.al.connection=v.bind(t)}function x(t,e){e.directives.al.item=y.bind(t)}function k(t){var e="";try{var n={};e+='<div class="context-menu" :style.left="contextMenu.x+&quot;px&quot;" :style.top="contextMenu.y+&quot;px&quot;" @mouseleave="contextMenu.hide()" al-if="contextMenu.visible">',e+='<div class="search item" al-if="contextMenu.searchBar">',e+='<input al-value="filter"></div>',e+='<div class="item" al-repeat="(name,item) in contextMenu.searchItems(filter)" al-item>',e+="{{name}}",e+='<div class="subitems" al-if="contextMenu.haveSubitems(item)">',e+='<div class="item" al-repeat="(name,subitem) in item" al-item>',e+="{{name}}</div></div></div></div>"}catch(t){pug.rethrow(t,void 0,void 0,n[void 0])}return e}function E(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=E(t[0],e);return t.every(function(t){return E(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return E(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+E(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function O(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=O(t[0],e);return t.every(function(t){return O(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return O(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+O(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function j(t){var e="";try{var n={};e+="\x3c!-- Groups--\x3e",e+='<div class="group" al-repeat="group in editor.groups" :style.transform="&quot;translate(&quot;+group.position[0]+&quot;px,&quot;+group.position[1]+&quot;px)&quot;" :style.width="group.width+&quot;px&quot;" :style.height="group.height+&quot;px&quot;" al-group :class.selected="editor.selected.contains(group)">',e+='<div class="group-title" al-group-title>',e+="{{group.title}}</div>",e+='<div class="group-handler right bottom" al-group-handler="rb"></div>',e+='<div class="group-handler left top" al-group-handler="lt"></div>',e+='<div class="group-handler left bottom" al-group-handler="lb"></div>',e+='<div class="group-handler right top" al-group-handler="rt"></div></div>',e+="\x3c!-- Connections--\x3e",e+='<svg class="connections">',e+='<path class="connection" al-repeat="path in editor.paths" :d="path.d" al-connection :class.selected="path.selected"></path></svg>',e+="\x3c!-- Nodes--\x3e",e+="<div class=\"node {{editor.selected.contains(node)?'selected':''}} {{node.title.toLowerCase().replace(' ','-')}}\" al-repeat=\"node in editor.nodes\" :style.transform=\"&quot;translate(&quot;+node.position[0]+&quot;px,&quot;+node.position[1]+&quot;px)&quot;\" al-node :data-id=\"node.id\">",e+='<div al-html="editor.view.getTemplate(node)"></div></div>'}catch(t){pug.rethrow(t,void 0,void 0,n[void 0])}return e}function N(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=N(t[0],e);return t.every(function(t){return N(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return N(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+N(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function T(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=T(t[0],e);return t.every(function(t){return T(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return T(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+T(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function A(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=A(t[0],e);return t.every(function(t){return A(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return A(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+A(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function G(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=G(t[0],e);return t.every(function(t){return G(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return G(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+G(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}var C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),R=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},L=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},M=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},S=function(){function t(e,n,r){V(this,t);var o=t.extractNodes(e,n),i=t.extractNodes(e,r);this.inputs=[],this.outputs=[],this.keys={input:o.map(function(t){return t.data.name}),output:i.map(function(t){return t.data.name})}}return _(t,[{key:"read",value:function(t){var e=this;this.keys.input.forEach(function(n,r){e.inputs[n]=t[r]})}},{key:"write",value:function(t){var e=this;this.keys.output.forEach(function(n,r){t[r]=e.outputs[n]})}}],[{key:"extractNodes",value:function(t,e){return Object.keys(t.nodes).filter(function(n){return e.includes(t.nodes[n].title)}).map(function(e){return t.nodes[e]}).sort(function(t,e){return t.position[1]>e.position[1]})}}]),t}(),I=function(){function t(e,n){V(this,t),this.engine=null,this.titlesInput=e,this.titlesOutput=n}return _(t,[{key:"getInputs",value:function(t){return S.extractNodes(t,this.titlesInput).map(function(t){return{title:t.title,name:t.data.name}})}},{key:"getOutputs",value:function(t){return S.extractNodes(t,this.titlesOutput).map(function(t){return{title:t.title,name:t.data.name}})}},{key:"workerModule",value:function(t,e,n){var r,o,i;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return r=t.data.module.data,o=new S(r,this.titlesInput,this.titlesOutput),i=this.engine.clone(),o.read(e),u.next=6,regeneratorRuntime.awrap(i.process(r,null,o));case 6:o.write(n);case 7:case"end":return u.stop()}},null,this)}},{key:"workerInputs",value:function(t,e,n,r){r&&(n[0]=r.inputs[t.data.name][0])}},{key:"workerOutputs",value:function(t,e,n,r){r&&(r.outputs[t.data.name]=e[0][0])}},{key:"setEngine",value:function(t){this.engine=t}}]),t}(),P=function t(e,n){V(this,t),this.name=e,this.worker=n.worker},$=function(){function t(e){if(V(this,t),this.constructor===t)throw new TypeError("Cannot construct Block instances");this.id=t.incrementId(e),this.position=[0,0],this.width=0,this.height=0,this.style={}}return _(t,null,[{key:"incrementId",value:function(t){return t.latestId?t.latestId++:t.latestId=1,t.latestId}}]),t}(),D=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(V(this,t),"string"!=typeof e)throw new TypeError('Value of argument "html" violates contract.\n\nExpected:\nstring\n\nGot:\n'+r(e));this.html=e,this.parent=null,this.handler=n}return _(t,[{key:"getNode",value:function(){if(null===this.parent)throw new Error("Control isn't added to Node/Input");return this.parent instanceof W?this.parent:this.parent.node}},{key:"getData",value:function(t){return this.getNode().data[t]}},{key:"putData",value:function(t,e){this.getNode().data[t]=e}}]),t}(),J=function(){function t(e,n){V(this,t),this.output=e,this.input=n,this.style={},this.input.addConnection(this)}return _(t,[{key:"remove",value:function(){this.input.removeConnection(this),this.output.removeConnection(this)}}]),t}(),Z=function(){function t(e,n,r){V(this,t),this.el=null,this.node=null,this.multipleConnections=r,this.connections=[],this.title=e,this.socket=n}return _(t,[{key:"removeConnection",value:function(t){if(!(t instanceof J))throw new TypeError('Value of argument "connection" violates contract.\n\nExpected:\nConnection\n\nGot:\n'+o(t));this.connections.splice(this.connections.indexOf(t),1)}}]),t}(),B=function(){function t(e,n,r){if(V(this,t),"string"!=typeof e)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "name" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));if("string"!=typeof r)throw new TypeError('Value of argument "hint" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));this.id=e,this.name=n,this.hint=r,this.compatible=[]}return _(t,[{key:"combineWith",value:function(e){if(!(e instanceof t))throw new TypeError('Value of argument "socket" violates contract.\n\nExpected:\nSocket\n\nGot:\n'+i(e));this.compatible.push(e)}},{key:"compatibleWith",value:function(e){if(!(e instanceof t))throw new TypeError('Value of argument "socket" violates contract.\n\nExpected:\nSocket\n\nGot:\n'+i(e));return this===e||this.compatible.includes(e)}}]),t}(),H=function(t){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(V(this,e),"string"!=typeof t)throw new TypeError('Value of argument "title" violates contract.\n\nExpected:\nstring\n\nGot:\n'+u(t))
-;if(!(n instanceof B))throw new TypeError('Value of argument "socket" violates contract.\n\nExpected:\nSocket\n\nGot:\n'+u(n));if("boolean"!=typeof r)throw new TypeError('Value of argument "multiConns" violates contract.\n\nExpected:\nboolean\n\nGot:\n'+u(r));var o=L(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));return o.control=null,o}return R(e,t),_(e,[{key:"hasConnection",value:function(){return this.connections.length>0}},{key:"addConnection",value:function(t){if(!(t instanceof J))throw new TypeError('Value of argument "connection" violates contract.\n\nExpected:\nConnection\n\nGot:\n'+u(t));if(!this.multipleConnections&&this.hasConnection())throw new Error("Multiple connections not allowed");this.connections.push(t)}},{key:"addControl",value:function(t){if(!(t instanceof D))throw new TypeError('Value of argument "control" violates contract.\n\nExpected:\nControl\n\nGot:\n'+u(t));this.control=t,t.parent=this}},{key:"showControl",value:function(){return!this.hasConnection()&&null!==this.control}},{key:"toJSON",value:function(){return{connections:this.connections.map(function(t){return{node:t.output.node.id,output:t.output.node.outputs.indexOf(t.output)}})}}}]),e}(Z),q=function(t){function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(V(this,e),"string"!=typeof t)throw new TypeError('Value of argument "title" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if(!(n instanceof B))throw new TypeError('Value of argument "socket" violates contract.\n\nExpected:\nSocket\n\nGot:\n'+a(n));if("boolean"!=typeof r)throw new TypeError('Value of argument "multiConns" violates contract.\n\nExpected:\nboolean\n\nGot:\n'+a(r));return L(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r))}return R(e,t),_(e,[{key:"hasConnection",value:function(){return this.connections.length>0}},{key:"connectTo",value:function(t){if(!(t instanceof H))throw new TypeError('Value of argument "input" violates contract.\n\nExpected:\nInput\n\nGot:\n'+a(t));if(!this.socket.compatibleWith(t.socket))throw new Error("Sockets not compatible");if(!t.multipleConnections&&t.hasConnection())throw new Error("Input already has one connection");if(!this.multipleConnections&&this.hasConnection())throw new Error("Output already has one connection");var e=new J(this,t);return this.connections.push(e),e}},{key:"connectedTo",value:function(t){if(!(t instanceof H))throw new TypeError('Value of argument "input" violates contract.\n\nExpected:\nInput\n\nGot:\n'+a(t));return this.connections.some(function(e){return e.input===t})}},{key:"toJSON",value:function(){return{connections:this.connections.map(function(t){return{node:t.input.node.id,input:t.input.node.inputs.indexOf(t.input)}})}}}]),e}(Z),W=function(t){function e(t){if(V(this,e),"string"!=typeof t)throw new TypeError('Value of argument "title" violates contract.\n\nExpected:\nstring\n\nGot:\n'+s(t));var n=L(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,e));n.el=null,n.group=null,n.inputs=[],n.outputs=[],n.controls=[],n.data={},n.readOnly=!1,n.title=t;var r=[180,100];return n.width=r[0],n.height=r[1],n}return R(e,t),_(e,[{key:"addControl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(t instanceof D))throw new TypeError('Value of argument "control" violates contract.\n\nExpected:\nControl\n\nGot:\n'+s(t));if(!(null==e||"number"==typeof e&&!isNaN(e)&&e>=0&&e<=255&&e===Math.floor(e)))throw new TypeError('Value of argument "index" violates contract.\n\nExpected:\n?uint8\n\nGot:\n'+s(e));return t.parent=this,null!==e?this.controls.splice(e,0,t):this.controls.push(t),this}},{key:"addInput",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(t instanceof H))throw new TypeError('Value of argument "input" violates contract.\n\nExpected:\nInput\n\nGot:\n'+s(t));if(!(null==e||"number"==typeof e&&!isNaN(e)&&e>=0&&e<=255&&e===Math.floor(e)))throw new TypeError('Value of argument "index" violates contract.\n\nExpected:\n?uint8\n\nGot:\n'+s(e));if(null!==t.node)throw new Error("Input has already been added to the node");return t.node=this,null!==e?this.inputs.splice(e,0,t):this.inputs.push(t),this}},{key:"addOutput",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(t instanceof q))throw new TypeError('Value of argument "output" violates contract.\n\nExpected:\nOutput\n\nGot:\n'+s(t));if(!(null==e||"number"==typeof e&&!isNaN(e)&&e>=0&&e<=255&&e===Math.floor(e)))throw new TypeError('Value of argument "index" violates contract.\n\nExpected:\n?uint8\n\nGot:\n'+s(e));if(null!==t.node)throw new Error("Output has already been added to the node");return t.node=this,null!==e?this.outputs.splice(e,0,t):this.outputs.push(t),this}},{key:"getConnections",value:function(t){var e=[];return"input"!==t&&t||this.inputs.map(function(t){t.connections.forEach(function(t){e.push(t)})}),"output"!==t&&t||this.outputs.forEach(function(t){t.connections.forEach(function(t){e.push(t)})}),e}},{key:"inputsWithVisibleControl",value:function(){return this.inputs.filter(function(t){return t.showControl()})}},{key:"toJSON",value:function(){return{id:this.id,data:this.data,group:this.group?this.group.id:null,inputs:this.inputs.map(function(t){return t.toJSON()}),outputs:this.outputs.map(function(t){return t.toJSON()}),position:this.position,title:this.title}}}],[{key:"fromJSON",value:function(t,n){var r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(t instanceof K){o.next=2;break}throw new TypeError('Value of argument "component" violates contract.\n\nExpected:\nComponent\n\nGot:\n'+s(t));case 2:if(n instanceof Object){o.next=4;break}throw new TypeError('Value of argument "json" violates contract.\n\nExpected:\nObject\n\nGot:\n'+s(n));case 4:return r=t.newNode(),r.id=n.id,r.data=n.data,e.latestId=Math.max(r.id,e.latestId),r.position=n.position,r.title=n.title,o.next=12,regeneratorRuntime.awrap(t.builder(r));case 12:return o.abrupt("return",r);case 13:case"end":return o.stop()}},null,this)}}]),e}($),z=function(t){var e="";try{var n={};e+='<div class="title">',e+="{{node.title}}</div>",e+="\x3c!-- Outputs--\x3e",e+='<div al-repeat="output in node.outputs" style="text-align: right">',e+='<div class="output-title">',e+="{{output.title}}</div>",e+="<div class=\"socket output {{output.socket.id.toLowerCase().replace(' ','-')}}\" al-pick-output title=\"{{output.socket.name}}\n{{output.socket.hint}}\"></div></div>",e+="\x3c!-- Controls--\x3e",e+='<div class="control" al-repeat="control in node.controls" style="text-align: center" :width="control.parent.width - 2 * control.margin" :height="control.height" al-control="control"></div>',e+="\x3c!-- Inputs--\x3e",e+='<div al-repeat="input in node.inputs" style="text-align: left">',e+="<div class=\"socket input {{input.socket.id.toLowerCase().replace(' ','-')}} {{input.multipleConnections?'multiple':''}}\" al-pick-input title=\"{{input.socket.name}}\n{{input.socket.hint}}\"></div>",e+='<div class="input-title" al-if="!input.showControl()">',e+="{{input.title}}</div>",e+='<div class="input-control" al-if="input.showControl()" al-control="input.control"></div></div>'}catch(t){pug.rethrow(t,void 0,void 0,n[void 0])}return e}(),K=function(t){function e(t,n){V(this,e);var r=L(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.template=n.template||z,r.builder=n.builder,r.created=n.created||function(){},r.destroyed=n.destroyed||function(){},r}return R(e,t),_(e,[{key:"newNode",value:function(){return new W(this.name)}}]),e}(P),F=function(){function t(){V(this,t)}return _(t,null,[{key:"nodesBBox",value:function(t){var e=function(t){return Math.min.apply(Math,M(t))},n=function(t){return Math.max.apply(Math,M(t))},r=e(t.map(function(t){return t.position[0]})),o=e(t.map(function(t){return t.position[1]})),i=n(t.map(function(t){return t.position[0]+t.width})),u=n(t.map(function(t){return t.position[1]+t.height}));return{left:r,right:i,top:o,bottom:u,width:Math.abs(r-i),height:Math.abs(o-u),getCenter:function(){return[(r+i)/2,(o+u)/2]}}}},{key:"isValidData",value:function(t){return"string"==typeof t.id&&this.isValidId(t.id)&&t.nodes instanceof Object&&!(t.nodes instanceof Array)&&(!t.groups||t.groups instanceof Object)}},{key:"isValidId",value:function(t){return/^[\w-]{3,}@[0-9]+\.[0-9]+\.[0-9]+$/.test(t)}},{key:"validate",value:function(t,e){var n="",r=t.split("@"),o=e.id.split("@");return this.isValidData(e)||(n+="Data is not suitable. "),t!==e.id&&(n+="IDs not equal. "),r[0]!==o[0]&&(n+="Names don't match. "),r[1]!==o[1]&&(n+="Versions don't match"),{success:""===n,msg:n}}}]),t}(),Y=function(t){function e(t,n){if(V(this,e),"string"!=typeof t)throw new TypeError('Value of argument "title" violates contract.\n\nExpected:\nstring\n\nGot:\n'+g(t));if(!(n instanceof Object))throw new TypeError('Value of argument "params" violates contract.\n\nExpected:\nObject\n\nGot:\n'+g(n));var r=L(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,e));return r.title=t,r.nodes=[],r.setMinSizes(300,250),n.nodes?r.coverNodes(n.nodes):(r.position=n.position,r.width=n.width,r.height=n.height),r}return R(e,t),_(e,[{key:"setMinSizes",value:function(t,e){this.minWidth=t,this.minHeight=e}},{key:"setWidth",value:function(t){if("number"!=typeof t)throw new TypeError('Value of argument "w" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+g(t));return this.width=Math.max(this.minWidth,t)}},{key:"setHeight",value:function(t){if("number"!=typeof t)throw new TypeError('Value of argument "h" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+g(t));return this.height=Math.max(this.minHeight,t)}},{key:"isCoverNode",value:function(t){if(!(t instanceof W))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+g(t));var e=this.position,n=t.position;return n[0]>e[0]&&n[1]>e[1]&&n[0]+t.width<e[0]+this.width&&n[1]+t.height<e[1]+this.height}},{key:"coverNodes",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return t instanceof W}))throw new TypeError('Value of argument "nodes" violates contract.\n\nExpected:\nNode[]\n\nGot:\n'+g(t));var e=this,n=F.nodesBBox(t);t.forEach(function(t){t.readOnly||(null!==t.group&&t.group.removeNode(t.group),e.addNode(t))}),this.position=[n.left-30,n.top-60],this.setWidth(n.right-n.left+60),this.setHeight(n.bottom-n.top+90)}},{key:"containNode",value:function(t){if(!(t instanceof W))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+g(t));return-1!==this.nodes.indexOf(t)}},{key:"addNode",value:function(t){if(!(t instanceof W))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+g(t));return!this.containNode(t)&&(null!==t.group&&t.group.removeNode(t),t.group=this,this.nodes.push(t),!0)}},{key:"removeNode",value:function(t){if(!(t instanceof W))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+g(t));this.containNode(t)&&(this.nodes.splice(this.nodes.indexOf(t),1),t.group=null)}},{key:"remove",value:function(){this.nodes.forEach(function(t){t.group=null})}},{key:"toJSON",value:function(){return{id:this.id,title:this.title,nodes:this.nodes.map(function(t){return t.id}),minWidth:this.minWidth,minHeight:this.minHeight,position:this.position,width:this.width,height:this.height}}}],[{key:"fromJSON",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "json" violates contract.\n\nExpected:\nObject\n\nGot:\n'+g(t));var n=new e(t.title,{position:t.position,width:t.width,height:t.height});return n.id=t.id,e.latestId=Math.max(n.id,e.latestId),n.minWidth=t.minWidth,n.minHeight=t.minHeight,n}}]),e}($),U=function(){function t(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(V(this,t),!(e instanceof Object))throw new TypeError('Value of argument "items" violates contract.\n\nExpected:\nObject\n\nGot:\n'+E(e));if("boolean"!=typeof n)throw new TypeError('Value of argument "searchBar" violates contract.\n\nExpected:\nboolean\n\nGot:\n'+E(n));this.visible=!1,this.disabled=r,this.x=0,this.y=0,this.default={items:e,searchBar:n,onClick:function(){throw new TypeError("onClick should be overrided")}},this.bindTemplate(k())}return _(t,[{key:"bindTemplate",value:function(t){this.dom=e.select("body").append("div"),this.dom.node().setAttribute("tabindex",1),this.dom.html(t);var r=n.makeInstance();x(this,r),this.$cd=r(this.dom.node(),{contextMenu:this})}},{key:"searchItems",value:function(t){var e=this;if(null!=t&&"string"!=typeof t)throw new TypeError('Value of argument "filter" violates contract.\n\nExpected:\n?string\n\nGot:\n'+E(t));var n=new RegExp(t,"i"),r={};return Object.keys(this.items).forEach(function(t){var o=e.items[t];if(o.constructor===Object){var i=Object.keys(o).filter(function(t){return n.test(t)});i.length>0&&(r[t]={},i.forEach(function(e){r[t][e]=o[e]}))}n.test(t)&&(r[t]=o)}),r}},{key:"haveSubitems",value:function(t){return t.constructor===Object}},{key:"isVisible",value:function(){return this.visible}},{key:"show",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if("number"!=typeof t)throw new TypeError('Value of argument "x" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+E(t));if("number"!=typeof e)throw new TypeError('Value of argument "y" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+E(e));if(!(null==n||n instanceof Object))throw new TypeError('Value of argument "items" violates contract.\n\nExpected:\n?Object\n\nGot:\n'+E(n));if(null!=r&&"boolean"!=typeof r)throw new TypeError('Value of argument "searchBar" violates contract.\n\nExpected:\n?boolean\n\nGot:\n'+E(r));this.disabled||(this.visible=!0,this.items=n||this.default.items,this.searchBar=r||this.default.searchBar,this.onClick=o||this.default.onClick,this.x=t,this.y=e,this.$cd.scan())}},{key:"hide",value:function(){this.visible=!1,this.$cd.scan()}}]),t}(),X=function(t){return parseInt(t)},Q=function(t,e){return t.every(function(t,n){return t===e[n]})},tt=function(t,e){return JSON.stringify(t)===JSON.stringify(e)},et=function(t,e,n){return t.node===e.node&&t[n]===e[n]},nt=function(t,e){return{removed:t.filter(function(t){return!e.some(function(e){return et(t,e,"input")})}),added:e.filter(function(e){return!t.some(function(t){return et(t,e,"input")})})}},rt=function(){function t(e,n){V(this,t),this.a=e,this.b=n}return _(t,[{key:"basicDiffs",value:function(){var t=Object.keys(this.a.nodes),e=Object.keys(this.b.nodes);return{removed:t.filter(function(t){return!e.includes(t)}).map(X),added:e.filter(function(e){return!t.includes(e)}).map(X),stayed:t.filter(function(t){return e.includes(t)}).map(X)}}},{key:"compare",value:function(){var t=this,e=this.basicDiffs(),n=e.removed,r=e.added,o=e.stayed;return{removed:n,added:r,moved:o.filter(function(e){var n=t.a.nodes[e].position,r=t.b.nodes[e].position;return!Q(n,r)}),datachanged:o.filter(function(e){var n=t.a.nodes[e].data,r=t.b.nodes[e].data;return!tt(n,r)}),connects:o.reduce(function(e,n){var r=t.a.nodes[n].outputs,o=t.b.nodes[n].outputs,i=r.map(function(t,e){return Object.assign({output:e},nt(t.connections,o[e].connections))}).filter(function(t){return 0!==t.added.length||0!==t.removed.length});return[].concat(M(e),M(i.map(function(t){return t.node=n,t})))},[])}}}]),t}(),ot={AVALIABLE:0,PROCESSED:1,ABORT:2},it=function(){function t(e,n){if(V(this,t),"string"!=typeof e)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+O(e));if(!Array.isArray(n)||!n.every(function(t){return t instanceof P}))throw new TypeError('Value of argument "components" violates contract.\n\nExpected:\nComponentWorker[]\n\nGot:\n'+O(n));if(!F.isValidId(e))throw new Error("ID should be valid to name@0.1.0 format");this.id=e,this.components=n,this.args=[],this.data=null,this.state=ot.AVALIABLE,this.onAbort=function(){},this.onError=function(t,e){console.error(t,e)}}return _(t,[{key:"clone",value:function(){return new t(this.id,this.components)}},{key:"throwError",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.abort());case 2:return this.onError(t,e),this.processDone(),n.abrupt("return","error");case 5:case"end":return n.stop()}},null,this)}},{key:"extractInputNodes",value:function(t,e){return t.inputs.reduce(function(t,n){return[].concat(M(t),M((n.connections||[]).reduce(function(t,n){return[].concat(M(t),[e[n.node]])},[])))},[])}},{key:"detectRecursions",value:function(t){var e=this,n=function n(r,o){if(o.some(function(t){return t===r}))return r;for(var i=0;i<o.length;i++)if(n(r,e.extractInputNodes(o[i],t)))return r;return null};return Object.keys(t).map(function(e){return t[e]}).map(function(r){return n(r,e.extractInputNodes(r,t))}).filter(function(t){return null!==t})}},{key:"processStart",value:function(){return this.state===ot.AVALIABLE?(this.state=ot.PROCESSED,!0):this.state!==ot.ABORT&&(console.warn("The process is busy and has not been restarted.\n                Use abort() to force it to complete"),!1)}},{key:"processDone",value:function(){var t=this.state!==ot.ABORT;return this.state=ot.AVALIABLE,t||(this.onAbort(),this.onAbort=function(){}),t}},{key:"abort",value:function(){var t=this;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){t.state===ot.PROCESSED?(t.state=ot.ABORT,t.onAbort=e):t.state===ot.ABORT?(t.onAbort(),t.onAbort=e):e()}));case 1:case"end":return e.stop()}},null,this)}},{key:"lock",value:function(t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){t.unlockPool=t.unlockPool||[],t.busy&&!t.outputData?t.unlockPool.push(e):e(),t.busy=!0}));case 1:case"end":return e.stop()}},null,this)}},{key:"unlock",value:function(t){t.unlockPool.forEach(function(t){return t()}),t.unlockPool=[],t.busy=!1}},{key:"extractInputData",value:function(t){var e=this;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(Promise.all(t.inputs.map(function(t){var n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return n=t.connections,o.next=3,regeneratorRuntime.awrap(Promise.all(n.map(function(t){var n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.data.nodes[t.node],o.next=3,regeneratorRuntime.awrap(e.processNode(n));case 3:if(r=o.sent){o.next=8;break}e.abort(),o.next=9;break;case 8:return o.abrupt("return",r[t.output]);case 9:case"end":return o.stop()}},null,e)})));case 3:return r=o.sent,o.abrupt("return",r);case 5:case"end":return o.stop()}},null,e)})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},null,this)}},{key:"processWorker",value:function(t){var e,n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(this.extractInputData(t));case 2:return e=o.sent,n=this.components.find(function(e){return e.name===t.title}),r=t.outputs.map(function(){return null}),o.prev=5,o.next=8,regeneratorRuntime.awrap(n.worker.apply(n,[t,e,r].concat(M(this.args))));case 8:o.next=14;break;case 10:o.prev=10,o.t0=o.catch(5),this.abort(),console.warn(o.t0);case 14:return o.abrupt("return",r);case 15:case"end":return o.stop()}},null,this,[[5,10]])}},{key:"processNode",value:function(t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state!==ot.ABORT&&t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,regeneratorRuntime.awrap(this.lock(t));case 4:return t.outputData||(t.outputData=this.processWorker(t)),this.unlock(t),e.abrupt("return",t.outputData);case 7:case"end":return e.stop()}},null,this)}},{key:"forwardProcess",value:function(t){var e=this;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.state!==ot.ABORT){n.next=2;break}return n.abrupt("return",null);case 2:return n.next=4,regeneratorRuntime.awrap(Promise.all(t.outputs.map(function(t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(Promise.all(t.connections.map(function(t){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.data.nodes[t.node],r.next=3,regeneratorRuntime.awrap(e.processNode(n));case 3:return r.next=5,regeneratorRuntime.awrap(e.forwardProcess(n));case 5:case"end":return r.stop()}},null,e)})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},null,e)})));case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}},null,this)}},{key:"copy",value:function(t){return t=Object.assign({},t),t.nodes=Object.assign({},t.nodes),Object.keys(t.nodes).forEach(function(e){t.nodes[e]=Object.assign({},t.nodes[e])}),t}},{key:"validate",value:function(t){var e,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(e=F.validate(this.id,t),e.success){r.next=5;break}return r.next=4,regeneratorRuntime.awrap(this.throwError(e.msg));case 4:return r.abrupt("return",r.sent);case 5:if(n=this.detectRecursions(t.nodes),!(n.length>0)){r.next=10;break}return r.next=9,regeneratorRuntime.awrap(this.throwError("Recursion detected",n));case 9:return r.abrupt("return",r.sent);case 10:return r.abrupt("return",!0);case 11:case"end":return r.stop()}},null,this)}},{key:"processStartNode",value:function(t){var e;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=10;break}if(e=this.data.nodes[t]){n.next=6;break}return n.next=5,regeneratorRuntime.awrap(this.throwError("Node with such id not found"));case 5:return n.abrupt("return",n.sent);case 6:return n.next=8,regeneratorRuntime.awrap(this.processNode(e));case 8:return n.next=10,regeneratorRuntime.awrap(this.forwardProcess(e));case 10:case"end":return n.stop()}},null,this)}},{key:"processUnreachable",value:function(){var t,e;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=regeneratorRuntime.keys(this.data.nodes);case 1:if((n.t1=n.t0()).done){n.next=11;break}if(t=n.t1.value,void 0!==this.data.nodes[t].outputData){n.next=9;break}return e=this.data.nodes[t],n.next=7,regeneratorRuntime.awrap(this.processNode(e));case 7:return n.next=9,regeneratorRuntime.awrap(this.forwardProcess(e));case 9:n.next=1;break;case 11:case"end":return n.stop()}},null,this)}},{key:"process",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(t instanceof Object){n.next=2;break}throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+O(t));case 2:if(null==e||"number"==typeof e){n.next=4;break}throw new TypeError('Value of argument "startId" violates contract.\n\nExpected:\n?number\n\nGot:\n'+O(e));case 4:if(this.processStart()){n.next=6;break}return n.abrupt("return");case 6:if(this.validate(t)){n.next=8;break}return n.abrupt("return");case 8:return this.data=this.copy(t),this.args=r,n.next=12,regeneratorRuntime.awrap(this.processStartNode(e));case 12:return n.next=14,regeneratorRuntime.awrap(this.processUnreachable());case 14:return n.abrupt("return",this.processDone()?"success":"aborted");case 15:case"end":return n.stop()}},null,this)}}]),t}(),ut=function(){function t(){V(this,t)}return _(t,null,[{key:"getInputPosition",value:function(t){var e=t.node,n=t.el;return[e.position[0]+n.offsetLeft+n.offsetWidth/2,e.position[1]+n.offsetTop+n.offsetHeight/2]}},{key:"getOutputPosition",value:function(t){var e=t.node,n=t.el;return[e.position[0]+n.offsetLeft+n.offsetWidth/2,e.position[1]+n.offsetTop+n.offsetHeight/2]}},{key:"getConnectionPath",value:function(t,n,r,o){var i=r.apply(void 0,M(t).concat(M(n),[o])),u=i.points,a=i.curve;switch(a){case"linear":a=e.curveLinear;break;case"step":a=e.curveStep;break;case"basis":default:a=e.curveBasis}return this.pointsToPath(u,a)}},{key:"pointsToPath",value:function(t,n){var r=n(e.path());r.lineStart();for(var o=0;o<t.length;o++)r.point.apply(r,M(t[o]));return r.lineEnd(),r._context.toString()}}]),t}(),at=function t(e,n){V(this,t),this.connection=null,this.input=n,this.output=e},st=function(){function t(n,r,o){if(V(this,t),!(n instanceof dt))throw new TypeError('Value of argument "editor" violates contract.\n\nExpected:\nNodeEditor\n\nGot:\n'+N(n));if(!(r instanceof HTMLElement))throw new TypeError('Value of argument "container" violates contract.\n\nExpected:\nHTMLElement\n\nGot:\n'+N(r));if(!(null==o||o instanceof U))throw new TypeError('Value of argument "menu" violates contract.\n\nExpected:\n?ContextMenu\n\nGot:\n'+N(o));this.editor=n,this.pickedOutput=null,this.container=e.select(r).attr("tabindex",1),this.mouse=[0,0],this.transform=e.zoomIdentity,this.contextMenu=o||new U({},!0,!0),this.initView(),this.initial()}return _(t,[{key:"initial",value:function(){this.setScaleExtent(.1,1);var t=Math.pow(2,12);this.setTranslateExtent(-t,-t,t,t)}},{key:"initView",value:function(){var t=this;this.container.on("click",function(){t.container.node()===e.event.target&&t.areaClick()}),this.view=this.container.append("div").style("transform-origin","0 0").style("width",1).style("height",1),this.zoom=e.zoom().on("zoom",function(){t.transform=e.event.transform,t.update(),t.editor.eventListener.trigger("transform",t.transform)}),this.container.call(this.zoom),e.select(window).on("mousemove.d3ne"+this.editor._id,function(){var n=t.transform.k,r=e.mouse(t.view.node());t.mouse=[r[0]/n,r[1]/n],t.update()}).on("keydown.d3ne"+this.editor._id,function(e){t.container.node()===document.activeElement&&t.editor.keyDown(e)}).on("resize.d3ne"+this.editor._id,this.resize.bind(this)),this.view.html(j()),this.initAlight()}},{key:"initAlight",value:function(){var t=n.makeInstance();b(this,t),this.$cd=t(this.view.node(),{editor:this.editor})}},{key:"getTemplate",value:function(t){var e=this.editor.components.find(function(e){return e.name===t.title});if(!e)throw new Error('Component not found. Make sure you have defined \n                            the component with the "'+t.title+'" name');return e.template}},{key:"resize",value:function(){var t=this.container.node().parentElement.clientWidth,e=this.container.node().parentElement.clientHeight;this.container.style("width",t+"px").style("height",e+"px"),this.update()}},{key:"connectionProducer",value:function(t,e,n,r){var o=.3*Math.abs(t-n),i=.1*(r-e);return{points:[[t,e],[t+o,e+i],[n-o,r-i],[n,r]],curve:"basis"}}},{key:"updateConnections",value:function(){var t=this,e=[];if(this.editor.nodes.forEach(function(n){n.getConnections("output").forEach(function(n){var r=n.output,o=n.input;if(o.el){var i=new at(r,o);i.connection=n,e.push({connection:n,d:ut.getConnectionPath(ut.getOutputPosition(r),ut.getInputPosition(o),t.connectionProducer,i)})}})}),null!==this.pickedOutput&&this.pickedOutput.el){var n=this.pickedOutput,r=this.mouse,o=new at(n,r);e.push({selected:!0,d:ut.getConnectionPath(ut.getOutputPosition(n),r,this.connectionProducer,o)})}this.editor.paths=e}},{key:"update",value:function(){var t=this.transform;this.view.style("transform","translate("+t.x+"px, "+t.y+"px) scale("+t.k+")"),this.updateConnections(),this.$cd.scan()}},{key:"assignContextMenuHandler",value:function(){var t=this;this.contextMenu.default.onClick=function(e){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e instanceof K)){r.next=8;break}return n=e.newNode(),r.next=4,regeneratorRuntime.awrap(e.builder(n));case 4:t.editor.addNode(n,!0),t.editor.selectNode(n),r.next=9;break;case 8:e();case 9:t.contextMenu.hide();case 10:case"end":return r.stop()}},null,t)}}},{key:"areaClick",value:function(){this.editor.readOnly||(null===this.pickedOutput||e.event.ctrlKey?this.contextMenu.visible?this.contextMenu.hide():(this.assignContextMenuHandler(),this.contextMenu.show(e.event.pageX,e.event.pageY)):this.pickedOutput=null,this.update())}},{key:"zoomAt",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return t instanceof W}))throw new TypeError('Value of argument "nodes" violates contract.\n\nExpected:\nNode[]\n\nGot:\n'+N(t));if(0!==t.length){var e=[this.container.node().clientWidth,this.container.node().clientHeight],n=e[0],r=e[1],o=F.nodesBBox(t),i=n/o.width,u=r/o.height,a=.9*Math.min(u,i,1),s=o.getCenter();this.translate(n/2-s[0]*a,r/2-s[1]*a),this.scale(a)}}},{key:"translate",value:function(t,e){this.transform.x=t,this.transform.y=e,this.update()}},{key:"scale",value:function(t){this.transform.k=t,this.update()}},{key:"setScaleExtent",value:function(t,e){if("number"!=typeof t)throw new TypeError('Value of argument "scaleMin" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+N(t));if("number"!=typeof e)throw new TypeError('Value of argument "scaleMax" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+N(e));this.scaleExtent=[t,e],this.zoom.scaleExtent(this.scaleExtent)}},{key:"setTranslateExtent",value:function(t,e,n,r){if("number"!=typeof t)throw new TypeError('Value of argument "left" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+N(t));if("number"!=typeof e)throw new TypeError('Value of argument "top" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+N(e));if("number"!=typeof n)throw new TypeError('Value of argument "right" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+N(n));if("number"!=typeof r)throw new TypeError('Value of argument "bottom" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+N(r));this.translateExtent=[[t,e],[n,r]],this.zoom.translateExtent(this.translateExtent)}},{key:"destroy",value:function(){e.select(window).on("mousemove.d3ne"+this.editor._id,null).on("keydown.d3ne"+this.editor._id,null).on("resize.d3ne"+this.editor._id,null)}}]),t}(),ct=function(){function t(){V(this,t),this.events={nodecreate:[],groupcreate:[],connectioncreate:[],noderemove:[],groupremove:[],connectionremove:[],nodeselect:[],groupselect:[],error:[console.warn],change:[],transform:[]},this.persistent=!0}return _(t,[{key:"on",value:function(t,e){var n=this;if("string"!=typeof t)throw new TypeError('Value of argument "names" violates contract.\n\nExpected:\nstring\n\nGot:\n'+T(t));if("function"!=typeof e)throw new TypeError('Value of argument "handler" violates contract.\n\nExpected:\n() => {}\n\nGot:\n'+T(e));return t.split(" ").forEach(function(t){if(!n.events[t])throw new Error("The event "+t+" does not exist");n.events[t].push(e)}),this}},{key:"trigger",value:function(t,e){var n=this;if("string"!=typeof t)throw new TypeError('Value of argument "name" violates contract.\n\nExpected:\nstring\n\nGot:\n'+T(t));if(!(t in this.events))throw new Error("The event "+t+" cannot be triggered");return this.events[t].reduce(function(t,r){return!1!==r(e,n.persistent)&&t},!0)}}]),t}(),lt=function t(e,n,r){V(this,t),this.exec=function(){e.apply(void 0,M(r))},this.undo=function(){n.apply(void 0,M(r))},this.a=r[0]},ft=function(){function t(e){V(this,t),this.editor=e,this.list=[],this._locked=!1,this.position=-1}return _(t,[{key:"add",value:function(t,e,n){this._locked||(this.position++,this.list.splice(this.position),this.list.push(new lt(t,e,n)))}},{key:"undo",value:function(){this.position<0||(this._locked=!0,this.list[this.position--].undo(),this._locked=!1)}},{key:"redo",value:function(){this.position+1>=this.list.length||(this._locked=!0,this.list[++this.position].exec(),this._locked=!1)}}]),t}(),ht=function(){function t(){V(this,t),this.list=[]}return _(t,[{key:"add",
+!function(t){"use strict";function e(t,e,n,o){var i=e&&e.prototype instanceof r?e:r,u=Object.create(i.prototype),a=new h(o||[]);return u._invoke=s(t,n,a),u}function n(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function r(){}function o(){}function i(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function a(t){function e(r,o,i,u){var a=n(t[r],t,o);if("throw"!==a.type){var s=a.arg,c=s.value;return c&&"object"==typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,i,u)},function(t){e("throw",t,i,u)}):Promise.resolve(c).then(function(t){s.value=t,i(s)},u)}u(a.arg)}function r(t,n){function r(){return new Promise(function(r,o){e(t,n,r,o)})}return o=o?o.then(r,r):r()}var o;this._invoke=r}function s(t,e,r){var o=O;return function(i,u){if(o===N)throw new Error("Generator is already running");if(o===T){if("throw"===i)throw u;return p()}for(r.method=i,r.arg=u;;){var a=r.delegate;if(a){var s=c(a,r);if(s){if(s===A)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===O)throw o=T,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=N;var l=n(t,e,r);if("normal"===l.type){if(o=r.done?T:j,l.arg===A)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=T,r.method="throw",r.arg=l.arg)}}}function c(t,e){var r=t.iterator[e.method];if(r===v){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=v,c(t,e),"throw"===e.method))return A;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var o=n(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,A;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=v),e.delegate=null,A):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,A)}function l(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}function d(t){if(t){var e=t[w];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(y.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=v,e.done=!0,e};return r.next=r}}return{next:p}}function p(){return{value:v,done:!0}}var v,m=Object.prototype,y=m.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},w=g.iterator||"@@iterator",b=g.asyncIterator||"@@asyncIterator",x=g.toStringTag||"@@toStringTag",k="object"==typeof module,E=t.regeneratorRuntime;if(E)return void(k&&(module.exports=E));E=t.regeneratorRuntime=k?module.exports:{},E.wrap=e;var O="suspendedStart",j="suspendedYield",N="executing",T="completed",A={},G={};G[w]=function(){return this};var C=Object.getPrototypeOf,V=C&&C(C(d([])));V&&V!==m&&y.call(V,w)&&(G=V);var _=i.prototype=r.prototype=Object.create(G);o.prototype=_.constructor=i,i.constructor=o,i[x]=o.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,i):(t.__proto__=i,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(_),t},E.awrap=function(t){return{__await:t}},u(a.prototype),a.prototype[b]=function(){return this},E.AsyncIterator=a,E.async=function(t,n,r,o){var i=new a(e(t,n,r,o));return E.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},u(_),_[x]="Generator",_[w]=function(){return this},_.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},E.values=d,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=v)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var u=y.call(o,"catchLoc"),a=y.call(o,"finallyLoc");if(u&&a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,A):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),A},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),A}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;f(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=v),A}}}(function(){return this}()||Function("return this")()),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3"),require("alight")):"function"==typeof define&&define.amd?define(["exports","d3","alight"],e):e(t.D3NE={},t.d3,t.alight)}(this,function(t,e,n){"use strict";function r(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=r(t[0],e);return t.every(function(t){return r(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return r(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+r(t[n],e)+";"}).join("\n  "+i);return o.length>=15&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}function o(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=o(t[0],e);return t.every(function(t){return o(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return o(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var i="  ".repeat(e-1),u=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+o(t[n],e)+";"}).join("\n  "+i);return r.length>=15&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}function i(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=i(t[0],e);return t.every(function(t){return i(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return i(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),u=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+i(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(u+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+u+"\n"+o+"}":"{\n  "+o+u+"\n"+o+"}"}function u(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=u(t[0],e);return t.every(function(t){return u(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return u(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+u(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function a(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=a(t[0],e);return t.every(function(t){return a(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return a(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function s(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=s(t[0],e);return t.every(function(t){return s(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return s(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+s(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function c(t,n,r,o){function i(t,e,n){var r=this.editor.view.translateExtent,o=r[0][0],i=r[0][1],u=r[1][0],a=r[1][1];t.position[0]=Math.min(u,Math.max(o,t.position[0]+e)),t.position[1]=Math.min(a,Math.max(i,t.position[1]+n))}var u=this,a=o.changeDetector.locals.group;a.el=n,o.watch("group.style",function(){Object.assign(n.style,a.style)},{deep:!0}),e.select(n).call(e.drag().on("start",function(){e.event.sourceEvent.shiftKey||u.editor.selectGroup(a,e.event.sourceEvent.ctrlKey)}).on("drag",function(){if(!u.editor.readOnly){var t=u.transform.k,n=e.event.dx/t,r=e.event.dy/t;u.editor.selected.each(function(t){i.call(u,t,n,r)}),u.editor.selected.eachGroup(function(t){for(var e in t.nodes){var o=t.nodes[e];u.editor.selected.contains(o)||i.call(u,o,n,r)}}),u.update()}}).on("end",function(){u.editor.eventListener.trigger("change")}));var s={"Remove group":function(){u.editor.removeGroup(a)}},c=function(t){t.call(u),u.contextMenu.hide()};e.select(n).on("contextmenu",function(){if(!u.editor.readOnly){var t=e.event.clientX,n=e.event.clientY;u.editor.selectGroup(a),u.contextMenu.show(t,n,s,!1,c),e.event.preventDefault()}})}function l(t,n,r,o){function i(t,e,n,o,i){0!==e&&(s[0]=t[0]),0!==n&&(s[1]=t[1]),r.match("l")?(a.position[0]+=Math.min(e,o),a.setWidth(a.width-o)):r.match("r")&&a.setWidth(a.width+o),r.match("t")?(a.position[1]+=Math.min(n,i),a.setHeight(a.height-i)):r.match("b")&&a.setHeight(a.height+i)}var u=this,a=o.changeDetector.locals.group,s=null;e.select(n).call(e.drag().on("start",function(){s=e.mouse(u.container.node()),u.editor.selectGroup(a)}).on("drag",function(){if(!u.editor.readOnly){var t=e.zoomTransform(u.container),n=e.mouse(u.container.node()),r=(n[0]-s[0])/t.k,o=(n[1]-s[1])/t.k;i(n,Math.max(0,a.width-a.minWidth),Math.max(0,a.height-a.minHeight),r,o),u.update()}}).on("end",function(){u.editor.nodes.forEach(function(t){a.isCoverNode(t)?a.addNode(t):a.removeNode(t)}),u.editor.eventListener.trigger("change"),u.update()}))}function f(t,n,r,o){var i=o.changeDetector.locals.group;e.select(n).on("click",function(){var t=prompt("Please enter title of the group",i.title);null!==t&&t.length>0&&(i.title=t),o.scan()})}function h(t,n,r,o){function i(){if(null===this.pickedOutput)return s.hasConnection()&&(this.pickedOutput=s.connections[0].output,this.editor.removeConnection(s.connections[0])),this.update(),!0}function u(){var t=this;if(!s.multipleConnections&&s.hasConnection()&&this.editor.removeConnection(s.connections[0]),!this.pickedOutput.multipleConnections&&this.pickedOutput.hasConnection()&&this.editor.removeConnection(this.pickedOutput.connections[0]),this.pickedOutput.connectedTo(s)){var e=s.connections.find(function(e){return e.output===t.pickedOutput});this.editor.removeConnection(e)}this.editor.connect(this.pickedOutput,s)}var a=this,s=o.changeDetector.locals.input;s.el=n;var c=!1;e.select(n).on("mouseleave",function(){return c=!1}),e.select(n).on("mousedown mouseup",function(){a.editor.readOnly||c||(e.event.preventDefault(),e.event.stopPropagation(),i.call(a)||(u.call(a),a.pickedOutput=null,a.update()))}),e.select(n).on("mousedown.prevent",function(){return c=!0})}function d(t,n,r,o){var i=this,u=o.changeDetector.locals.output;u.el=n,e.select(n).on("mousedown",function(){i.editor.readOnly||(e.event.stopPropagation(),i.pickedOutput=u)})}function p(t,e,n){t.dataset.inputNode=e.node.id,t.dataset.inputIndex=e.node.inputs.indexOf(e),t.dataset.outputNode=n.node.id,t.dataset.outputIndex=n.node.outputs.indexOf(n),t.className.baseVal+=" output-"+n.socket.id.toLowerCase().replaceAll(" ","-"),t.className.baseVal+=" input-"+e.socket.id.toLowerCase().replaceAll(" ","-")}function v(t,e,n,r){var o=r.changeDetector.locals.path,i=o.connection;if(i){i.el=e,r.watch("path.connection.style",function(){Object.assign(e.style,i.style)},{deep:!0});var u=o.connection.input,a=o.connection.output;p(e,u,a)}}function m(t,e,n,r){var o=r.changeDetector.locals,i=o.input?o.input.control:o.control;e.innerHTML=i.html,i.handler(e.children[0],i)}function y(t,n,r,o){var i=this,u=o.changeDetector.locals,a=u.subitem||u.item,s=a.constructor===Object;e.select(n).on("click",function(){s||i.onClick(a),e.event.stopPropagation()}).classed("have-subitems",s)}function g(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=g(t[0],e);return t.every(function(t){return g(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return g(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+g(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function w(t,n,r,o){function i(t,e,n){var r=this.editor.view.translateExtent,o=r[0][0],i=r[0][1],u=r[1][0],a=r[1][1];t.position[0]=Math.min(u,Math.max(o,t.position[0]+e)),t.position[1]=Math.min(a,Math.max(i,t.position[1]+n))}var u=this,a=o.changeDetector.locals.node;a.el=n,o.watch("node.style",function(){Object.assign(n.style,a.style)},{deep:!0}),e.select(n).call(e.drag().on("start",function(){e.select(n).raise(),e.event.sourceEvent.shiftKey||u.editor.selectNode(a,e.event.sourceEvent.ctrlKey)}).on("drag",function(){if(!u.editor.readOnly&&!a.readOnly){var t=u.transform.k,n=e.event.dx/t,r=e.event.dy/t;u.editor.selected.each(function(t){i.call(u,t,n,r)}),u.editor.selected.eachGroup(function(t){for(var e in t.nodes){var o=t.nodes[e];u.editor.selected.contains(o)||i.call(u,o,n,r)}}),u.update()}}).on("end",function(){u.editor.groups.forEach(function(t){u.editor.selected.eachNode(function(e){var n=t.containNode(e),r=t.isCoverNode(e);n&&!r?t.removeNode(e):!n&&r&&t.addNode(e)})}),u.editor.eventListener.trigger("change"),u.update()})),window.addEventListener("load",function(){a.width=n.offsetWidth,a.height=n.offsetHeight});var s={"Remove node":function(){u.editor.removeNode(a)},"Add to group":function(){var t=new Y("Group",{nodes:[a]});u.editor.addGroup(t)}},c=function(t){t.call(u),u.contextMenu.hide()};e.select(n).on("contextmenu",function(){if(!u.editor.readOnly&&!a.readOnly){var t=e.event.clientX,n=e.event.clientY;u.editor.selectNode(a),u.contextMenu.show(t,n,s,!1,c),e.event.preventDefault()}})}function b(t,e){e.directives.al.node=w.bind(t),e.directives.al.group=c.bind(t),e.directives.al.groupHandler=l.bind(t),e.directives.al.groupTitle=f.bind(t),e.directives.al.pickInput=h.bind(t),e.directives.al.pickOutput=d.bind(t),e.directives.al.control=m.bind(t),e.directives.al.connection=v.bind(t)}function x(t,e){e.directives.al.item=y.bind(t)}function k(t){var e="";try{var n={};e+='<div class="context-menu" :style.left="contextMenu.x+&quot;px&quot;" :style.top="contextMenu.y+&quot;px&quot;" @mouseleave="contextMenu.hide()" al-if="contextMenu.visible">',e+='<div class="search item" al-if="contextMenu.searchBar">',e+='<input al-value="filter"></div>',e+='<div class="item" al-repeat="(name,item) in contextMenu.searchItems(filter)" al-item>',e+="{{name}}",e+='<div class="subitems" al-if="contextMenu.haveSubitems(item)">',e+='<div class="item" al-repeat="(name,subitem) in item" al-item>',e+="{{name}}</div></div></div></div>"}catch(t){pug.rethrow(t,void 0,void 0,n[void 0])}return e}function E(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=E(t[0],e);return t.every(function(t){return E(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return E(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+E(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function O(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=O(t[0],e);return t.every(function(t){return O(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return O(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+O(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function j(t){var e="";try{var n={};e+="\x3c!-- Groups--\x3e",e+='<div class="group" al-repeat="group in editor.groups" :style.transform="&quot;translate(&quot;+group.position[0]+&quot;px,&quot;+group.position[1]+&quot;px)&quot;" :style.width="group.width+&quot;px&quot;" :style.height="group.height+&quot;px&quot;" al-group :class.selected="editor.selected.contains(group)">',e+='<div class="group-title" al-group-title>',e+="{{group.title}}</div>",e+='<div class="group-handler right bottom" al-group-handler="rb"></div>',e+='<div class="group-handler left top" al-group-handler="lt"></div>',e+='<div class="group-handler left bottom" al-group-handler="lb"></div>',e+='<div class="group-handler right top" al-group-handler="rt"></div></div>',e+="\x3c!-- Connections--\x3e",e+='<svg class="connections">',e+='<path class="connection" al-repeat="path in editor.paths" :d="path.d" al-connection :class.selected="path.selected"></path></svg>',e+="\x3c!-- Nodes--\x3e",e+="<div class=\"node {{editor.selected.contains(node)?'selected':''}} {{node.title.toLowerCase().replaceAll(' ','-')}}\" al-repeat=\"node in editor.nodes\" :style.transform=\"&quot;translate(&quot;+node.position[0]+&quot;px,&quot;+node.position[1]+&quot;px)&quot;\" al-node :data-id=\"node.id\">",e+='<div al-html="editor.view.getTemplate(node)"></div></div>'}catch(t){pug.rethrow(t,void 0,void 0,n[void 0])}return e}function N(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=N(t[0],e);return t.every(function(t){return N(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return N(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+N(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function T(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=T(t[0],e);return t.every(function(t){return T(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return T(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+T(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function A(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=A(t[0],e);return t.every(function(t){return A(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return A(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+A(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}function G(t,e){if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":C(t);if(Array.isArray(t)){if(t.length>0){if(e>4)return"[...]";var n=G(t[0],e);return t.every(function(t){return G(t,e)===n})?n.trim()+"[]":"["+t.slice(0,15).map(function(t){return G(t,e)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var r=Object.keys(t);if(!r.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>4)return"{...}";var o="  ".repeat(e-1),i=r.slice(0,15).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+G(t[n],e)+";"}).join("\n  "+o);return r.length>=15&&(i+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+i+"\n"+o+"}":"{\n  "+o+i+"\n"+o+"}"}var C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),R=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},L=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},M=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},S=function(){function t(e,n,r){V(this,t);var o=t.extractNodes(e,n),i=t.extractNodes(e,r);this.inputs=[],this.outputs=[],this.keys={input:o.map(function(t){return t.data.name}),output:i.map(function(t){return t.data.name})}}return _(t,[{key:"read",value:function(t){var e=this;this.keys.input.forEach(function(n,r){e.inputs[n]=t[r]})}},{key:"write",value:function(t){var e=this;this.keys.output.forEach(function(n,r){t[r]=e.outputs[n]})}}],[{key:"extractNodes",value:function(t,e){return Object.keys(t.nodes).filter(function(n){return e.includes(t.nodes[n].title)}).map(function(e){return t.nodes[e]}).sort(function(t,e){return t.position[1]>e.position[1]})}}]),t}(),I=function(){function t(e,n){V(this,t),this.engine=null,this.titlesInput=e,this.titlesOutput=n}return _(t,[{key:"getInputs",value:function(t){return S.extractNodes(t,this.titlesInput).map(function(t){return{title:t.title,name:t.data.name}})}},{key:"getOutputs",value:function(t){return S.extractNodes(t,this.titlesOutput).map(function(t){return{title:t.title,name:t.data.name}})}},{key:"workerModule",value:function(t,e,n){var r,o,i;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return r=t.data.module.data,o=new S(r,this.titlesInput,this.titlesOutput),i=this.engine.clone(),o.read(e),u.next=6,regeneratorRuntime.awrap(i.process(r,null,o));case 6:o.write(n);case 7:case"end":return u.stop()}},null,this)}},{key:"workerInputs",value:function(t,e,n,r){r&&(n[0]=r.inputs[t.data.name][0])}},{key:"workerOutputs",value:function(t,e,n,r){r&&(r.outputs[t.data.name]=e[0][0])}},{key:"setEngine",value:function(t){this.engine=t}}]),t}(),P=function t(e,n){V(this,t),this.name=e,this.worker=n.worker},$=function(){function t(e){if(V(this,t),this.constructor===t)throw new TypeError("Cannot construct Block instances");this.id=t.incrementId(e),this.position=[0,0],this.width=0,this.height=0,this.style={}}return _(t,null,[{key:"incrementId",value:function(t){return t.latestId?t.latestId++:t.latestId=1,t.latestId}}]),t}(),D=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(V(this,t),"string"!=typeof e)throw new TypeError('Value of argument "html" violates contract.\n\nExpected:\nstring\n\nGot:\n'+r(e));this.html=e,this.parent=null,this.handler=n}return _(t,[{key:"getNode",value:function(){if(null===this.parent)throw new Error("Control isn't added to Node/Input");return this.parent instanceof W?this.parent:this.parent.node}},{key:"getData",value:function(t){return this.getNode().data[t]}},{key:"putData",value:function(t,e){this.getNode().data[t]=e}}]),t}(),J=function(){function t(e,n){V(this,t),this.output=e,this.input=n,this.style={},this.input.addConnection(this)}return _(t,[{key:"remove",value:function(){this.input.removeConnection(this),this.output.removeConnection(this)}}]),t}(),Z=function(){function t(e,n,r){V(this,t),this.el=null,this.node=null,this.multipleConnections=r,this.connections=[],this.title=e,this.socket=n}return _(t,[{key:"removeConnection",value:function(t){if(!(t instanceof J))throw new TypeError('Value of argument "connection" violates contract.\n\nExpected:\nConnection\n\nGot:\n'+o(t));this.connections.splice(this.connections.indexOf(t),1)}}]),t}(),B=function(){function t(e,n,r){if(V(this,t),"string"!=typeof e)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "name" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));if("string"!=typeof r)throw new TypeError('Value of argument "hint" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));this.id=e,this.name=n,this.hint=r,this.compatible=[]}return _(t,[{key:"combineWith",value:function(e){if(!(e instanceof t))throw new TypeError('Value of argument "socket" violates contract.\n\nExpected:\nSocket\n\nGot:\n'+i(e));this.compatible.push(e)}},{key:"compatibleWith",value:function(e){if(!(e instanceof t))throw new TypeError('Value of argument "socket" violates contract.\n\nExpected:\nSocket\n\nGot:\n'+i(e));return this===e||this.compatible.includes(e)}}]),t}(),H=function(t){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(V(this,e),"string"!=typeof t)throw new TypeError('Value of argument "title" violates contract.\n\nExpected:\nstring\n\nGot:\n'+u(t))
+;if(!(n instanceof B))throw new TypeError('Value of argument "socket" violates contract.\n\nExpected:\nSocket\n\nGot:\n'+u(n));if("boolean"!=typeof r)throw new TypeError('Value of argument "multiConns" violates contract.\n\nExpected:\nboolean\n\nGot:\n'+u(r));var o=L(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));return o.control=null,o}return R(e,t),_(e,[{key:"hasConnection",value:function(){return this.connections.length>0}},{key:"addConnection",value:function(t){if(!(t instanceof J))throw new TypeError('Value of argument "connection" violates contract.\n\nExpected:\nConnection\n\nGot:\n'+u(t));if(!this.multipleConnections&&this.hasConnection())throw new Error("Multiple connections not allowed");this.connections.push(t)}},{key:"addControl",value:function(t){if(!(t instanceof D))throw new TypeError('Value of argument "control" violates contract.\n\nExpected:\nControl\n\nGot:\n'+u(t));this.control=t,t.parent=this}},{key:"showControl",value:function(){return!this.hasConnection()&&null!==this.control}},{key:"toJSON",value:function(){return{connections:this.connections.map(function(t){return{node:t.output.node.id,output:t.output.node.outputs.indexOf(t.output)}})}}}]),e}(Z),q=function(t){function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(V(this,e),"string"!=typeof t)throw new TypeError('Value of argument "title" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if(!(n instanceof B))throw new TypeError('Value of argument "socket" violates contract.\n\nExpected:\nSocket\n\nGot:\n'+a(n));if("boolean"!=typeof r)throw new TypeError('Value of argument "multiConns" violates contract.\n\nExpected:\nboolean\n\nGot:\n'+a(r));return L(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r))}return R(e,t),_(e,[{key:"hasConnection",value:function(){return this.connections.length>0}},{key:"connectTo",value:function(t){if(!(t instanceof H))throw new TypeError('Value of argument "input" violates contract.\n\nExpected:\nInput\n\nGot:\n'+a(t));if(!this.socket.compatibleWith(t.socket))throw new Error("Sockets not compatible");if(!t.multipleConnections&&t.hasConnection())throw new Error("Input already has one connection");if(!this.multipleConnections&&this.hasConnection())throw new Error("Output already has one connection");var e=new J(this,t);return this.connections.push(e),e}},{key:"connectedTo",value:function(t){if(!(t instanceof H))throw new TypeError('Value of argument "input" violates contract.\n\nExpected:\nInput\n\nGot:\n'+a(t));return this.connections.some(function(e){return e.input===t})}},{key:"toJSON",value:function(){return{connections:this.connections.map(function(t){return{node:t.input.node.id,input:t.input.node.inputs.indexOf(t.input)}})}}}]),e}(Z),W=function(t){function e(t){if(V(this,e),"string"!=typeof t)throw new TypeError('Value of argument "title" violates contract.\n\nExpected:\nstring\n\nGot:\n'+s(t));var n=L(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,e));n.el=null,n.group=null,n.inputs=[],n.outputs=[],n.controls=[],n.data={},n.readOnly=!1,n.title=t;var r=[180,100];return n.width=r[0],n.height=r[1],n}return R(e,t),_(e,[{key:"addControl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(t instanceof D))throw new TypeError('Value of argument "control" violates contract.\n\nExpected:\nControl\n\nGot:\n'+s(t));if(!(null==e||"number"==typeof e&&!isNaN(e)&&e>=0&&e<=255&&e===Math.floor(e)))throw new TypeError('Value of argument "index" violates contract.\n\nExpected:\n?uint8\n\nGot:\n'+s(e));return t.parent=this,null!==e?this.controls.splice(e,0,t):this.controls.push(t),this}},{key:"addInput",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(t instanceof H))throw new TypeError('Value of argument "input" violates contract.\n\nExpected:\nInput\n\nGot:\n'+s(t));if(!(null==e||"number"==typeof e&&!isNaN(e)&&e>=0&&e<=255&&e===Math.floor(e)))throw new TypeError('Value of argument "index" violates contract.\n\nExpected:\n?uint8\n\nGot:\n'+s(e));if(null!==t.node)throw new Error("Input has already been added to the node");return t.node=this,null!==e?this.inputs.splice(e,0,t):this.inputs.push(t),this}},{key:"addOutput",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(t instanceof q))throw new TypeError('Value of argument "output" violates contract.\n\nExpected:\nOutput\n\nGot:\n'+s(t));if(!(null==e||"number"==typeof e&&!isNaN(e)&&e>=0&&e<=255&&e===Math.floor(e)))throw new TypeError('Value of argument "index" violates contract.\n\nExpected:\n?uint8\n\nGot:\n'+s(e));if(null!==t.node)throw new Error("Output has already been added to the node");return t.node=this,null!==e?this.outputs.splice(e,0,t):this.outputs.push(t),this}},{key:"getConnections",value:function(t){var e=[];return"input"!==t&&t||this.inputs.map(function(t){t.connections.forEach(function(t){e.push(t)})}),"output"!==t&&t||this.outputs.forEach(function(t){t.connections.forEach(function(t){e.push(t)})}),e}},{key:"inputsWithVisibleControl",value:function(){return this.inputs.filter(function(t){return t.showControl()})}},{key:"toJSON",value:function(){return{id:this.id,data:this.data,group:this.group?this.group.id:null,inputs:this.inputs.map(function(t){return t.toJSON()}),outputs:this.outputs.map(function(t){return t.toJSON()}),position:this.position,title:this.title}}}],[{key:"fromJSON",value:function(t,n){var r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(t instanceof K){o.next=2;break}throw new TypeError('Value of argument "component" violates contract.\n\nExpected:\nComponent\n\nGot:\n'+s(t));case 2:if(n instanceof Object){o.next=4;break}throw new TypeError('Value of argument "json" violates contract.\n\nExpected:\nObject\n\nGot:\n'+s(n));case 4:return r=t.newNode(),r.id=n.id,r.data=n.data,e.latestId=Math.max(r.id,e.latestId),r.position=n.position,r.title=n.title,o.next=12,regeneratorRuntime.awrap(t.builder(r));case 12:return o.abrupt("return",r);case 13:case"end":return o.stop()}},null,this)}}]),e}($),z=function(t){var e="";try{var n={};e+='<div class="title">',e+="{{node.title}}</div>",e+="\x3c!-- Outputs--\x3e",e+='<div al-repeat="output in node.outputs" style="text-align: right">',e+='<div class="output-title">',e+="{{output.title}}</div>",e+="<div class=\"socket output {{output.socket.id.toLowerCase().replaceAll(' ','-')}}\" al-pick-output title=\"{{output.socket.name}}\n{{output.socket.hint}}\"></div></div>",e+="\x3c!-- Controls--\x3e",e+='<div class="control" al-repeat="control in node.controls" style="text-align: center" :width="control.parent.width - 2 * control.margin" :height="control.height" al-control="control"></div>',e+="\x3c!-- Inputs--\x3e",e+='<div al-repeat="input in node.inputs" style="text-align: left">',e+="<div class=\"socket input {{input.socket.id.toLowerCase().replaceAll(' ','-')}} {{input.multipleConnections?'multiple':''}}\" al-pick-input title=\"{{input.socket.name}}\n{{input.socket.hint}}\"></div>",e+='<div class="input-title" al-if="!input.showControl()">',e+="{{input.title}}</div>",e+='<div class="input-control" al-if="input.showControl()" al-control="input.control"></div></div>'}catch(t){pug.rethrow(t,void 0,void 0,n[void 0])}return e}(),K=function(t){function e(t,n){V(this,e);var r=L(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.template=n.template||z,r.builder=n.builder,r.created=n.created||function(){},r.destroyed=n.destroyed||function(){},r}return R(e,t),_(e,[{key:"newNode",value:function(){return new W(this.name)}}]),e}(P),F=function(){function t(){V(this,t)}return _(t,null,[{key:"nodesBBox",value:function(t){var e=function(t){return Math.min.apply(Math,M(t))},n=function(t){return Math.max.apply(Math,M(t))},r=e(t.map(function(t){return t.position[0]})),o=e(t.map(function(t){return t.position[1]})),i=n(t.map(function(t){return t.position[0]+t.width})),u=n(t.map(function(t){return t.position[1]+t.height}));return{left:r,right:i,top:o,bottom:u,width:Math.abs(r-i),height:Math.abs(o-u),getCenter:function(){return[(r+i)/2,(o+u)/2]}}}},{key:"isValidData",value:function(t){return"string"==typeof t.id&&this.isValidId(t.id)&&t.nodes instanceof Object&&!(t.nodes instanceof Array)&&(!t.groups||t.groups instanceof Object)}},{key:"isValidId",value:function(t){return/^[\w-]{3,}@[0-9]+\.[0-9]+\.[0-9]+$/.test(t)}},{key:"validate",value:function(t,e){var n="",r=t.split("@"),o=e.id.split("@");return this.isValidData(e)||(n+="Data is not suitable. "),t!==e.id&&(n+="IDs not equal. "),r[0]!==o[0]&&(n+="Names don't match. "),r[1]!==o[1]&&(n+="Versions don't match"),{success:""===n,msg:n}}}]),t}(),Y=function(t){function e(t,n){if(V(this,e),"string"!=typeof t)throw new TypeError('Value of argument "title" violates contract.\n\nExpected:\nstring\n\nGot:\n'+g(t));if(!(n instanceof Object))throw new TypeError('Value of argument "params" violates contract.\n\nExpected:\nObject\n\nGot:\n'+g(n));var r=L(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,e));return r.title=t,r.nodes=[],r.setMinSizes(300,250),n.nodes?r.coverNodes(n.nodes):(r.position=n.position,r.width=n.width,r.height=n.height),r}return R(e,t),_(e,[{key:"setMinSizes",value:function(t,e){this.minWidth=t,this.minHeight=e}},{key:"setWidth",value:function(t){if("number"!=typeof t)throw new TypeError('Value of argument "w" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+g(t));return this.width=Math.max(this.minWidth,t)}},{key:"setHeight",value:function(t){if("number"!=typeof t)throw new TypeError('Value of argument "h" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+g(t));return this.height=Math.max(this.minHeight,t)}},{key:"isCoverNode",value:function(t){if(!(t instanceof W))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+g(t));var e=this.position,n=t.position;return n[0]>e[0]&&n[1]>e[1]&&n[0]+t.width<e[0]+this.width&&n[1]+t.height<e[1]+this.height}},{key:"coverNodes",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return t instanceof W}))throw new TypeError('Value of argument "nodes" violates contract.\n\nExpected:\nNode[]\n\nGot:\n'+g(t));var e=this,n=F.nodesBBox(t);t.forEach(function(t){t.readOnly||(null!==t.group&&t.group.removeNode(t.group),e.addNode(t))}),this.position=[n.left-30,n.top-60],this.setWidth(n.right-n.left+60),this.setHeight(n.bottom-n.top+90)}},{key:"containNode",value:function(t){if(!(t instanceof W))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+g(t));return-1!==this.nodes.indexOf(t)}},{key:"addNode",value:function(t){if(!(t instanceof W))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+g(t));return!this.containNode(t)&&(null!==t.group&&t.group.removeNode(t),t.group=this,this.nodes.push(t),!0)}},{key:"removeNode",value:function(t){if(!(t instanceof W))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+g(t));this.containNode(t)&&(this.nodes.splice(this.nodes.indexOf(t),1),t.group=null)}},{key:"remove",value:function(){this.nodes.forEach(function(t){t.group=null})}},{key:"toJSON",value:function(){return{id:this.id,title:this.title,nodes:this.nodes.map(function(t){return t.id}),minWidth:this.minWidth,minHeight:this.minHeight,position:this.position,width:this.width,height:this.height}}}],[{key:"fromJSON",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "json" violates contract.\n\nExpected:\nObject\n\nGot:\n'+g(t));var n=new e(t.title,{position:t.position,width:t.width,height:t.height});return n.id=t.id,e.latestId=Math.max(n.id,e.latestId),n.minWidth=t.minWidth,n.minHeight=t.minHeight,n}}]),e}($),U=function(){function t(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(V(this,t),!(e instanceof Object))throw new TypeError('Value of argument "items" violates contract.\n\nExpected:\nObject\n\nGot:\n'+E(e));if("boolean"!=typeof n)throw new TypeError('Value of argument "searchBar" violates contract.\n\nExpected:\nboolean\n\nGot:\n'+E(n));this.visible=!1,this.disabled=r,this.x=0,this.y=0,this.default={items:e,searchBar:n,onClick:function(){throw new TypeError("onClick should be overrided")}},this.bindTemplate(k())}return _(t,[{key:"bindTemplate",value:function(t){this.dom=e.select("body").append("div"),this.dom.node().setAttribute("tabindex",1),this.dom.html(t);var r=n.makeInstance();x(this,r),this.$cd=r(this.dom.node(),{contextMenu:this})}},{key:"searchItems",value:function(t){var e=this;if(null!=t&&"string"!=typeof t)throw new TypeError('Value of argument "filter" violates contract.\n\nExpected:\n?string\n\nGot:\n'+E(t));var n=new RegExp(t,"i"),r={};return Object.keys(this.items).forEach(function(t){var o=e.items[t];if(o.constructor===Object){var i=Object.keys(o).filter(function(t){return n.test(t)});i.length>0&&(r[t]={},i.forEach(function(e){r[t][e]=o[e]}))}n.test(t)&&(r[t]=o)}),r}},{key:"haveSubitems",value:function(t){return t.constructor===Object}},{key:"isVisible",value:function(){return this.visible}},{key:"show",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if("number"!=typeof t)throw new TypeError('Value of argument "x" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+E(t));if("number"!=typeof e)throw new TypeError('Value of argument "y" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+E(e));if(!(null==n||n instanceof Object))throw new TypeError('Value of argument "items" violates contract.\n\nExpected:\n?Object\n\nGot:\n'+E(n));if(null!=r&&"boolean"!=typeof r)throw new TypeError('Value of argument "searchBar" violates contract.\n\nExpected:\n?boolean\n\nGot:\n'+E(r));this.disabled||(this.visible=!0,this.items=n||this.default.items,this.searchBar=r||this.default.searchBar,this.onClick=o||this.default.onClick,this.x=t,this.y=e,this.$cd.scan())}},{key:"hide",value:function(){this.visible=!1,this.$cd.scan()}}]),t}(),X=function(t){return parseInt(t)},Q=function(t,e){return t.every(function(t,n){return t===e[n]})},tt=function(t,e){return JSON.stringify(t)===JSON.stringify(e)},et=function(t,e,n){return t.node===e.node&&t[n]===e[n]},nt=function(t,e){return{removed:t.filter(function(t){return!e.some(function(e){return et(t,e,"input")})}),added:e.filter(function(e){return!t.some(function(t){return et(t,e,"input")})})}},rt=function(){function t(e,n){V(this,t),this.a=e,this.b=n}return _(t,[{key:"basicDiffs",value:function(){var t=Object.keys(this.a.nodes),e=Object.keys(this.b.nodes);return{removed:t.filter(function(t){return!e.includes(t)}).map(X),added:e.filter(function(e){return!t.includes(e)}).map(X),stayed:t.filter(function(t){return e.includes(t)}).map(X)}}},{key:"compare",value:function(){var t=this,e=this.basicDiffs(),n=e.removed,r=e.added,o=e.stayed;return{removed:n,added:r,moved:o.filter(function(e){var n=t.a.nodes[e].position,r=t.b.nodes[e].position;return!Q(n,r)}),datachanged:o.filter(function(e){var n=t.a.nodes[e].data,r=t.b.nodes[e].data;return!tt(n,r)}),connects:o.reduce(function(e,n){var r=t.a.nodes[n].outputs,o=t.b.nodes[n].outputs,i=r.map(function(t,e){return Object.assign({output:e},nt(t.connections,o[e].connections))}).filter(function(t){return 0!==t.added.length||0!==t.removed.length});return[].concat(M(e),M(i.map(function(t){return t.node=n,t})))},[])}}}]),t}(),ot={AVALIABLE:0,PROCESSED:1,ABORT:2},it=function(){function t(e,n){if(V(this,t),"string"!=typeof e)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+O(e));if(!Array.isArray(n)||!n.every(function(t){return t instanceof P}))throw new TypeError('Value of argument "components" violates contract.\n\nExpected:\nComponentWorker[]\n\nGot:\n'+O(n));if(!F.isValidId(e))throw new Error("ID should be valid to name@0.1.0 format");this.id=e,this.components=n,this.args=[],this.data=null,this.state=ot.AVALIABLE,this.onAbort=function(){},this.onError=function(t,e){console.error(t,e)}}return _(t,[{key:"clone",value:function(){return new t(this.id,this.components)}},{key:"throwError",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.abort());case 2:return this.onError(t,e),this.processDone(),n.abrupt("return","error");case 5:case"end":return n.stop()}},null,this)}},{key:"extractInputNodes",value:function(t,e){return t.inputs.reduce(function(t,n){return[].concat(M(t),M((n.connections||[]).reduce(function(t,n){return[].concat(M(t),[e[n.node]])},[])))},[])}},{key:"detectRecursions",value:function(t){var e=this,n=function n(r,o){if(o.some(function(t){return t===r}))return r;for(var i=0;i<o.length;i++)if(n(r,e.extractInputNodes(o[i],t)))return r;return null};return Object.keys(t).map(function(e){return t[e]}).map(function(r){return n(r,e.extractInputNodes(r,t))}).filter(function(t){return null!==t})}},{key:"processStart",value:function(){return this.state===ot.AVALIABLE?(this.state=ot.PROCESSED,!0):this.state!==ot.ABORT&&(console.warn("The process is busy and has not been restarted.\n                Use abort() to force it to complete"),!1)}},{key:"processDone",value:function(){var t=this.state!==ot.ABORT;return this.state=ot.AVALIABLE,t||(this.onAbort(),this.onAbort=function(){}),t}},{key:"abort",value:function(){var t=this;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){t.state===ot.PROCESSED?(t.state=ot.ABORT,t.onAbort=e):t.state===ot.ABORT?(t.onAbort(),t.onAbort=e):e()}));case 1:case"end":return e.stop()}},null,this)}},{key:"lock",value:function(t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){t.unlockPool=t.unlockPool||[],t.busy&&!t.outputData?t.unlockPool.push(e):e(),t.busy=!0}));case 1:case"end":return e.stop()}},null,this)}},{key:"unlock",value:function(t){t.unlockPool.forEach(function(t){return t()}),t.unlockPool=[],t.busy=!1}},{key:"extractInputData",value:function(t){var e=this;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(Promise.all(t.inputs.map(function(t){var n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return n=t.connections,o.next=3,regeneratorRuntime.awrap(Promise.all(n.map(function(t){var n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.data.nodes[t.node],o.next=3,regeneratorRuntime.awrap(e.processNode(n));case 3:if(r=o.sent){o.next=8;break}e.abort(),o.next=9;break;case 8:return o.abrupt("return",r[t.output]);case 9:case"end":return o.stop()}},null,e)})));case 3:return r=o.sent,o.abrupt("return",r);case 5:case"end":return o.stop()}},null,e)})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},null,this)}},{key:"processWorker",value:function(t){var e,n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(this.extractInputData(t));case 2:return e=o.sent,n=this.components.find(function(e){return e.name===t.title}),r=t.outputs.map(function(){return null}),o.prev=5,o.next=8,regeneratorRuntime.awrap(n.worker.apply(n,[t,e,r].concat(M(this.args))));case 8:o.next=14;break;case 10:o.prev=10,o.t0=o.catch(5),this.abort(),console.warn(o.t0);case 14:return o.abrupt("return",r);case 15:case"end":return o.stop()}},null,this,[[5,10]])}},{key:"processNode",value:function(t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state!==ot.ABORT&&t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,regeneratorRuntime.awrap(this.lock(t));case 4:return t.outputData||(t.outputData=this.processWorker(t)),this.unlock(t),e.abrupt("return",t.outputData);case 7:case"end":return e.stop()}},null,this)}},{key:"forwardProcess",value:function(t){var e=this;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.state!==ot.ABORT){n.next=2;break}return n.abrupt("return",null);case 2:return n.next=4,regeneratorRuntime.awrap(Promise.all(t.outputs.map(function(t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(Promise.all(t.connections.map(function(t){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.data.nodes[t.node],r.next=3,regeneratorRuntime.awrap(e.processNode(n));case 3:return r.next=5,regeneratorRuntime.awrap(e.forwardProcess(n));case 5:case"end":return r.stop()}},null,e)})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},null,e)})));case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}},null,this)}},{key:"copy",value:function(t){return t=Object.assign({},t),t.nodes=Object.assign({},t.nodes),Object.keys(t.nodes).forEach(function(e){t.nodes[e]=Object.assign({},t.nodes[e])}),t}},{key:"validate",value:function(t){var e,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(e=F.validate(this.id,t),e.success){r.next=5;break}return r.next=4,regeneratorRuntime.awrap(this.throwError(e.msg));case 4:return r.abrupt("return",r.sent);case 5:if(n=this.detectRecursions(t.nodes),!(n.length>0)){r.next=10;break}return r.next=9,regeneratorRuntime.awrap(this.throwError("Recursion detected",n));case 9:return r.abrupt("return",r.sent);case 10:return r.abrupt("return",!0);case 11:case"end":return r.stop()}},null,this)}},{key:"processStartNode",value:function(t){var e;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=10;break}if(e=this.data.nodes[t]){n.next=6;break}return n.next=5,regeneratorRuntime.awrap(this.throwError("Node with such id not found"));case 5:return n.abrupt("return",n.sent);case 6:return n.next=8,regeneratorRuntime.awrap(this.processNode(e));case 8:return n.next=10,regeneratorRuntime.awrap(this.forwardProcess(e));case 10:case"end":return n.stop()}},null,this)}},{key:"processUnreachable",value:function(){var t,e;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=regeneratorRuntime.keys(this.data.nodes);case 1:if((n.t1=n.t0()).done){n.next=11;break}if(t=n.t1.value,void 0!==this.data.nodes[t].outputData){n.next=9;break}return e=this.data.nodes[t],n.next=7,regeneratorRuntime.awrap(this.processNode(e));case 7:return n.next=9,regeneratorRuntime.awrap(this.forwardProcess(e));case 9:n.next=1;break;case 11:case"end":return n.stop()}},null,this)}},{key:"process",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(t instanceof Object){n.next=2;break}throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+O(t));case 2:if(null==e||"number"==typeof e){n.next=4;break}throw new TypeError('Value of argument "startId" violates contract.\n\nExpected:\n?number\n\nGot:\n'+O(e));case 4:if(this.processStart()){n.next=6;break}return n.abrupt("return");case 6:if(this.validate(t)){n.next=8;break}return n.abrupt("return");case 8:return this.data=this.copy(t),this.args=r,n.next=12,regeneratorRuntime.awrap(this.processStartNode(e));case 12:return n.next=14,regeneratorRuntime.awrap(this.processUnreachable());case 14:return n.abrupt("return",this.processDone()?"success":"aborted");case 15:case"end":return n.stop()}},null,this)}}]),t}(),ut=function(){function t(){V(this,t)}return _(t,null,[{key:"getInputPosition",value:function(t){var e=t.node,n=t.el;return[e.position[0]+n.offsetLeft+n.offsetWidth/2,e.position[1]+n.offsetTop+n.offsetHeight/2]}},{key:"getOutputPosition",value:function(t){var e=t.node,n=t.el;return[e.position[0]+n.offsetLeft+n.offsetWidth/2,e.position[1]+n.offsetTop+n.offsetHeight/2]}},{key:"getConnectionPath",value:function(t,n,r,o){var i=r.apply(void 0,M(t).concat(M(n),[o])),u=i.points,a=i.curve;switch(a){case"linear":a=e.curveLinear;break;case"step":a=e.curveStep;break;case"basis":default:a=e.curveBasis}return this.pointsToPath(u,a)}},{key:"pointsToPath",value:function(t,n){var r=n(e.path());r.lineStart();for(var o=0;o<t.length;o++)r.point.apply(r,M(t[o]));return r.lineEnd(),r._context.toString()}}]),t}(),at=function t(e,n){V(this,t),this.connection=null,this.input=n,this.output=e},st=function(){function t(n,r,o){if(V(this,t),!(n instanceof dt))throw new TypeError('Value of argument "editor" violates contract.\n\nExpected:\nNodeEditor\n\nGot:\n'+N(n));if(!(r instanceof HTMLElement))throw new TypeError('Value of argument "container" violates contract.\n\nExpected:\nHTMLElement\n\nGot:\n'+N(r));if(!(null==o||o instanceof U))throw new TypeError('Value of argument "menu" violates contract.\n\nExpected:\n?ContextMenu\n\nGot:\n'+N(o));this.editor=n,this.pickedOutput=null,this.container=e.select(r).attr("tabindex",1),this.mouse=[0,0],this.transform=e.zoomIdentity,this.contextMenu=o||new U({},!0,!0),this.initView(),this.initial()}return _(t,[{key:"initial",value:function(){this.setScaleExtent(.1,1);var t=Math.pow(2,12);this.setTranslateExtent(-t,-t,t,t)}},{key:"initView",value:function(){var t=this;this.container.on("click",function(){t.container.node()===e.event.target&&t.areaClick()}),this.view=this.container.append("div").style("transform-origin","0 0").style("width",1).style("height",1),this.zoom=e.zoom().on("zoom",function(){t.transform=e.event.transform,t.update(),t.editor.eventListener.trigger("transform",t.transform)}),this.container.call(this.zoom),e.select(window).on("mousemove.d3ne"+this.editor._id,function(){var n=t.transform.k,r=e.mouse(t.view.node());t.mouse=[r[0]/n,r[1]/n],t.update()}).on("keydown.d3ne"+this.editor._id,function(e){t.container.node()===document.activeElement&&t.editor.keyDown(e)}).on("resize.d3ne"+this.editor._id,this.resize.bind(this)),this.view.html(j()),this.initAlight()}},{key:"initAlight",value:function(){var t=n.makeInstance();b(this,t),this.$cd=t(this.view.node(),{editor:this.editor})}},{key:"getTemplate",value:function(t){var e=this.editor.components.find(function(e){return e.name===t.title});if(!e)throw new Error('Component not found. Make sure you have defined \n                            the component with the "'+t.title+'" name');return e.template}},{key:"resize",value:function(){var t=this.container.node().parentElement.clientWidth,e=this.container.node().parentElement.clientHeight;this.container.style("width",t+"px").style("height",e+"px"),this.update()}},{key:"connectionProducer",value:function(t,e,n,r){var o=.3*Math.abs(t-n),i=.1*(r-e);return{points:[[t,e],[t+o,e+i],[n-o,r-i],[n,r]],curve:"basis"}}},{key:"updateConnections",value:function(){var t=this,e=[];if(this.editor.nodes.forEach(function(n){n.getConnections("output").forEach(function(n){var r=n.output,o=n.input;if(o.el){var i=new at(r,o);i.connection=n,e.push({connection:n,d:ut.getConnectionPath(ut.getOutputPosition(r),ut.getInputPosition(o),t.connectionProducer,i)})}})}),null!==this.pickedOutput&&this.pickedOutput.el){var n=this.pickedOutput,r=this.mouse,o=new at(n,r);e.push({selected:!0,d:ut.getConnectionPath(ut.getOutputPosition(n),r,this.connectionProducer,o)})}this.editor.paths=e}},{key:"update",value:function(){var t=this.transform;this.view.style("transform","translate("+t.x+"px, "+t.y+"px) scale("+t.k+")"),this.updateConnections(),this.$cd.scan()}},{key:"assignContextMenuHandler",value:function(){var t=this;this.contextMenu.default.onClick=function(e){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e instanceof K)){r.next=8;break}return n=e.newNode(),r.next=4,regeneratorRuntime.awrap(e.builder(n));case 4:t.editor.addNode(n,!0),t.editor.selectNode(n),r.next=9;break;case 8:e();case 9:t.contextMenu.hide();case 10:case"end":return r.stop()}},null,t)}}},{key:"areaClick",value:function(){this.editor.readOnly||(null===this.pickedOutput||e.event.ctrlKey?this.contextMenu.visible?this.contextMenu.hide():(this.assignContextMenuHandler(),this.contextMenu.show(e.event.pageX,e.event.pageY)):this.pickedOutput=null,this.update())}},{key:"zoomAt",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return t instanceof W}))throw new TypeError('Value of argument "nodes" violates contract.\n\nExpected:\nNode[]\n\nGot:\n'+N(t));if(0!==t.length){var e=[this.container.node().clientWidth,this.container.node().clientHeight],n=e[0],r=e[1],o=F.nodesBBox(t),i=n/o.width,u=r/o.height,a=.9*Math.min(u,i,1),s=o.getCenter();this.translate(n/2-s[0]*a,r/2-s[1]*a),this.scale(a)}}},{key:"translate",value:function(t,e){this.transform.x=t,this.transform.y=e,this.update()}},{key:"scale",value:function(t){this.transform.k=t,this.update()}},{key:"setScaleExtent",value:function(t,e){if("number"!=typeof t)throw new TypeError('Value of argument "scaleMin" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+N(t));if("number"!=typeof e)throw new TypeError('Value of argument "scaleMax" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+N(e));this.scaleExtent=[t,e],this.zoom.scaleExtent(this.scaleExtent)}},{key:"setTranslateExtent",value:function(t,e,n,r){if("number"!=typeof t)throw new TypeError('Value of argument "left" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+N(t));if("number"!=typeof e)throw new TypeError('Value of argument "top" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+N(e));if("number"!=typeof n)throw new TypeError('Value of argument "right" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+N(n));if("number"!=typeof r)throw new TypeError('Value of argument "bottom" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+N(r));this.translateExtent=[[t,e],[n,r]],this.zoom.translateExtent(this.translateExtent)}},{key:"destroy",value:function(){e.select(window).on("mousemove.d3ne"+this.editor._id,null).on("keydown.d3ne"+this.editor._id,null).on("resize.d3ne"+this.editor._id,null)}}]),t}(),ct=function(){function t(){V(this,t),this.events={nodecreate:[],groupcreate:[],connectioncreate:[],noderemove:[],groupremove:[],connectionremove:[],nodeselect:[],groupselect:[],error:[console.warn],change:[],transform:[]},this.persistent=!0}return _(t,[{key:"on",value:function(t,e){var n=this;if("string"!=typeof t)throw new TypeError('Value of argument "names" violates contract.\n\nExpected:\nstring\n\nGot:\n'+T(t));if("function"!=typeof e)throw new TypeError('Value of argument "handler" violates contract.\n\nExpected:\n() => {}\n\nGot:\n'+T(e));return t.split(" ").forEach(function(t){if(!n.events[t])throw new Error("The event "+t+" does not exist");n.events[t].push(e)}),this}},{key:"trigger",value:function(t,e){var n=this;if("string"!=typeof t)throw new TypeError('Value of argument "name" violates contract.\n\nExpected:\nstring\n\nGot:\n'+T(t));if(!(t in this.events))throw new Error("The event "+t+" cannot be triggered");return this.events[t].reduce(function(t,r){return!1!==r(e,n.persistent)&&t},!0)}}]),t}(),lt=function t(e,n,r){V(this,t),this.exec=function(){e.apply(void 0,M(r))},this.undo=function(){n.apply(void 0,M(r))},this.a=r[0]},ft=function(){function t(e){V(this,t),this.editor=e,this.list=[],this._locked=!1,this.position=-1}return _(t,[{key:"add",value:function(t,e,n){this._locked||(this.position++,this.list.splice(this.position),this.list.push(new lt(t,e,n)))}},{key:"undo",value:function(){this.position<0||(this._locked=!0,this.list[this.position--].undo(),this._locked=!1)}},{key:"redo",value:function(){this.position+1>=this.list.length||(this._locked=!0,this.list[++this.position].exec(),this._locked=!1)}}]),t}(),ht=function(){function t(){V(this,t),this.list=[]}return _(t,[{key:"add",
 value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(t instanceof W||t instanceof Y))throw new TypeError('Value of argument "item" violates contract.\n\nExpected:\nNode | Group\n\nGot:\n'+A(t));e?this.contains(t)?this.remove(t):this.list.push(t):this.list=[t]}},{key:"clear",value:function(){var t=this;this.each(function(e){t.remove(e)})}},{key:"remove",value:function(t){this.list.splice(this.list.indexOf(t),1)}},{key:"contains",value:function(t){return-1!==this.list.indexOf(t)}},{key:"each",value:function(t){this.list.forEach(t)}},{key:"eachNode",value:function(t){this.list.filter(function(t){return t instanceof W}).forEach(t)}},{key:"eachGroup",value:function(t){this.list.filter(function(t){return t instanceof Y}).forEach(t)}},{key:"getNodes",value:function(){return this.list.filter(function(t){return t instanceof W})}},{key:"getGroups",value:function(){return this.list.filter(function(t){return t instanceof Y})}}]),t}(),dt=function(){function t(e,n,r,o){if(V(this,t),"string"!=typeof e)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+G(e));if(!(n instanceof HTMLElement))throw new TypeError('Value of argument "container" violates contract.\n\nExpected:\nHTMLElement\n\nGot:\n'+G(n));if(!Array.isArray(r)||!r.every(function(t){return t instanceof K}))throw new TypeError('Value of argument "components" violates contract.\n\nExpected:\nComponent[]\n\nGot:\n'+G(r));if(!(null==o||o instanceof U))throw new TypeError('Value of argument "menu" violates contract.\n\nExpected:\n?ContextMenu\n\nGot:\n'+G(o));if(!F.isValidId(e))throw new Error("ID should be valid to name@0.1.0 format");this.id=e,this.components=r,this.init(),this.view=new st(this,n,o),this.view.resize()}return _(t,[{key:"init",value:function(){this._id=Math.random().toString(36).substr(2,9),this.eventListener=new ct,this.selected=new ht,this.history=new ft(this),this.nodes=[],this.groups=[],this.readOnly=!1}},{key:"addNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(t instanceof W))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+G(t));this.eventListener.trigger("nodecreate",t)&&(e&&(t.position=this.view.mouse),this.nodes.push(t),this.findComponent(t).created(t),this.eventListener.trigger("change"),this.history.add(this.addNode.bind(this),this.removeNode.bind(this),[t]))}},{key:"addGroup",value:function(t){if(!(t instanceof Y))throw new TypeError('Value of argument "group" violates contract.\n\nExpected:\nGroup\n\nGot:\n'+G(t));this.eventListener.trigger("groupcreate",t)&&(this.groups.push(t),this.eventListener.trigger("change")),this.view.update()}},{key:"removeNode",value:function(t){var e=this;if(!(t instanceof W))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+G(t));if(!t.readOnly){var n=this.nodes.indexOf(t);this.eventListener.trigger("noderemove",t)&&(t.getConnections().forEach(function(t){return e.removeConnection(t)}),this.nodes.splice(n,1),this.findComponent(t).destroyed(t),this.eventListener.trigger("change"),this.history.add(this.removeNode.bind(this),this.addNode.bind(this),[t])),this.view.update()}}},{key:"removeGroup",value:function(t){if(!(t instanceof Y))throw new TypeError('Value of argument "group" violates contract.\n\nExpected:\nGroup\n\nGot:\n'+G(t));this.eventListener.trigger("groupremove",t)&&(t.remove(),this.groups.splice(this.groups.indexOf(t),1),this.eventListener.trigger("change")),this.view.update()}},{key:"connect",value:function(t,e){if(!(t instanceof q||t instanceof J))throw new TypeError('Value of argument "output" violates contract.\n\nExpected:\nOutput | Connection\n\nGot:\n'+G(t));if(!(null==e||e instanceof H))throw new TypeError('Value of argument "input" violates contract.\n\nExpected:\n?Input\n\nGot:\n'+G(e));if(t instanceof J&&(e=t.input,t=t.output),this.eventListener.trigger("connectioncreate",{output:t,input:e}))try{var n=t.connectTo(e);this.eventListener.trigger("change"),this.history.add(this.connect.bind(this),this.removeConnection.bind(this),[n])}catch(t){this.eventListener.trigger("error",t)}this.view.update()}},{key:"removeConnection",value:function(t){if(!(t instanceof J))throw new TypeError('Value of argument "connection" violates contract.\n\nExpected:\nConnection\n\nGot:\n'+G(t));this.eventListener.trigger("connectionremove",t)&&(t.remove(),this.eventListener.trigger("change"),this.history.add(this.removeConnection.bind(this),this.connect.bind(this),[t])),this.view.update()}},{key:"selectNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(t instanceof W))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+G(t));if("boolean"!=typeof e)throw new TypeError('Value of argument "accumulate" violates contract.\n\nExpected:\nboolean\n\nGot:\n'+G(e));if(-1===this.nodes.indexOf(t))throw new Error("Node not exist in list");this.eventListener.trigger("nodeselect",t)&&this.selected.add(t,e),this.view.update()}},{key:"selectGroup",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(t instanceof Y))throw new TypeError('Value of argument "group" violates contract.\n\nExpected:\nGroup\n\nGot:\n'+G(t));if("boolean"!=typeof e)throw new TypeError('Value of argument "accumulate" violates contract.\n\nExpected:\nboolean\n\nGot:\n'+G(e));if(-1===this.groups.indexOf(t))throw new Error("Group not exist in list");this.eventListener.trigger("groupselect",t)&&this.selected.add(t,e),this.view.update()}},{key:"keyDown",value:function(){if(!this.readOnly)switch(e.event.keyCode){case 46:this.selected.eachNode(this.removeNode.bind(this)),this.selected.eachGroup(this.removeGroup.bind(this)),this.view.update();break;case 71:var t=this.selected.getNodes();t.length>0&&this.addGroup(new Y("Group",{nodes:t}));break;case 90:e.event.ctrlKey&&e.event.shiftKey?this.history.redo():e.event.ctrlKey&&this.history.undo()}}},{key:"findComponent",value:function(t){var e=this.components.find(function(e){return e.name===t.title});if(!e)throw"Component "+t.title+" was not found";return e}},{key:"clear",value:function(){this.nodes.splice(0,this.nodes.length),this.groups.splice(0,this.groups.length)}},{key:"toJSON",value:function(){var t={},e={};return this.nodes.forEach(function(e){return t[e.id]=e.toJSON()}),this.groups.forEach(function(t){return e[t.id]=t.toJSON()}),{id:this.id,nodes:t,groups:e}}},{key:"beforeImport",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "json" violates contract.\n\nExpected:\nObject\n\nGot:\n'+G(t));var e=F.validate(this.id,t);return e.success?(this.eventListener.persistent=!1,this.clear(),!0):(this.eventListener.trigger("error",e.msg),!1)}},{key:"afterImport",value:function(){return this.view.update(),this.eventListener.persistent=!0,!0}},{key:"fromJSON",value:function(t){var e,n=this;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(t instanceof Object){r.next=2;break}throw new TypeError('Value of argument "json" violates contract.\n\nExpected:\nObject\n\nGot:\n'+G(t));case 2:if(this.beforeImport(t)){r.next=4;break}return r.abrupt("return",!1);case 4:return e={},r.prev=5,r.next=8,regeneratorRuntime.awrap(Promise.all(Object.keys(t.nodes).map(function(r){var o,i;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return o=t.nodes[r],i=n.findComponent(o),u.next=4,regeneratorRuntime.awrap(W.fromJSON(i,o));case 4:e[r]=u.sent,n.addNode(e[r]);case 6:case"end":return u.stop()}},null,n)})));case 8:Object.keys(t.nodes).forEach(function(r){var o=t.nodes[r],i=e[r];o.outputs.forEach(function(t,r){t.connections.forEach(function(t){var o=t.node,u=t.input,a=e[o].inputs[u];n.connect(i.outputs[r],a)})})}),"object"===C(t.groups)&&Object.keys(t.groups).forEach(function(r){var o=Y.fromJSON(t.groups[r]);t.groups[r].nodes.forEach(function(t){var n=e[t];o.addNode(n)}),n.addGroup(o)}),r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(5),this.eventListener.trigger("error",r.t0),r.abrupt("return",!1);case 16:return r.abrupt("return",this.afterImport());case 17:case"end":return r.stop()}},null,this,[[5,12]])}}]),t}(),pt=function(){function t(e,n){var r=this;V(this,t),this.inputs=e,this.action=n,this.next=[],this.outputData=null,this.closed=[],this.getOptions().forEach(function(t){t.forEach(function(t){t.task.next.push({index:t.index,task:r})})})}return _(t,[{key:"getOptions",value:function(){return this.inputs.filter(function(t){return t[0]&&t[0].task})}},{key:"getOutputs",value:function(){return this.inputs.filter(function(t){return t[0]&&t[0].get})}},{key:"reset",value:function(){this.outputData=null}},{key:"run",value:function(t){var e,n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return o.push(this),i.next=3,regeneratorRuntime.awrap(Promise.all(this.getOutputs().map(function(e){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Promise.all(e.map(function(e){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return n.next=3,regeneratorRuntime.awrap(e.run(t,!1,o));case 3:return n.abrupt("return",e.get());case 4:case"end":return n.stop()}},null,n)})));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},null,n)})));case 3:if(e=i.sent,this.outputData){i.next=10;break}return i.next=7,regeneratorRuntime.awrap(this.action(e,t));case 7:return this.outputData=i.sent,i.next=10,regeneratorRuntime.awrap(Promise.all(this.next.filter(function(t){return!n.closed.includes(t.index)}).map(function(e){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(e.task.run(t,!1,o));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},null,n)})));case 10:r&&o.map(function(t){return t.reset()});case 11:case"end":return i.stop()}},null,this)}},{key:"option",value:function(t){return{task:this,index:t}}},{key:"output",value:function(t){var e=this;return{run:e.run.bind(e),get:function(){return e.outputData[t]}}}}]),t}();t.Component=K,t.ContextMenu=U,t.Control=D,t.Diff=rt,t.NodeEditor=dt,t.Engine=it,t.Group=Y,t.Input=H,t.Node=W,t.Output=q,t.Socket=B,t.Task=pt,t.Module=S,t.ModuleManager=I,Object.defineProperty(t,"__esModule",{value:!0})});
 //# sourceMappingURL=d3-node-editor.min.js.map
\ No newline at end of file
diff --git a/node_modules/d3-node-editor/build/d3-node-editor.min.js.map b/node_modules/d3-node-editor/build/d3-node-editor.min.js.map
index 751685f..07b9849 100755
--- a/node_modules/d3-node-editor/build/d3-node-editor.min.js.map
+++ b/node_modules/d3-node-editor/build/d3-node-editor.min.js.map
@@ -1 +1 @@
-{"version":3,"sources":["?"],"names":["global","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","prototype","Generator","generator","Object","create","context","Context","_invoke","makeInvokeMethod","tryCatch","fn","obj","arg","type","call","err","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","forEach","method","this","AsyncIterator","invoke","resolve","reject","record","result","value","hasOwn","Promise","__await","then","unwrapped","enqueue","callInvokeWithMethodAndArg","previousPromise","state","GenStateSuspendedStart","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","done","GenStateSuspendedYield","iterator","undefined","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","values","iterable","iteratorMethod","iteratorSymbol","isNaN","length","i","Op","hasOwnProperty","$Symbol","Symbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","inModule","module","runtime","regeneratorRuntime","exports","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","iter","toString","keys","object","key","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","Function","factory","require","define","amd","D3NE","d3","alight","_inspect","input","depth","_typeof","Array","isArray","first","every","item","trim","map","join","indent","repeat","entries","test","JSON","stringify","_inspect$1","_inspect$2","_inspect$3","_inspect$4","_inspect$5","Group","scope","el","expression","env","setPosition","dx","dy","extent","editor","view","translateExtent","minx","miny","maxx","maxy","position","Math","min","max","_this","group","changeDetector","locals","watch","assign","style","deep","select","drag","on","event","sourceEvent","shiftKey","selectGroup","ctrlKey","readOnly","k","transform","selected","each","eachGroup","nodes","node","contains","update","eventListener","trigger","items","Remove group","removeGroup","onClick","subitem","contextMenu","hide","x","clientX","y","clientY","show","preventDefault","GroupHandler","updateGroup","mouse","deltaw","deltah","deltax","deltay","mousePrev","match","setWidth","width","setHeight","height","_this2","container","zoom","zoomTransform","minWidth","minHeight","isCoverNode","addNode","removeNode","GroupTitle","title","prompt","scan","PickInput","interceptInput","pickedOutput","hasConnection","connections","output","removeConnection","prepareConnection","multipleConnections","connectedTo","connection","find","c","connect","prevent","stopPropagation","PickOutput","_this3","setAttributes","dataset","inputNode","id","inputIndex","inputs","indexOf","outputNode","outputIndex","outputs","className","baseVal","socket","toLowerCase","replace","Connection$1","path","Control$1","control","innerHTML","html","handler","children","Item","l","haveSubitems","classed","_inspect$6","Node$1","raise","selectNode","_node","groups","eachNode","contain","containNode","cover","window","addEventListener","offsetWidth","offsetHeight","Remove node","Add to group","Group$1","addGroup","declareViewDirectives","alight$$1","directives","al","bind","groupHandler","groupTitle","pickInput","pickOutput","declareMenuDirectives","menu","template$1","pug_html","pug_debug_sources","pug","rethrow","pug_debug_filename","pug_debug_line","_inspect$7","_inspect$8","template$2","_inspect$9","_inspect$10","_inspect$11","_inspect$12","classCallCheck","instance","Constructor","createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","inherits","subClass","superClass","possibleConstructorReturn","ReferenceError","toConsumableArray","arr","arr2","from","Module","data","titlesInput","titlesOutput","extractNodes","n","titles","filter","includes","sort","n1","n2","ModuleManager","engine","m","_context","clone","read","process","write","ComponentWorker","worker","Block","Class","incrementId","latestId","Control","arguments","parent","Node","getNode","Connection","addConnection","IO","multiConns","splice","Socket","hint","compatible","Input","_IO","Output","compatibleWith","some","_Block","controls","_ref","index","floor","conns","showControl","toJSON","component","json","Component","newNode","builder","defaultTemplate","_ComponentWorker","template","created","destroyed","Utils","apply","left","top","right","bottom","abs","getCenter","isValidId","msg","id1","split","id2","isValidData","success","params","setMinSizes","coverNodes","w","h","gp","np","bbox","nodesBBox","a","ContextMenu","searchBar","disabled","visible","default","bindTemplate","t","dom","append","setAttribute","alightInstance","makeInstance","$cd","regex","RegExp","subitems","sumitem","p","v","parseInt","eqArr","ar1","ar2","eqObj","o1","o2","eqCon","c1","c2","diffCons","cons1","cons2","removed","added","Diff","data1","data2","b","k1","k2","stayed","_basicDiffs","basicDiffs","moved","p1","p2","datachanged","d1","d2","connects","reduce","out","diff","concat","o","State","AVALIABLE","PROCESSED","ABORT","Engine","components","args","onAbort","onError","message","console","error","abort","processDone","inp","findSelf","inputNodes","extractInputNodes","r","warn","_context2","ret","_context3","res","unlockPool","busy","outputData","_context6","all","connData","_context5","prevNode","_context4","processNode","inputData","_context7","extractInputData","t0","_context8","lock","processWorker","unlock","_this4","_context11","_context10","nextNode","_context9","forwardProcess","checking","recurentNodes","_context12","validate","throwError","detectRecursions","startNode","_context13","_context14","t1","startId","_len","_key","_context15","processStart","copy","processStartNode","processUnreachable","ViewUtils","offsetLeft","offsetTop","produce","pathInfo","_produce","points","curve","curveLinear","curveStep","curveBasis","pointsToPath","d3curve","lineStart","point","lineEnd","PathInfo","EditorView","NodeEditor","HTMLElement","attr","zoomIdentity","initView","initial","setScaleExtent","size","pow","setTranslateExtent","areaClick","_id","e","document","activeElement","keyDown","resize","initAlight","parentElement","clientWidth","clientHeight","x1","y1","x2","y2","offsetX","offsetY","pathData","getConnections","con","d","getConnectionPath","getOutputPosition","getInputPosition","connectionProducer","paths","updateConnections","assignContextMenuHandler","pageX","pageY","kw","kh","center","translate","scale","_scale","scaleMin","scaleMax","scaleExtent","EventListener","events","nodecreate","groupcreate","connectioncreate","noderemove","groupremove","connectionremove","nodeselect","groupselect","change","persistent","names","param","Command","exec","undo","History","list","_locked","Selected","accumulate","remove","callback","init","random","substr","history","mousePlaced","findComponent","add","connectTo","keyCode","getNodes","redo","clear","beforeImport","fromJSON","jsonNode","outputJson","jsonConnection","nodeId","targetInput","afterImport","Task","action","closed","getOptions","task","get","needReset","garbage","getOutputs","run","f"],"mappings":"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","file":"d3-node-editor.min.js"}
\ No newline at end of file
+{"version":3,"sources":["?"],"names":["global","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","prototype","Generator","generator","Object","create","context","Context","_invoke","makeInvokeMethod","tryCatch","fn","obj","arg","type","call","err","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","forEach","method","this","AsyncIterator","invoke","resolve","reject","record","result","value","hasOwn","Promise","__await","then","unwrapped","enqueue","callInvokeWithMethodAndArg","previousPromise","state","GenStateSuspendedStart","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","done","GenStateSuspendedYield","iterator","undefined","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","values","iterable","iteratorMethod","iteratorSymbol","isNaN","length","i","Op","hasOwnProperty","$Symbol","Symbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","inModule","module","runtime","regeneratorRuntime","exports","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","iter","toString","keys","object","key","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","Function","factory","require","define","amd","D3NE","d3","alight","_inspect","input","depth","_typeof","Array","isArray","first","every","item","trim","map","join","indent","repeat","entries","test","JSON","stringify","_inspect$1","_inspect$2","_inspect$3","_inspect$4","_inspect$5","Group","scope","el","expression","env","setPosition","dx","dy","extent","editor","view","translateExtent","minx","miny","maxx","maxy","position","Math","min","max","_this","group","changeDetector","locals","watch","assign","style","deep","select","drag","on","event","sourceEvent","shiftKey","selectGroup","ctrlKey","readOnly","k","transform","selected","each","eachGroup","nodes","node","contains","update","eventListener","trigger","items","Remove group","removeGroup","onClick","subitem","contextMenu","hide","x","clientX","y","clientY","show","preventDefault","GroupHandler","updateGroup","mouse","deltaw","deltah","deltax","deltay","mousePrev","match","setWidth","width","setHeight","height","_this2","container","zoom","zoomTransform","minWidth","minHeight","isCoverNode","addNode","removeNode","GroupTitle","title","prompt","scan","PickInput","interceptInput","pickedOutput","hasConnection","connections","output","removeConnection","prepareConnection","multipleConnections","connectedTo","connection","find","c","connect","prevent","stopPropagation","PickOutput","_this3","setAttributes","dataset","inputNode","id","inputIndex","inputs","indexOf","outputNode","outputIndex","outputs","className","baseVal","socket","toLowerCase","replaceAll","Connection$1","path","Control$1","control","innerHTML","html","handler","children","Item","l","haveSubitems","classed","_inspect$6","Node$1","raise","selectNode","_node","groups","eachNode","contain","containNode","cover","window","addEventListener","offsetWidth","offsetHeight","Remove node","Add to group","Group$1","addGroup","declareViewDirectives","alight$$1","directives","al","bind","groupHandler","groupTitle","pickInput","pickOutput","declareMenuDirectives","menu","template$1","pug_html","pug_debug_sources","pug","rethrow","pug_debug_filename","pug_debug_line","_inspect$7","_inspect$8","template$2","_inspect$9","_inspect$10","_inspect$11","_inspect$12","classCallCheck","instance","Constructor","createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","inherits","subClass","superClass","possibleConstructorReturn","ReferenceError","toConsumableArray","arr","arr2","from","Module","data","titlesInput","titlesOutput","extractNodes","n","titles","filter","includes","sort","n1","n2","ModuleManager","engine","m","_context","clone","read","process","write","ComponentWorker","worker","Block","Class","incrementId","latestId","Control","arguments","parent","Node","getNode","Connection","addConnection","IO","multiConns","splice","Socket","hint","compatible","Input","_IO","Output","compatibleWith","some","_Block","controls","_ref","index","floor","conns","showControl","toJSON","component","json","Component","newNode","builder","defaultTemplate","_ComponentWorker","template","created","destroyed","Utils","apply","left","top","right","bottom","abs","getCenter","isValidId","msg","id1","split","id2","isValidData","success","params","setMinSizes","coverNodes","w","h","gp","np","bbox","nodesBBox","a","ContextMenu","searchBar","disabled","visible","default","bindTemplate","t","dom","append","setAttribute","alightInstance","makeInstance","$cd","regex","RegExp","subitems","sumitem","p","v","parseInt","eqArr","ar1","ar2","eqObj","o1","o2","eqCon","c1","c2","diffCons","cons1","cons2","removed","added","Diff","data1","data2","b","k1","k2","stayed","_basicDiffs","basicDiffs","moved","p1","p2","datachanged","d1","d2","connects","reduce","out","diff","concat","o","State","AVALIABLE","PROCESSED","ABORT","Engine","components","args","onAbort","onError","message","console","error","abort","processDone","inp","findSelf","inputNodes","extractInputNodes","r","warn","_context2","ret","_context3","res","unlockPool","busy","outputData","_context6","all","connData","_context5","prevNode","_context4","processNode","inputData","_context7","extractInputData","t0","_context8","lock","processWorker","unlock","_this4","_context11","_context10","nextNode","_context9","forwardProcess","checking","recurentNodes","_context12","validate","throwError","detectRecursions","startNode","_context13","_context14","t1","startId","_len","_key","_context15","processStart","copy","processStartNode","processUnreachable","ViewUtils","offsetLeft","offsetTop","produce","pathInfo","_produce","points","curve","curveLinear","curveStep","curveBasis","pointsToPath","d3curve","lineStart","point","lineEnd","PathInfo","EditorView","NodeEditor","HTMLElement","attr","zoomIdentity","initView","initial","setScaleExtent","size","pow","setTranslateExtent","areaClick","_id","e","document","activeElement","keyDown","resize","initAlight","parentElement","clientWidth","clientHeight","x1","y1","x2","y2","offsetX","offsetY","pathData","getConnections","con","d","getConnectionPath","getOutputPosition","getInputPosition","connectionProducer","paths","updateConnections","assignContextMenuHandler","pageX","pageY","kw","kh","center","translate","scale","_scale","scaleMin","scaleMax","scaleExtent","EventListener","events","nodecreate","groupcreate","connectioncreate","noderemove","groupremove","connectionremove","nodeselect","groupselect","change","persistent","names","param","Command","exec","undo","History","list","_locked","Selected","accumulate","remove","callback","init","random","substr","history","mousePlaced","findComponent","add","connectTo","keyCode","getNodes","redo","clear","beforeImport","fromJSON","jsonNode","outputJson","jsonConnection","nodeId","targetInput","afterImport","Task","action","closed","getOptions","task","get","needReset","garbage","getOutputs","run","f"],"mappings":"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","file":"d3-node-editor.min.js"}
\ No newline at end of file
